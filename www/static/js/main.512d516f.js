/*! For license information please see main.512d516f.js.LICENSE.txt */
(()=>{"use strict";var e={4:(e,t,n)=>{var a=n(853),r=n(43),i=n(950);function l(e){var t="https://react.dev/errors/"+e;if(1<arguments.length){t+="?args[]="+encodeURIComponent(arguments[1]);for(var n=2;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n])}return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function o(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType)}function s(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do{0!==(4098&(t=e).flags)&&(n=t.return),e=t.return}while(e)}return 3===t.tag?n:null}function c(e){if(13===e.tag){var t=e.memoizedState;if(null===t&&(null!==(e=e.alternate)&&(t=e.memoizedState)),null!==t)return t.dehydrated}return null}function u(e){if(s(e)!==e)throw Error(l(188))}function d(e){var t=e.tag;if(5===t||26===t||27===t||6===t)return e;for(e=e.child;null!==e;){if(null!==(t=d(e)))return t;e=e.sibling}return null}var f=Object.assign,p=Symbol.for("react.element"),m=Symbol.for("react.transitional.element"),_=Symbol.for("react.portal"),h=Symbol.for("react.fragment"),g=Symbol.for("react.strict_mode"),y=Symbol.for("react.profiler"),v=Symbol.for("react.provider"),E=Symbol.for("react.consumer"),b=Symbol.for("react.context"),C=Symbol.for("react.forward_ref"),A=Symbol.for("react.suspense"),S=Symbol.for("react.suspense_list"),N=Symbol.for("react.memo"),D=Symbol.for("react.lazy");Symbol.for("react.scope");var R=Symbol.for("react.activity");Symbol.for("react.legacy_hidden"),Symbol.for("react.tracing_marker");var w=Symbol.for("react.memo_cache_sentinel");Symbol.for("react.view_transition");var k=Symbol.iterator;function O(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=k&&e[k]||e["@@iterator"])?e:null}var x=Symbol.for("react.client.reference");function T(e){if(null==e)return null;if("function"===typeof e)return e.$$typeof===x?null:e.displayName||e.name||null;if("string"===typeof e)return e;switch(e){case h:return"Fragment";case y:return"Profiler";case g:return"StrictMode";case A:return"Suspense";case S:return"SuspenseList";case R:return"Activity"}if("object"===typeof e)switch(e.$$typeof){case _:return"Portal";case b:return(e.displayName||"Context")+".Provider";case E:return(e._context.displayName||"Context")+".Consumer";case C:var t=e.render;return(e=e.displayName)||(e=""!==(e=t.displayName||t.name||"")?"ForwardRef("+e+")":"ForwardRef"),e;case N:return null!==(t=e.displayName||null)?t:T(e.type)||"Memo";case D:t=e._payload,e=e._init;try{return T(e(t))}catch(n){}}return null}var I=Array.isArray,P=r.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,M=i.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,L={pending:!1,data:null,method:null,action:null},j=[],U=-1;function F(e){return{current:e}}function z(e){0>U||(e.current=j[U],j[U]=null,U--)}function G(e,t){U++,j[U]=e.current,e.current=t}var H=F(null),Y=F(null),B=F(null),W=F(null);function q(e,t){switch(G(B,t),G(Y,e),G(H,null),t.nodeType){case 9:case 11:e=(e=t.documentElement)&&(e=e.namespaceURI)?rd(e):0;break;default:if(e=t.tagName,t=t.namespaceURI)e=id(t=rd(t),e);else switch(e){case"svg":e=1;break;case"math":e=2;break;default:e=0}}z(H),G(H,e)}function V(){z(H),z(Y),z(B)}function Q(e){null!==e.memoizedState&&G(W,e);var t=H.current,n=id(t,e.type);t!==n&&(G(Y,e),G(H,n))}function $(e){Y.current===e&&(z(H),z(Y)),W.current===e&&(z(W),Qd._currentValue=L)}var K=Object.prototype.hasOwnProperty,X=a.unstable_scheduleCallback,Z=a.unstable_cancelCallback,J=a.unstable_shouldYield,ee=a.unstable_requestPaint,te=a.unstable_now,ne=a.unstable_getCurrentPriorityLevel,ae=a.unstable_ImmediatePriority,re=a.unstable_UserBlockingPriority,ie=a.unstable_NormalPriority,le=a.unstable_LowPriority,oe=a.unstable_IdlePriority,se=a.log,ce=a.unstable_setDisableYieldValue,ue=null,de=null;function fe(e){if("function"===typeof se&&ce(e),de&&"function"===typeof de.setStrictMode)try{de.setStrictMode(ue,e)}catch(t){}}var pe=Math.clz32?Math.clz32:function(e){return 0===(e>>>=0)?32:31-(me(e)/_e|0)|0},me=Math.log,_e=Math.LN2;var he=256,ge=4194304;function ye(e){var t=42&e;if(0!==t)return t;switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return 4194048&e;case 4194304:case 8388608:case 16777216:case 33554432:return 62914560&e;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return e}}function ve(e,t,n){var a=e.pendingLanes;if(0===a)return 0;var r=0,i=e.suspendedLanes,l=e.pingedLanes;e=e.warmLanes;var o=134217727&a;return 0!==o?0!==(a=o&~i)?r=ye(a):0!==(l&=o)?r=ye(l):n||0!==(n=o&~e)&&(r=ye(n)):0!==(o=a&~i)?r=ye(o):0!==l?r=ye(l):n||0!==(n=a&~e)&&(r=ye(n)),0===r?0:0!==t&&t!==r&&0===(t&i)&&((i=r&-r)>=(n=t&-t)||32===i&&0!==(4194048&n))?t:r}function Ee(e,t){return 0===(e.pendingLanes&~(e.suspendedLanes&~e.pingedLanes)&t)}function be(e,t){switch(e){case 1:case 2:case 4:case 8:case 64:return t+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;default:return-1}}function Ce(){var e=he;return 0===(4194048&(he<<=1))&&(he=256),e}function Ae(){var e=ge;return 0===(62914560&(ge<<=1))&&(ge=4194304),e}function Se(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function Ne(e,t){e.pendingLanes|=t,268435456!==t&&(e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0)}function De(e,t,n){e.pendingLanes|=t,e.suspendedLanes&=~t;var a=31-pe(t);e.entangledLanes|=t,e.entanglements[a]=1073741824|e.entanglements[a]|4194090&n}function Re(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var a=31-pe(n),r=1<<a;r&t|e[a]&t&&(e[a]|=t),n&=~r}}function we(e){switch(e){case 2:e=1;break;case 8:e=4;break;case 32:e=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:e=128;break;case 268435456:e=134217728;break;default:e=0}return e}function ke(e){return 2<(e&=-e)?8<e?0!==(134217727&e)?32:268435456:8:2}function Oe(){var e=M.p;return 0!==e?e:void 0===(e=window.event)?32:uf(e.type)}var xe=Math.random().toString(36).slice(2),Te="__reactFiber$"+xe,Ie="__reactProps$"+xe,Pe="__reactContainer$"+xe,Me="__reactEvents$"+xe,Le="__reactListeners$"+xe,je="__reactHandles$"+xe,Ue="__reactResources$"+xe,Fe="__reactMarker$"+xe;function ze(e){delete e[Te],delete e[Ie],delete e[Me],delete e[Le],delete e[je]}function Ge(e){var t=e[Te];if(t)return t;for(var n=e.parentNode;n;){if(t=n[Pe]||n[Te]){if(n=t.alternate,null!==t.child||null!==n&&null!==n.child)for(e=vd(e);null!==e;){if(n=e[Te])return n;e=vd(e)}return t}n=(e=n).parentNode}return null}function He(e){if(e=e[Te]||e[Pe]){var t=e.tag;if(5===t||6===t||13===t||26===t||27===t||3===t)return e}return null}function Ye(e){var t=e.tag;if(5===t||26===t||27===t||6===t)return e.stateNode;throw Error(l(33))}function Be(e){var t=e[Ue];return t||(t=e[Ue]={hoistableStyles:new Map,hoistableScripts:new Map}),t}function We(e){e[Fe]=!0}var qe=new Set,Ve={};function Qe(e,t){$e(e,t),$e(e+"Capture",t)}function $e(e,t){for(Ve[e]=t,e=0;e<t.length;e++)qe.add(t[e])}var Ke,Xe,Ze=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),Je={},et={};function tt(e,t,n){if(r=t,K.call(et,r)||!K.call(Je,r)&&(Ze.test(r)?et[r]=!0:(Je[r]=!0,0)))if(null===n)e.removeAttribute(t);else{switch(typeof n){case"undefined":case"function":case"symbol":return void e.removeAttribute(t);case"boolean":var a=t.toLowerCase().slice(0,5);if("data-"!==a&&"aria-"!==a)return void e.removeAttribute(t)}e.setAttribute(t,""+n)}var r}function nt(e,t,n){if(null===n)e.removeAttribute(t);else{switch(typeof n){case"undefined":case"function":case"symbol":case"boolean":return void e.removeAttribute(t)}e.setAttribute(t,""+n)}}function at(e,t,n,a){if(null===a)e.removeAttribute(n);else{switch(typeof a){case"undefined":case"function":case"symbol":case"boolean":return void e.removeAttribute(n)}e.setAttributeNS(t,n,""+a)}}function rt(e){if(void 0===Ke)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);Ke=t&&t[1]||"",Xe=-1<n.stack.indexOf("\n    at")?" (<anonymous>)":-1<n.stack.indexOf("@")?"@unknown:0:0":""}return"\n"+Ke+e+Xe}var it=!1;function lt(e,t){if(!e||it)return"";it=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var a={DetermineComponentFrameRoot:function(){try{if(t){var n=function(){throw Error()};if(Object.defineProperty(n.prototype,"props",{set:function(){throw Error()}}),"object"===typeof Reflect&&Reflect.construct){try{Reflect.construct(n,[])}catch(r){var a=r}Reflect.construct(e,[],n)}else{try{n.call()}catch(i){a=i}e.call(n.prototype)}}else{try{throw Error()}catch(l){a=l}(n=e())&&"function"===typeof n.catch&&n.catch(function(){})}}catch(o){if(o&&a&&"string"===typeof o.stack)return[o.stack,a.stack]}return[null,null]}};a.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var r=Object.getOwnPropertyDescriptor(a.DetermineComponentFrameRoot,"name");r&&r.configurable&&Object.defineProperty(a.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var i=a.DetermineComponentFrameRoot(),l=i[0],o=i[1];if(l&&o){var s=l.split("\n"),c=o.split("\n");for(r=a=0;a<s.length&&!s[a].includes("DetermineComponentFrameRoot");)a++;for(;r<c.length&&!c[r].includes("DetermineComponentFrameRoot");)r++;if(a===s.length||r===c.length)for(a=s.length-1,r=c.length-1;1<=a&&0<=r&&s[a]!==c[r];)r--;for(;1<=a&&0<=r;a--,r--)if(s[a]!==c[r]){if(1!==a||1!==r)do{if(a--,0>--r||s[a]!==c[r]){var u="\n"+s[a].replace(" at new "," at ");return e.displayName&&u.includes("<anonymous>")&&(u=u.replace("<anonymous>",e.displayName)),u}}while(1<=a&&0<=r);break}}}finally{it=!1,Error.prepareStackTrace=n}return(n=e?e.displayName||e.name:"")?rt(n):""}function ot(e){switch(e.tag){case 26:case 27:case 5:return rt(e.type);case 16:return rt("Lazy");case 13:return rt("Suspense");case 19:return rt("SuspenseList");case 0:case 15:return lt(e.type,!1);case 11:return lt(e.type.render,!1);case 1:return lt(e.type,!0);case 31:return rt("Activity");default:return""}}function st(e){try{var t="";do{t+=ot(e),e=e.return}while(e);return t}catch(n){return"\nError generating stack: "+n.message+"\n"+n.stack}}function ct(e){switch(typeof e){case"bigint":case"boolean":case"number":case"string":case"undefined":case"object":return e;default:return""}}function ut(e){var t=e.type;return(e=e.nodeName)&&"input"===e.toLowerCase()&&("checkbox"===t||"radio"===t)}function dt(e){e._valueTracker||(e._valueTracker=function(e){var t=ut(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),a=""+e[t];if(!e.hasOwnProperty(t)&&"undefined"!==typeof n&&"function"===typeof n.get&&"function"===typeof n.set){var r=n.get,i=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return r.call(this)},set:function(e){a=""+e,i.call(this,e)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return a},setValue:function(e){a=""+e},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}(e))}function ft(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),a="";return e&&(a=ut(e)?e.checked?"true":"false":e.value),(e=a)!==n&&(t.setValue(e),!0)}function pt(e){if("undefined"===typeof(e=e||("undefined"!==typeof document?document:void 0)))return null;try{return e.activeElement||e.body}catch(t){return e.body}}var mt=/[\n"\\]/g;function _t(e){return e.replace(mt,function(e){return"\\"+e.charCodeAt(0).toString(16)+" "})}function ht(e,t,n,a,r,i,l,o){e.name="",null!=l&&"function"!==typeof l&&"symbol"!==typeof l&&"boolean"!==typeof l?e.type=l:e.removeAttribute("type"),null!=t?"number"===l?(0===t&&""===e.value||e.value!=t)&&(e.value=""+ct(t)):e.value!==""+ct(t)&&(e.value=""+ct(t)):"submit"!==l&&"reset"!==l||e.removeAttribute("value"),null!=t?yt(e,l,ct(t)):null!=n?yt(e,l,ct(n)):null!=a&&e.removeAttribute("value"),null==r&&null!=i&&(e.defaultChecked=!!i),null!=r&&(e.checked=r&&"function"!==typeof r&&"symbol"!==typeof r),null!=o&&"function"!==typeof o&&"symbol"!==typeof o&&"boolean"!==typeof o?e.name=""+ct(o):e.removeAttribute("name")}function gt(e,t,n,a,r,i,l,o){if(null!=i&&"function"!==typeof i&&"symbol"!==typeof i&&"boolean"!==typeof i&&(e.type=i),null!=t||null!=n){if(!("submit"!==i&&"reset"!==i||void 0!==t&&null!==t))return;n=null!=n?""+ct(n):"",t=null!=t?""+ct(t):n,o||t===e.value||(e.value=t),e.defaultValue=t}a="function"!==typeof(a=null!=a?a:r)&&"symbol"!==typeof a&&!!a,e.checked=o?e.checked:!!a,e.defaultChecked=!!a,null!=l&&"function"!==typeof l&&"symbol"!==typeof l&&"boolean"!==typeof l&&(e.name=l)}function yt(e,t,n){"number"===t&&pt(e.ownerDocument)===e||e.defaultValue===""+n||(e.defaultValue=""+n)}function vt(e,t,n,a){if(e=e.options,t){t={};for(var r=0;r<n.length;r++)t["$"+n[r]]=!0;for(n=0;n<e.length;n++)r=t.hasOwnProperty("$"+e[n].value),e[n].selected!==r&&(e[n].selected=r),r&&a&&(e[n].defaultSelected=!0)}else{for(n=""+ct(n),t=null,r=0;r<e.length;r++){if(e[r].value===n)return e[r].selected=!0,void(a&&(e[r].defaultSelected=!0));null!==t||e[r].disabled||(t=e[r])}null!==t&&(t.selected=!0)}}function Et(e,t,n){null==t||((t=""+ct(t))!==e.value&&(e.value=t),null!=n)?e.defaultValue=null!=n?""+ct(n):"":e.defaultValue!==t&&(e.defaultValue=t)}function bt(e,t,n,a){if(null==t){if(null!=a){if(null!=n)throw Error(l(92));if(I(a)){if(1<a.length)throw Error(l(93));a=a[0]}n=a}null==n&&(n=""),t=n}n=ct(t),e.defaultValue=n,(a=e.textContent)===n&&""!==a&&null!==a&&(e.value=a)}function Ct(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&3===n.nodeType)return void(n.nodeValue=t)}e.textContent=t}var At=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function St(e,t,n){var a=0===t.indexOf("--");null==n||"boolean"===typeof n||""===n?a?e.setProperty(t,""):"float"===t?e.cssFloat="":e[t]="":a?e.setProperty(t,n):"number"!==typeof n||0===n||At.has(t)?"float"===t?e.cssFloat=n:e[t]=(""+n).trim():e[t]=n+"px"}function Nt(e,t,n){if(null!=t&&"object"!==typeof t)throw Error(l(62));if(e=e.style,null!=n){for(var a in n)!n.hasOwnProperty(a)||null!=t&&t.hasOwnProperty(a)||(0===a.indexOf("--")?e.setProperty(a,""):"float"===a?e.cssFloat="":e[a]="");for(var r in t)a=t[r],t.hasOwnProperty(r)&&n[r]!==a&&St(e,r,a)}else for(var i in t)t.hasOwnProperty(i)&&St(e,i,t[i])}function Dt(e){if(-1===e.indexOf("-"))return!1;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Rt=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),wt=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function kt(e){return wt.test(""+e)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":e}var Ot=null;function xt(e){return(e=e.target||e.srcElement||window).correspondingUseElement&&(e=e.correspondingUseElement),3===e.nodeType?e.parentNode:e}var Tt=null,It=null;function Pt(e){var t=He(e);if(t&&(e=t.stateNode)){var n=e[Ie]||null;e:switch(e=t.stateNode,t.type){case"input":if(ht(e,n.value,n.defaultValue,n.defaultValue,n.checked,n.defaultChecked,n.type,n.name),t=n.name,"radio"===n.type&&null!=t){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll('input[name="'+_t(""+t)+'"][type="radio"]'),t=0;t<n.length;t++){var a=n[t];if(a!==e&&a.form===e.form){var r=a[Ie]||null;if(!r)throw Error(l(90));ht(a,r.value,r.defaultValue,r.defaultValue,r.checked,r.defaultChecked,r.type,r.name)}}for(t=0;t<n.length;t++)(a=n[t]).form===e.form&&ft(a)}break e;case"textarea":Et(e,n.value,n.defaultValue);break e;case"select":null!=(t=n.value)&&vt(e,!!n.multiple,t,!1)}}}var Mt=!1;function Lt(e,t,n){if(Mt)return e(t,n);Mt=!0;try{return e(t)}finally{if(Mt=!1,(null!==Tt||null!==It)&&(Gc(),Tt&&(t=Tt,e=It,It=Tt=null,Pt(t),e)))for(t=0;t<e.length;t++)Pt(e[t])}}function jt(e,t){var n=e.stateNode;if(null===n)return null;var a=n[Ie]||null;if(null===a)return null;n=a[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(a=!a.disabled)||(a=!("button"===(e=e.type)||"input"===e||"select"===e||"textarea"===e)),e=!a;break e;default:e=!1}if(e)return null;if(n&&"function"!==typeof n)throw Error(l(231,t,typeof n));return n}var Ut=!("undefined"===typeof window||"undefined"===typeof window.document||"undefined"===typeof window.document.createElement),Ft=!1;if(Ut)try{var zt={};Object.defineProperty(zt,"passive",{get:function(){Ft=!0}}),window.addEventListener("test",zt,zt),window.removeEventListener("test",zt,zt)}catch(Pf){Ft=!1}var Gt=null,Ht=null,Yt=null;function Bt(){if(Yt)return Yt;var e,t,n=Ht,a=n.length,r="value"in Gt?Gt.value:Gt.textContent,i=r.length;for(e=0;e<a&&n[e]===r[e];e++);var l=a-e;for(t=1;t<=l&&n[a-t]===r[i-t];t++);return Yt=r.slice(e,1<t?1-t:void 0)}function Wt(e){var t=e.keyCode;return"charCode"in e?0===(e=e.charCode)&&13===t&&(e=13):e=t,10===e&&(e=13),32<=e||13===e?e:0}function qt(){return!0}function Vt(){return!1}function Qt(e){function t(t,n,a,r,i){for(var l in this._reactName=t,this._targetInst=a,this.type=n,this.nativeEvent=r,this.target=i,this.currentTarget=null,e)e.hasOwnProperty(l)&&(t=e[l],this[l]=t?t(r):r[l]);return this.isDefaultPrevented=(null!=r.defaultPrevented?r.defaultPrevented:!1===r.returnValue)?qt:Vt,this.isPropagationStopped=Vt,this}return f(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var e=this.nativeEvent;e&&(e.preventDefault?e.preventDefault():"unknown"!==typeof e.returnValue&&(e.returnValue=!1),this.isDefaultPrevented=qt)},stopPropagation:function(){var e=this.nativeEvent;e&&(e.stopPropagation?e.stopPropagation():"unknown"!==typeof e.cancelBubble&&(e.cancelBubble=!0),this.isPropagationStopped=qt)},persist:function(){},isPersistent:qt}),t}var $t,Kt,Xt,Zt={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Jt=Qt(Zt),en=f({},Zt,{view:0,detail:0}),tn=Qt(en),nn=f({},en,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:mn,button:0,buttons:0,relatedTarget:function(e){return void 0===e.relatedTarget?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==Xt&&(Xt&&"mousemove"===e.type?($t=e.screenX-Xt.screenX,Kt=e.screenY-Xt.screenY):Kt=$t=0,Xt=e),$t)},movementY:function(e){return"movementY"in e?e.movementY:Kt}}),an=Qt(nn),rn=Qt(f({},nn,{dataTransfer:0})),ln=Qt(f({},en,{relatedTarget:0})),on=Qt(f({},Zt,{animationName:0,elapsedTime:0,pseudoElement:0})),sn=Qt(f({},Zt,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}})),cn=Qt(f({},Zt,{data:0})),un={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},dn={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},fn={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function pn(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):!!(e=fn[e])&&!!t[e]}function mn(){return pn}var _n=Qt(f({},en,{key:function(e){if(e.key){var t=un[e.key]||e.key;if("Unidentified"!==t)return t}return"keypress"===e.type?13===(e=Wt(e))?"Enter":String.fromCharCode(e):"keydown"===e.type||"keyup"===e.type?dn[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:mn,charCode:function(e){return"keypress"===e.type?Wt(e):0},keyCode:function(e){return"keydown"===e.type||"keyup"===e.type?e.keyCode:0},which:function(e){return"keypress"===e.type?Wt(e):"keydown"===e.type||"keyup"===e.type?e.keyCode:0}})),hn=Qt(f({},nn,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0})),gn=Qt(f({},en,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:mn})),yn=Qt(f({},Zt,{propertyName:0,elapsedTime:0,pseudoElement:0})),vn=Qt(f({},nn,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0})),En=Qt(f({},Zt,{newState:0,oldState:0})),bn=[9,13,27,32],Cn=Ut&&"CompositionEvent"in window,An=null;Ut&&"documentMode"in document&&(An=document.documentMode);var Sn=Ut&&"TextEvent"in window&&!An,Nn=Ut&&(!Cn||An&&8<An&&11>=An),Dn=String.fromCharCode(32),Rn=!1;function wn(e,t){switch(e){case"keyup":return-1!==bn.indexOf(t.keyCode);case"keydown":return 229!==t.keyCode;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function kn(e){return"object"===typeof(e=e.detail)&&"data"in e?e.data:null}var On=!1;var xn={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Tn(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return"input"===t?!!xn[e.type]:"textarea"===t}function In(e,t,n,a){Tt?It?It.push(a):It=[a]:Tt=a,0<(t=Bu(t,"onChange")).length&&(n=new Jt("onChange","change",null,n,a),e.push({event:n,listeners:t}))}var Pn=null,Mn=null;function Ln(e){Lu(e,0)}function jn(e){if(ft(Ye(e)))return e}function Un(e,t){if("change"===e)return t}var Fn=!1;if(Ut){var zn;if(Ut){var Gn="oninput"in document;if(!Gn){var Hn=document.createElement("div");Hn.setAttribute("oninput","return;"),Gn="function"===typeof Hn.oninput}zn=Gn}else zn=!1;Fn=zn&&(!document.documentMode||9<document.documentMode)}function Yn(){Pn&&(Pn.detachEvent("onpropertychange",Bn),Mn=Pn=null)}function Bn(e){if("value"===e.propertyName&&jn(Mn)){var t=[];In(t,Mn,e,xt(e)),Lt(Ln,t)}}function Wn(e,t,n){"focusin"===e?(Yn(),Mn=n,(Pn=t).attachEvent("onpropertychange",Bn)):"focusout"===e&&Yn()}function qn(e){if("selectionchange"===e||"keyup"===e||"keydown"===e)return jn(Mn)}function Vn(e,t){if("click"===e)return jn(t)}function Qn(e,t){if("input"===e||"change"===e)return jn(t)}var $n="function"===typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e===1/t)||e!==e&&t!==t};function Kn(e,t){if($n(e,t))return!0;if("object"!==typeof e||null===e||"object"!==typeof t||null===t)return!1;var n=Object.keys(e),a=Object.keys(t);if(n.length!==a.length)return!1;for(a=0;a<n.length;a++){var r=n[a];if(!K.call(t,r)||!$n(e[r],t[r]))return!1}return!0}function Xn(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function Zn(e,t){var n,a=Xn(e);for(e=0;a;){if(3===a.nodeType){if(n=e+a.textContent.length,e<=t&&n>=t)return{node:a,offset:t-e};e=n}e:{for(;a;){if(a.nextSibling){a=a.nextSibling;break e}a=a.parentNode}a=void 0}a=Xn(a)}}function Jn(e,t){return!(!e||!t)&&(e===t||(!e||3!==e.nodeType)&&(t&&3===t.nodeType?Jn(e,t.parentNode):"contains"in e?e.contains(t):!!e.compareDocumentPosition&&!!(16&e.compareDocumentPosition(t))))}function ea(e){for(var t=pt((e=null!=e&&null!=e.ownerDocument&&null!=e.ownerDocument.defaultView?e.ownerDocument.defaultView:window).document);t instanceof e.HTMLIFrameElement;){try{var n="string"===typeof t.contentWindow.location.href}catch(a){n=!1}if(!n)break;t=pt((e=t.contentWindow).document)}return t}function ta(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&("input"===t&&("text"===e.type||"search"===e.type||"tel"===e.type||"url"===e.type||"password"===e.type)||"textarea"===t||"true"===e.contentEditable)}var na=Ut&&"documentMode"in document&&11>=document.documentMode,aa=null,ra=null,ia=null,la=!1;function oa(e,t,n){var a=n.window===n?n.document:9===n.nodeType?n:n.ownerDocument;la||null==aa||aa!==pt(a)||("selectionStart"in(a=aa)&&ta(a)?a={start:a.selectionStart,end:a.selectionEnd}:a={anchorNode:(a=(a.ownerDocument&&a.ownerDocument.defaultView||window).getSelection()).anchorNode,anchorOffset:a.anchorOffset,focusNode:a.focusNode,focusOffset:a.focusOffset},ia&&Kn(ia,a)||(ia=a,0<(a=Bu(ra,"onSelect")).length&&(t=new Jt("onSelect","select",null,t,n),e.push({event:t,listeners:a}),t.target=aa)))}function sa(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var ca={animationend:sa("Animation","AnimationEnd"),animationiteration:sa("Animation","AnimationIteration"),animationstart:sa("Animation","AnimationStart"),transitionrun:sa("Transition","TransitionRun"),transitionstart:sa("Transition","TransitionStart"),transitioncancel:sa("Transition","TransitionCancel"),transitionend:sa("Transition","TransitionEnd")},ua={},da={};function fa(e){if(ua[e])return ua[e];if(!ca[e])return e;var t,n=ca[e];for(t in n)if(n.hasOwnProperty(t)&&t in da)return ua[e]=n[t];return e}Ut&&(da=document.createElement("div").style,"AnimationEvent"in window||(delete ca.animationend.animation,delete ca.animationiteration.animation,delete ca.animationstart.animation),"TransitionEvent"in window||delete ca.transitionend.transition);var pa=fa("animationend"),ma=fa("animationiteration"),_a=fa("animationstart"),ha=fa("transitionrun"),ga=fa("transitionstart"),ya=fa("transitioncancel"),va=fa("transitionend"),Ea=new Map,ba="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Ca(e,t){Ea.set(e,t),Qe(t,[e])}ba.push("scrollEnd");var Aa=new WeakMap;function Sa(e,t){if("object"===typeof e&&null!==e){var n=Aa.get(e);return void 0!==n?n:(t={value:e,source:t,stack:st(t)},Aa.set(e,t),t)}return{value:e,source:t,stack:st(t)}}var Na=[],Da=0,Ra=0;function wa(){for(var e=Da,t=Ra=Da=0;t<e;){var n=Na[t];Na[t++]=null;var a=Na[t];Na[t++]=null;var r=Na[t];Na[t++]=null;var i=Na[t];if(Na[t++]=null,null!==a&&null!==r){var l=a.pending;null===l?r.next=r:(r.next=l.next,l.next=r),a.pending=r}0!==i&&Ta(n,r,i)}}function ka(e,t,n,a){Na[Da++]=e,Na[Da++]=t,Na[Da++]=n,Na[Da++]=a,Ra|=a,e.lanes|=a,null!==(e=e.alternate)&&(e.lanes|=a)}function Oa(e,t,n,a){return ka(e,t,n,a),Ia(e)}function xa(e,t){return ka(e,null,null,t),Ia(e)}function Ta(e,t,n){e.lanes|=n;var a=e.alternate;null!==a&&(a.lanes|=n);for(var r=!1,i=e.return;null!==i;)i.childLanes|=n,null!==(a=i.alternate)&&(a.childLanes|=n),22===i.tag&&(null===(e=i.stateNode)||1&e._visibility||(r=!0)),e=i,i=i.return;return 3===e.tag?(i=e.stateNode,r&&null!==t&&(r=31-pe(n),null===(a=(e=i.hiddenUpdates)[r])?e[r]=[t]:a.push(t),t.lane=536870912|n),i):null}function Ia(e){if(50<Tc)throw Tc=0,Ic=null,Error(l(185));for(var t=e.return;null!==t;)t=(e=t).return;return 3===e.tag?e.stateNode:null}var Pa={};function Ma(e,t,n,a){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=a,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function La(e,t,n,a){return new Ma(e,t,n,a)}function ja(e){return!(!(e=e.prototype)||!e.isReactComponent)}function Ua(e,t){var n=e.alternate;return null===n?((n=La(e.tag,t,e.key,e.mode)).elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=65011712&e.flags,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=null===t?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n.refCleanup=e.refCleanup,n}function Fa(e,t){e.flags&=65011714;var n=e.alternate;return null===n?(e.childLanes=0,e.lanes=t,e.child=null,e.subtreeFlags=0,e.memoizedProps=null,e.memoizedState=null,e.updateQueue=null,e.dependencies=null,e.stateNode=null):(e.childLanes=n.childLanes,e.lanes=n.lanes,e.child=n.child,e.subtreeFlags=0,e.deletions=null,e.memoizedProps=n.memoizedProps,e.memoizedState=n.memoizedState,e.updateQueue=n.updateQueue,e.type=n.type,t=n.dependencies,e.dependencies=null===t?null:{lanes:t.lanes,firstContext:t.firstContext}),e}function za(e,t,n,a,r,i){var o=0;if(a=e,"function"===typeof e)ja(e)&&(o=1);else if("string"===typeof e)o=function(e,t,n){if(1===n||null!=t.itemProp)return!1;switch(e){case"meta":case"title":return!0;case"style":if("string"!==typeof t.precedence||"string"!==typeof t.href||""===t.href)break;return!0;case"link":if("string"!==typeof t.rel||"string"!==typeof t.href||""===t.href||t.onLoad||t.onError)break;return"stylesheet"!==t.rel||(e=t.disabled,"string"===typeof t.precedence&&null==e);case"script":if(t.async&&"function"!==typeof t.async&&"symbol"!==typeof t.async&&!t.onLoad&&!t.onError&&t.src&&"string"===typeof t.src)return!0}return!1}(e,n,H.current)?26:"html"===e||"head"===e||"body"===e?27:5;else e:switch(e){case R:return(e=La(31,n,t,r)).elementType=R,e.lanes=i,e;case h:return Ga(n.children,r,i,t);case g:o=8,r|=24;break;case y:return(e=La(12,n,t,2|r)).elementType=y,e.lanes=i,e;case A:return(e=La(13,n,t,r)).elementType=A,e.lanes=i,e;case S:return(e=La(19,n,t,r)).elementType=S,e.lanes=i,e;default:if("object"===typeof e&&null!==e)switch(e.$$typeof){case v:case b:o=10;break e;case E:o=9;break e;case C:o=11;break e;case N:o=14;break e;case D:o=16,a=null;break e}o=29,n=Error(l(130,null===e?"null":typeof e,"")),a=null}return(t=La(o,n,t,r)).elementType=e,t.type=a,t.lanes=i,t}function Ga(e,t,n,a){return(e=La(7,e,a,t)).lanes=n,e}function Ha(e,t,n){return(e=La(6,e,null,t)).lanes=n,e}function Ya(e,t,n){return(t=La(4,null!==e.children?e.children:[],e.key,t)).lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}var Ba=[],Wa=0,qa=null,Va=0,Qa=[],$a=0,Ka=null,Xa=1,Za="";function Ja(e,t){Ba[Wa++]=Va,Ba[Wa++]=qa,qa=e,Va=t}function er(e,t,n){Qa[$a++]=Xa,Qa[$a++]=Za,Qa[$a++]=Ka,Ka=e;var a=Xa;e=Za;var r=32-pe(a)-1;a&=~(1<<r),n+=1;var i=32-pe(t)+r;if(30<i){var l=r-r%5;i=(a&(1<<l)-1).toString(32),a>>=l,r-=l,Xa=1<<32-pe(t)+r|n<<r|a,Za=i+e}else Xa=1<<i|n<<r|a,Za=e}function tr(e){null!==e.return&&(Ja(e,1),er(e,1,0))}function nr(e){for(;e===qa;)qa=Ba[--Wa],Ba[Wa]=null,Va=Ba[--Wa],Ba[Wa]=null;for(;e===Ka;)Ka=Qa[--$a],Qa[$a]=null,Za=Qa[--$a],Qa[$a]=null,Xa=Qa[--$a],Qa[$a]=null}var ar=null,rr=null,ir=!1,lr=null,or=!1,sr=Error(l(519));function cr(e){throw _r(Sa(Error(l(418,"")),e)),sr}function ur(e){var t=e.stateNode,n=e.type,a=e.memoizedProps;switch(t[Te]=e,t[Ie]=a,n){case"dialog":ju("cancel",t),ju("close",t);break;case"iframe":case"object":case"embed":ju("load",t);break;case"video":case"audio":for(n=0;n<Pu.length;n++)ju(Pu[n],t);break;case"source":ju("error",t);break;case"img":case"image":case"link":ju("error",t),ju("load",t);break;case"details":ju("toggle",t);break;case"input":ju("invalid",t),gt(t,a.value,a.defaultValue,a.checked,a.defaultChecked,a.type,a.name,!0),dt(t);break;case"select":ju("invalid",t);break;case"textarea":ju("invalid",t),bt(t,a.value,a.defaultValue,a.children),dt(t)}"string"!==typeof(n=a.children)&&"number"!==typeof n&&"bigint"!==typeof n||t.textContent===""+n||!0===a.suppressHydrationWarning||Ku(t.textContent,n)?(null!=a.popover&&(ju("beforetoggle",t),ju("toggle",t)),null!=a.onScroll&&ju("scroll",t),null!=a.onScrollEnd&&ju("scrollend",t),null!=a.onClick&&(t.onclick=Xu),t=!0):t=!1,t||cr(e)}function dr(e){for(ar=e.return;ar;)switch(ar.tag){case 5:case 13:return void(or=!1);case 27:case 3:return void(or=!0);default:ar=ar.return}}function fr(e){if(e!==ar)return!1;if(!ir)return dr(e),ir=!0,!1;var t,n=e.tag;if((t=3!==n&&27!==n)&&((t=5===n)&&(t=!("form"!==(t=e.type)&&"button"!==t)||ld(e.type,e.memoizedProps)),t=!t),t&&rr&&cr(e),dr(e),13===n){if(!(e=null!==(e=e.memoizedState)?e.dehydrated:null))throw Error(l(317));e:{for(e=e.nextSibling,n=0;e;){if(8===e.nodeType)if("/$"===(t=e.data)){if(0===n){rr=gd(e.nextSibling);break e}n--}else"$"!==t&&"$!"!==t&&"$?"!==t||n++;e=e.nextSibling}rr=null}}else 27===n?(n=rr,pd(e.type)?(e=yd,yd=null,rr=e):rr=n):rr=ar?gd(e.stateNode.nextSibling):null;return!0}function pr(){rr=ar=null,ir=!1}function mr(){var e=lr;return null!==e&&(null===vc?vc=e:vc.push.apply(vc,e),lr=null),e}function _r(e){null===lr?lr=[e]:lr.push(e)}var hr=F(null),gr=null,yr=null;function vr(e,t,n){G(hr,t._currentValue),t._currentValue=n}function Er(e){e._currentValue=hr.current,z(hr)}function br(e,t,n){for(;null!==e;){var a=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,null!==a&&(a.childLanes|=t)):null!==a&&(a.childLanes&t)!==t&&(a.childLanes|=t),e===n)break;e=e.return}}function Cr(e,t,n,a){var r=e.child;for(null!==r&&(r.return=e);null!==r;){var i=r.dependencies;if(null!==i){var o=r.child;i=i.firstContext;e:for(;null!==i;){var s=i;i=r;for(var c=0;c<t.length;c++)if(s.context===t[c]){i.lanes|=n,null!==(s=i.alternate)&&(s.lanes|=n),br(i.return,n,e),a||(o=null);break e}i=s.next}}else if(18===r.tag){if(null===(o=r.return))throw Error(l(341));o.lanes|=n,null!==(i=o.alternate)&&(i.lanes|=n),br(o,n,e),o=null}else o=r.child;if(null!==o)o.return=r;else for(o=r;null!==o;){if(o===e){o=null;break}if(null!==(r=o.sibling)){r.return=o.return,o=r;break}o=o.return}r=o}}function Ar(e,t,n,a){e=null;for(var r=t,i=!1;null!==r;){if(!i)if(0!==(524288&r.flags))i=!0;else if(0!==(262144&r.flags))break;if(10===r.tag){var o=r.alternate;if(null===o)throw Error(l(387));if(null!==(o=o.memoizedProps)){var s=r.type;$n(r.pendingProps.value,o.value)||(null!==e?e.push(s):e=[s])}}else if(r===W.current){if(null===(o=r.alternate))throw Error(l(387));o.memoizedState.memoizedState!==r.memoizedState.memoizedState&&(null!==e?e.push(Qd):e=[Qd])}r=r.return}null!==e&&Cr(t,e,n,a),t.flags|=262144}function Sr(e){for(e=e.firstContext;null!==e;){if(!$n(e.context._currentValue,e.memoizedValue))return!0;e=e.next}return!1}function Nr(e){gr=e,yr=null,null!==(e=e.dependencies)&&(e.firstContext=null)}function Dr(e){return wr(gr,e)}function Rr(e,t){return null===gr&&Nr(e),wr(e,t)}function wr(e,t){var n=t._currentValue;if(t={context:t,memoizedValue:n,next:null},null===yr){if(null===e)throw Error(l(308));yr=t,e.dependencies={lanes:0,firstContext:t},e.flags|=524288}else yr=yr.next=t;return n}var kr="undefined"!==typeof AbortController?AbortController:function(){var e=[],t=this.signal={aborted:!1,addEventListener:function(t,n){e.push(n)}};this.abort=function(){t.aborted=!0,e.forEach(function(e){return e()})}},Or=a.unstable_scheduleCallback,xr=a.unstable_NormalPriority,Tr={$$typeof:b,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function Ir(){return{controller:new kr,data:new Map,refCount:0}}function Pr(e){e.refCount--,0===e.refCount&&Or(xr,function(){e.controller.abort()})}var Mr=null,Lr=0,jr=0,Ur=null;function Fr(){if(0===--Lr&&null!==Mr){null!==Ur&&(Ur.status="fulfilled");var e=Mr;Mr=null,jr=0,Ur=null;for(var t=0;t<e.length;t++)(0,e[t])()}}var zr=P.S;P.S=function(e,t){"object"===typeof t&&null!==t&&"function"===typeof t.then&&function(e,t){if(null===Mr){var n=Mr=[];Lr=0,jr=ku(),Ur={status:"pending",value:void 0,then:function(e){n.push(e)}}}Lr++,t.then(Fr,Fr)}(0,t),null!==zr&&zr(e,t)};var Gr=F(null);function Hr(){var e=Gr.current;return null!==e?e:ac.pooledCache}function Yr(e,t){G(Gr,null===t?Gr.current:t.pool)}function Br(){var e=Hr();return null===e?null:{parent:Tr._currentValue,pool:e}}var Wr=Error(l(460)),qr=Error(l(474)),Vr=Error(l(542)),Qr={then:function(){}};function $r(e){return"fulfilled"===(e=e.status)||"rejected"===e}function Kr(){}function Xr(e,t,n){switch(void 0===(n=e[n])?e.push(t):n!==t&&(t.then(Kr,Kr),t=n),t.status){case"fulfilled":return t.value;case"rejected":throw ei(e=t.reason),e;default:if("string"===typeof t.status)t.then(Kr,Kr);else{if(null!==(e=ac)&&100<e.shellSuspendCounter)throw Error(l(482));(e=t).status="pending",e.then(function(e){if("pending"===t.status){var n=t;n.status="fulfilled",n.value=e}},function(e){if("pending"===t.status){var n=t;n.status="rejected",n.reason=e}})}switch(t.status){case"fulfilled":return t.value;case"rejected":throw ei(e=t.reason),e}throw Zr=t,Wr}}var Zr=null;function Jr(){if(null===Zr)throw Error(l(459));var e=Zr;return Zr=null,e}function ei(e){if(e===Wr||e===Vr)throw Error(l(483))}var ti=!1;function ni(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function ai(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,callbacks:null})}function ri(e){return{lane:e,tag:0,payload:null,callback:null,next:null}}function ii(e,t,n){var a=e.updateQueue;if(null===a)return null;if(a=a.shared,0!==(2&nc)){var r=a.pending;return null===r?t.next=t:(t.next=r.next,r.next=t),a.pending=t,t=Ia(e),Ta(e,null,n),t}return ka(e,a,t,n),Ia(e)}function li(e,t,n){if(null!==(t=t.updateQueue)&&(t=t.shared,0!==(4194048&n))){var a=t.lanes;n|=a&=e.pendingLanes,t.lanes=n,Re(e,n)}}function oi(e,t){var n=e.updateQueue,a=e.alternate;if(null!==a&&n===(a=a.updateQueue)){var r=null,i=null;if(null!==(n=n.firstBaseUpdate)){do{var l={lane:n.lane,tag:n.tag,payload:n.payload,callback:null,next:null};null===i?r=i=l:i=i.next=l,n=n.next}while(null!==n);null===i?r=i=t:i=i.next=t}else r=i=t;return n={baseState:a.baseState,firstBaseUpdate:r,lastBaseUpdate:i,shared:a.shared,callbacks:a.callbacks},void(e.updateQueue=n)}null===(e=n.lastBaseUpdate)?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}var si=!1;function ci(){if(si){if(null!==Ur)throw Ur}}function ui(e,t,n,a){si=!1;var r=e.updateQueue;ti=!1;var i=r.firstBaseUpdate,l=r.lastBaseUpdate,o=r.shared.pending;if(null!==o){r.shared.pending=null;var s=o,c=s.next;s.next=null,null===l?i=c:l.next=c,l=s;var u=e.alternate;null!==u&&((o=(u=u.updateQueue).lastBaseUpdate)!==l&&(null===o?u.firstBaseUpdate=c:o.next=c,u.lastBaseUpdate=s))}if(null!==i){var d=r.baseState;for(l=0,u=c=s=null,o=i;;){var p=-536870913&o.lane,m=p!==o.lane;if(m?(ic&p)===p:(a&p)===p){0!==p&&p===jr&&(si=!0),null!==u&&(u=u.next={lane:0,tag:o.tag,payload:o.payload,callback:null,next:null});e:{var _=e,h=o;p=t;var g=n;switch(h.tag){case 1:if("function"===typeof(_=h.payload)){d=_.call(g,d,p);break e}d=_;break e;case 3:_.flags=-65537&_.flags|128;case 0:if(null===(p="function"===typeof(_=h.payload)?_.call(g,d,p):_)||void 0===p)break e;d=f({},d,p);break e;case 2:ti=!0}}null!==(p=o.callback)&&(e.flags|=64,m&&(e.flags|=8192),null===(m=r.callbacks)?r.callbacks=[p]:m.push(p))}else m={lane:p,tag:o.tag,payload:o.payload,callback:o.callback,next:null},null===u?(c=u=m,s=d):u=u.next=m,l|=p;if(null===(o=o.next)){if(null===(o=r.shared.pending))break;o=(m=o).next,m.next=null,r.lastBaseUpdate=m,r.shared.pending=null}}null===u&&(s=d),r.baseState=s,r.firstBaseUpdate=c,r.lastBaseUpdate=u,null===i&&(r.shared.lanes=0),pc|=l,e.lanes=l,e.memoizedState=d}}function di(e,t){if("function"!==typeof e)throw Error(l(191,e));e.call(t)}function fi(e,t){var n=e.callbacks;if(null!==n)for(e.callbacks=null,e=0;e<n.length;e++)di(n[e],t)}var pi=F(null),mi=F(0);function _i(e,t){G(mi,e=dc),G(pi,t),dc=e|t.baseLanes}function hi(){G(mi,dc),G(pi,pi.current)}function gi(){dc=mi.current,z(pi),z(mi)}var yi=0,vi=null,Ei=null,bi=null,Ci=!1,Ai=!1,Si=!1,Ni=0,Di=0,Ri=null,wi=0;function ki(){throw Error(l(321))}function Oi(e,t){if(null===t)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!$n(e[n],t[n]))return!1;return!0}function xi(e,t,n,a,r,i){return yi=i,vi=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,P.H=null===e||null===e.memoizedState?Wl:ql,Si=!1,i=n(a,r),Si=!1,Ai&&(i=Ii(t,n,a,r)),Ti(e),i}function Ti(e){P.H=Bl;var t=null!==Ei&&null!==Ei.next;if(yi=0,bi=Ei=vi=null,Ci=!1,Di=0,Ri=null,t)throw Error(l(300));null===e||Ro||null!==(e=e.dependencies)&&Sr(e)&&(Ro=!0)}function Ii(e,t,n,a){vi=e;var r=0;do{if(Ai&&(Ri=null),Di=0,Ai=!1,25<=r)throw Error(l(301));if(r+=1,bi=Ei=null,null!=e.updateQueue){var i=e.updateQueue;i.lastEffect=null,i.events=null,i.stores=null,null!=i.memoCache&&(i.memoCache.index=0)}P.H=Vl,i=t(n,a)}while(Ai);return i}function Pi(){var e=P.H,t=e.useState()[0];return t="function"===typeof t.then?zi(t):t,e=e.useState()[0],(null!==Ei?Ei.memoizedState:null)!==e&&(vi.flags|=1024),t}function Mi(){var e=0!==Ni;return Ni=0,e}function Li(e,t,n){t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~n}function ji(e){if(Ci){for(e=e.memoizedState;null!==e;){var t=e.queue;null!==t&&(t.pending=null),e=e.next}Ci=!1}yi=0,bi=Ei=vi=null,Ai=!1,Di=Ni=0,Ri=null}function Ui(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return null===bi?vi.memoizedState=bi=e:bi=bi.next=e,bi}function Fi(){if(null===Ei){var e=vi.alternate;e=null!==e?e.memoizedState:null}else e=Ei.next;var t=null===bi?vi.memoizedState:bi.next;if(null!==t)bi=t,Ei=e;else{if(null===e){if(null===vi.alternate)throw Error(l(467));throw Error(l(310))}e={memoizedState:(Ei=e).memoizedState,baseState:Ei.baseState,baseQueue:Ei.baseQueue,queue:Ei.queue,next:null},null===bi?vi.memoizedState=bi=e:bi=bi.next=e}return bi}function zi(e){var t=Di;return Di+=1,null===Ri&&(Ri=[]),e=Xr(Ri,e,t),t=vi,null===(null===bi?t.memoizedState:bi.next)&&(t=t.alternate,P.H=null===t||null===t.memoizedState?Wl:ql),e}function Gi(e){if(null!==e&&"object"===typeof e){if("function"===typeof e.then)return zi(e);if(e.$$typeof===b)return Dr(e)}throw Error(l(438,String(e)))}function Hi(e){var t=null,n=vi.updateQueue;if(null!==n&&(t=n.memoCache),null==t){var a=vi.alternate;null!==a&&(null!==(a=a.updateQueue)&&(null!=(a=a.memoCache)&&(t={data:a.data.map(function(e){return e.slice()}),index:0})))}if(null==t&&(t={data:[],index:0}),null===n&&(n={lastEffect:null,events:null,stores:null,memoCache:null},vi.updateQueue=n),n.memoCache=t,void 0===(n=t.data[t.index]))for(n=t.data[t.index]=Array(e),a=0;a<e;a++)n[a]=w;return t.index++,n}function Yi(e,t){return"function"===typeof t?t(e):t}function Bi(e){return Wi(Fi(),Ei,e)}function Wi(e,t,n){var a=e.queue;if(null===a)throw Error(l(311));a.lastRenderedReducer=n;var r=e.baseQueue,i=a.pending;if(null!==i){if(null!==r){var o=r.next;r.next=i.next,i.next=o}t.baseQueue=r=i,a.pending=null}if(i=e.baseState,null===r)e.memoizedState=i;else{var s=o=null,c=null,u=t=r.next,d=!1;do{var f=-536870913&u.lane;if(f!==u.lane?(ic&f)===f:(yi&f)===f){var p=u.revertLane;if(0===p)null!==c&&(c=c.next={lane:0,revertLane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),f===jr&&(d=!0);else{if((yi&p)===p){u=u.next,p===jr&&(d=!0);continue}f={lane:0,revertLane:u.revertLane,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null},null===c?(s=c=f,o=i):c=c.next=f,vi.lanes|=p,pc|=p}f=u.action,Si&&n(i,f),i=u.hasEagerState?u.eagerState:n(i,f)}else p={lane:f,revertLane:u.revertLane,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null},null===c?(s=c=p,o=i):c=c.next=p,vi.lanes|=f,pc|=f;u=u.next}while(null!==u&&u!==t);if(null===c?o=i:c.next=s,!$n(i,e.memoizedState)&&(Ro=!0,d&&null!==(n=Ur)))throw n;e.memoizedState=i,e.baseState=o,e.baseQueue=c,a.lastRenderedState=i}return null===r&&(a.lanes=0),[e.memoizedState,a.dispatch]}function qi(e){var t=Fi(),n=t.queue;if(null===n)throw Error(l(311));n.lastRenderedReducer=e;var a=n.dispatch,r=n.pending,i=t.memoizedState;if(null!==r){n.pending=null;var o=r=r.next;do{i=e(i,o.action),o=o.next}while(o!==r);$n(i,t.memoizedState)||(Ro=!0),t.memoizedState=i,null===t.baseQueue&&(t.baseState=i),n.lastRenderedState=i}return[i,a]}function Vi(e,t,n){var a=vi,r=Fi(),i=ir;if(i){if(void 0===n)throw Error(l(407));n=n()}else n=t();var o=!$n((Ei||r).memoizedState,n);if(o&&(r.memoizedState=n,Ro=!0),r=r.queue,hl(2048,8,Ki.bind(null,a,r,e),[e]),r.getSnapshot!==t||o||null!==bi&&1&bi.memoizedState.tag){if(a.flags|=2048,pl(9,{destroy:void 0,resource:void 0},$i.bind(null,a,r,n,t),null),null===ac)throw Error(l(349));i||0!==(124&yi)||Qi(a,t,n)}return n}function Qi(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},null===(t=vi.updateQueue)?(t={lastEffect:null,events:null,stores:null,memoCache:null},vi.updateQueue=t,t.stores=[e]):null===(n=t.stores)?t.stores=[e]:n.push(e)}function $i(e,t,n,a){t.value=n,t.getSnapshot=a,Xi(t)&&Zi(e)}function Ki(e,t,n){return n(function(){Xi(t)&&Zi(e)})}function Xi(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!$n(e,n)}catch(a){return!0}}function Zi(e){var t=xa(e,2);null!==t&&Lc(t,e,2)}function Ji(e){var t=Ui();if("function"===typeof e){var n=e;if(e=n(),Si){fe(!0);try{n()}finally{fe(!1)}}}return t.memoizedState=t.baseState=e,t.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Yi,lastRenderedState:e},t}function el(e,t,n,a){return e.baseState=n,Wi(e,Ei,"function"===typeof a?a:Yi)}function tl(e,t,n,a,r){if(Gl(e))throw Error(l(485));if(null!==(e=t.action)){var i={payload:r,action:e,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(e){i.listeners.push(e)}};null!==P.T?n(!0):i.isTransition=!1,a(i),null===(n=t.pending)?(i.next=t.pending=i,nl(t,i)):(i.next=n.next,t.pending=n.next=i)}}function nl(e,t){var n=t.action,a=t.payload,r=e.state;if(t.isTransition){var i=P.T,l={};P.T=l;try{var o=n(r,a),s=P.S;null!==s&&s(l,o),al(e,t,o)}catch(c){il(e,t,c)}finally{P.T=i}}else try{al(e,t,i=n(r,a))}catch(u){il(e,t,u)}}function al(e,t,n){null!==n&&"object"===typeof n&&"function"===typeof n.then?n.then(function(n){rl(e,t,n)},function(n){return il(e,t,n)}):rl(e,t,n)}function rl(e,t,n){t.status="fulfilled",t.value=n,ll(t),e.state=n,null!==(t=e.pending)&&((n=t.next)===t?e.pending=null:(n=n.next,t.next=n,nl(e,n)))}function il(e,t,n){var a=e.pending;if(e.pending=null,null!==a){a=a.next;do{t.status="rejected",t.reason=n,ll(t),t=t.next}while(t!==a)}e.action=null}function ll(e){e=e.listeners;for(var t=0;t<e.length;t++)(0,e[t])()}function ol(e,t){return t}function sl(e,t){if(ir){var n=ac.formState;if(null!==n){e:{var a=vi;if(ir){if(rr){t:{for(var r=rr,i=or;8!==r.nodeType;){if(!i){r=null;break t}if(null===(r=gd(r.nextSibling))){r=null;break t}}r="F!"===(i=r.data)||"F"===i?r:null}if(r){rr=gd(r.nextSibling),a="F!"===r.data;break e}}cr(a)}a=!1}a&&(t=n[0])}}return(n=Ui()).memoizedState=n.baseState=t,a={pending:null,lanes:0,dispatch:null,lastRenderedReducer:ol,lastRenderedState:t},n.queue=a,n=Ul.bind(null,vi,a),a.dispatch=n,a=Ji(!1),i=zl.bind(null,vi,!1,a.queue),r={state:t,dispatch:null,action:e,pending:null},(a=Ui()).queue=r,n=tl.bind(null,vi,r,i,n),r.dispatch=n,a.memoizedState=e,[t,n,!1]}function cl(e){return ul(Fi(),Ei,e)}function ul(e,t,n){if(t=Wi(e,t,ol)[0],e=Bi(Yi)[0],"object"===typeof t&&null!==t&&"function"===typeof t.then)try{var a=zi(t)}catch(l){if(l===Wr)throw Vr;throw l}else a=t;var r=(t=Fi()).queue,i=r.dispatch;return n!==t.memoizedState&&(vi.flags|=2048,pl(9,{destroy:void 0,resource:void 0},dl.bind(null,r,n),null)),[a,i,e]}function dl(e,t){e.action=t}function fl(e){var t=Fi(),n=Ei;if(null!==n)return ul(t,n,e);Fi(),t=t.memoizedState;var a=(n=Fi()).queue.dispatch;return n.memoizedState=e,[t,a,!1]}function pl(e,t,n,a){return e={tag:e,create:n,deps:a,inst:t,next:null},null===(t=vi.updateQueue)&&(t={lastEffect:null,events:null,stores:null,memoCache:null},vi.updateQueue=t),null===(n=t.lastEffect)?t.lastEffect=e.next=e:(a=n.next,n.next=e,e.next=a,t.lastEffect=e),e}function ml(){return Fi().memoizedState}function _l(e,t,n,a){var r=Ui();a=void 0===a?null:a,vi.flags|=e,r.memoizedState=pl(1|t,{destroy:void 0,resource:void 0},n,a)}function hl(e,t,n,a){var r=Fi();a=void 0===a?null:a;var i=r.memoizedState.inst;null!==Ei&&null!==a&&Oi(a,Ei.memoizedState.deps)?r.memoizedState=pl(t,i,n,a):(vi.flags|=e,r.memoizedState=pl(1|t,i,n,a))}function gl(e,t){_l(8390656,8,e,t)}function yl(e,t){hl(2048,8,e,t)}function vl(e,t){return hl(4,2,e,t)}function El(e,t){return hl(4,4,e,t)}function bl(e,t){if("function"===typeof t){e=e();var n=t(e);return function(){"function"===typeof n?n():t(null)}}if(null!==t&&void 0!==t)return e=e(),t.current=e,function(){t.current=null}}function Cl(e,t,n){n=null!==n&&void 0!==n?n.concat([e]):null,hl(4,4,bl.bind(null,t,e),n)}function Al(){}function Sl(e,t){var n=Fi();t=void 0===t?null:t;var a=n.memoizedState;return null!==t&&Oi(t,a[1])?a[0]:(n.memoizedState=[e,t],e)}function Nl(e,t){var n=Fi();t=void 0===t?null:t;var a=n.memoizedState;if(null!==t&&Oi(t,a[1]))return a[0];if(a=e(),Si){fe(!0);try{e()}finally{fe(!1)}}return n.memoizedState=[a,t],a}function Dl(e,t,n){return void 0===n||0!==(1073741824&yi)?e.memoizedState=t:(e.memoizedState=n,e=Mc(),vi.lanes|=e,pc|=e,n)}function Rl(e,t,n,a){return $n(n,t)?n:null!==pi.current?(e=Dl(e,n,a),$n(e,t)||(Ro=!0),e):0===(42&yi)?(Ro=!0,e.memoizedState=n):(e=Mc(),vi.lanes|=e,pc|=e,t)}function wl(e,t,n,a,r){var i=M.p;M.p=0!==i&&8>i?i:8;var l=P.T,o={};P.T=o,zl(e,!1,t,n);try{var s=r(),c=P.S;if(null!==c&&c(o,s),null!==s&&"object"===typeof s&&"function"===typeof s.then){var u=function(e,t){var n=[],a={status:"pending",value:null,reason:null,then:function(e){n.push(e)}};return e.then(function(){a.status="fulfilled",a.value=t;for(var e=0;e<n.length;e++)(0,n[e])(t)},function(e){for(a.status="rejected",a.reason=e,e=0;e<n.length;e++)(0,n[e])(void 0)}),a}(s,a);Fl(e,t,u,Pc())}else Fl(e,t,a,Pc())}catch(d){Fl(e,t,{then:function(){},status:"rejected",reason:d},Pc())}finally{M.p=i,P.T=l}}function kl(){}function Ol(e,t,n,a){if(5!==e.tag)throw Error(l(476));var r=xl(e).queue;wl(e,r,t,L,null===n?kl:function(){return Tl(e),n(a)})}function xl(e){var t=e.memoizedState;if(null!==t)return t;var n={};return(t={memoizedState:L,baseState:L,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Yi,lastRenderedState:L},next:null}).next={memoizedState:n,baseState:n,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Yi,lastRenderedState:n},next:null},e.memoizedState=t,null!==(e=e.alternate)&&(e.memoizedState=t),t}function Tl(e){Fl(e,xl(e).next.queue,{},Pc())}function Il(){return Dr(Qd)}function Pl(){return Fi().memoizedState}function Ml(){return Fi().memoizedState}function Ll(e){for(var t=e.return;null!==t;){switch(t.tag){case 24:case 3:var n=Pc(),a=ii(t,e=ri(n),n);return null!==a&&(Lc(a,t,n),li(a,t,n)),t={cache:Ir()},void(e.payload=t)}t=t.return}}function jl(e,t,n){var a=Pc();n={lane:a,revertLane:0,action:n,hasEagerState:!1,eagerState:null,next:null},Gl(e)?Hl(t,n):null!==(n=Oa(e,t,n,a))&&(Lc(n,e,a),Yl(n,t,a))}function Ul(e,t,n){Fl(e,t,n,Pc())}function Fl(e,t,n,a){var r={lane:a,revertLane:0,action:n,hasEagerState:!1,eagerState:null,next:null};if(Gl(e))Hl(t,r);else{var i=e.alternate;if(0===e.lanes&&(null===i||0===i.lanes)&&null!==(i=t.lastRenderedReducer))try{var l=t.lastRenderedState,o=i(l,n);if(r.hasEagerState=!0,r.eagerState=o,$n(o,l))return ka(e,t,r,0),null===ac&&wa(),!1}catch(s){}if(null!==(n=Oa(e,t,r,a)))return Lc(n,e,a),Yl(n,t,a),!0}return!1}function zl(e,t,n,a){if(a={lane:2,revertLane:ku(),action:a,hasEagerState:!1,eagerState:null,next:null},Gl(e)){if(t)throw Error(l(479))}else null!==(t=Oa(e,n,a,2))&&Lc(t,e,2)}function Gl(e){var t=e.alternate;return e===vi||null!==t&&t===vi}function Hl(e,t){Ai=Ci=!0;var n=e.pending;null===n?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function Yl(e,t,n){if(0!==(4194048&n)){var a=t.lanes;n|=a&=e.pendingLanes,t.lanes=n,Re(e,n)}}var Bl={readContext:Dr,use:Gi,useCallback:ki,useContext:ki,useEffect:ki,useImperativeHandle:ki,useLayoutEffect:ki,useInsertionEffect:ki,useMemo:ki,useReducer:ki,useRef:ki,useState:ki,useDebugValue:ki,useDeferredValue:ki,useTransition:ki,useSyncExternalStore:ki,useId:ki,useHostTransitionStatus:ki,useFormState:ki,useActionState:ki,useOptimistic:ki,useMemoCache:ki,useCacheRefresh:ki},Wl={readContext:Dr,use:Gi,useCallback:function(e,t){return Ui().memoizedState=[e,void 0===t?null:t],e},useContext:Dr,useEffect:gl,useImperativeHandle:function(e,t,n){n=null!==n&&void 0!==n?n.concat([e]):null,_l(4194308,4,bl.bind(null,t,e),n)},useLayoutEffect:function(e,t){return _l(4194308,4,e,t)},useInsertionEffect:function(e,t){_l(4,2,e,t)},useMemo:function(e,t){var n=Ui();t=void 0===t?null:t;var a=e();if(Si){fe(!0);try{e()}finally{fe(!1)}}return n.memoizedState=[a,t],a},useReducer:function(e,t,n){var a=Ui();if(void 0!==n){var r=n(t);if(Si){fe(!0);try{n(t)}finally{fe(!1)}}}else r=t;return a.memoizedState=a.baseState=r,e={pending:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:r},a.queue=e,e=e.dispatch=jl.bind(null,vi,e),[a.memoizedState,e]},useRef:function(e){return e={current:e},Ui().memoizedState=e},useState:function(e){var t=(e=Ji(e)).queue,n=Ul.bind(null,vi,t);return t.dispatch=n,[e.memoizedState,n]},useDebugValue:Al,useDeferredValue:function(e,t){return Dl(Ui(),e,t)},useTransition:function(){var e=Ji(!1);return e=wl.bind(null,vi,e.queue,!0,!1),Ui().memoizedState=e,[!1,e]},useSyncExternalStore:function(e,t,n){var a=vi,r=Ui();if(ir){if(void 0===n)throw Error(l(407));n=n()}else{if(n=t(),null===ac)throw Error(l(349));0!==(124&ic)||Qi(a,t,n)}r.memoizedState=n;var i={value:n,getSnapshot:t};return r.queue=i,gl(Ki.bind(null,a,i,e),[e]),a.flags|=2048,pl(9,{destroy:void 0,resource:void 0},$i.bind(null,a,i,n,t),null),n},useId:function(){var e=Ui(),t=ac.identifierPrefix;if(ir){var n=Za;t="\xab"+t+"R"+(n=(Xa&~(1<<32-pe(Xa)-1)).toString(32)+n),0<(n=Ni++)&&(t+="H"+n.toString(32)),t+="\xbb"}else t="\xab"+t+"r"+(n=wi++).toString(32)+"\xbb";return e.memoizedState=t},useHostTransitionStatus:Il,useFormState:sl,useActionState:sl,useOptimistic:function(e){var t=Ui();t.memoizedState=t.baseState=e;var n={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return t.queue=n,t=zl.bind(null,vi,!0,n),n.dispatch=t,[e,t]},useMemoCache:Hi,useCacheRefresh:function(){return Ui().memoizedState=Ll.bind(null,vi)}},ql={readContext:Dr,use:Gi,useCallback:Sl,useContext:Dr,useEffect:yl,useImperativeHandle:Cl,useInsertionEffect:vl,useLayoutEffect:El,useMemo:Nl,useReducer:Bi,useRef:ml,useState:function(){return Bi(Yi)},useDebugValue:Al,useDeferredValue:function(e,t){return Rl(Fi(),Ei.memoizedState,e,t)},useTransition:function(){var e=Bi(Yi)[0],t=Fi().memoizedState;return["boolean"===typeof e?e:zi(e),t]},useSyncExternalStore:Vi,useId:Pl,useHostTransitionStatus:Il,useFormState:cl,useActionState:cl,useOptimistic:function(e,t){return el(Fi(),0,e,t)},useMemoCache:Hi,useCacheRefresh:Ml},Vl={readContext:Dr,use:Gi,useCallback:Sl,useContext:Dr,useEffect:yl,useImperativeHandle:Cl,useInsertionEffect:vl,useLayoutEffect:El,useMemo:Nl,useReducer:qi,useRef:ml,useState:function(){return qi(Yi)},useDebugValue:Al,useDeferredValue:function(e,t){var n=Fi();return null===Ei?Dl(n,e,t):Rl(n,Ei.memoizedState,e,t)},useTransition:function(){var e=qi(Yi)[0],t=Fi().memoizedState;return["boolean"===typeof e?e:zi(e),t]},useSyncExternalStore:Vi,useId:Pl,useHostTransitionStatus:Il,useFormState:fl,useActionState:fl,useOptimistic:function(e,t){var n=Fi();return null!==Ei?el(n,0,e,t):(n.baseState=e,[e,n.queue.dispatch])},useMemoCache:Hi,useCacheRefresh:Ml},Ql=null,$l=0;function Kl(e){var t=$l;return $l+=1,null===Ql&&(Ql=[]),Xr(Ql,e,t)}function Xl(e,t){t=t.props.ref,e.ref=void 0!==t?t:null}function Zl(e,t){if(t.$$typeof===p)throw Error(l(525));throw e=Object.prototype.toString.call(t),Error(l(31,"[object Object]"===e?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function Jl(e){return(0,e._init)(e._payload)}function eo(e){function t(t,n){if(e){var a=t.deletions;null===a?(t.deletions=[n],t.flags|=16):a.push(n)}}function n(n,a){if(!e)return null;for(;null!==a;)t(n,a),a=a.sibling;return null}function a(e){for(var t=new Map;null!==e;)null!==e.key?t.set(e.key,e):t.set(e.index,e),e=e.sibling;return t}function r(e,t){return(e=Ua(e,t)).index=0,e.sibling=null,e}function i(t,n,a){return t.index=a,e?null!==(a=t.alternate)?(a=a.index)<n?(t.flags|=67108866,n):a:(t.flags|=67108866,n):(t.flags|=1048576,n)}function o(t){return e&&null===t.alternate&&(t.flags|=67108866),t}function s(e,t,n,a){return null===t||6!==t.tag?((t=Ha(n,e.mode,a)).return=e,t):((t=r(t,n)).return=e,t)}function c(e,t,n,a){var i=n.type;return i===h?d(e,t,n.props.children,a,n.key):null!==t&&(t.elementType===i||"object"===typeof i&&null!==i&&i.$$typeof===D&&Jl(i)===t.type)?(Xl(t=r(t,n.props),n),t.return=e,t):(Xl(t=za(n.type,n.key,n.props,null,e.mode,a),n),t.return=e,t)}function u(e,t,n,a){return null===t||4!==t.tag||t.stateNode.containerInfo!==n.containerInfo||t.stateNode.implementation!==n.implementation?((t=Ya(n,e.mode,a)).return=e,t):((t=r(t,n.children||[])).return=e,t)}function d(e,t,n,a,i){return null===t||7!==t.tag?((t=Ga(n,e.mode,a,i)).return=e,t):((t=r(t,n)).return=e,t)}function f(e,t,n){if("string"===typeof t&&""!==t||"number"===typeof t||"bigint"===typeof t)return(t=Ha(""+t,e.mode,n)).return=e,t;if("object"===typeof t&&null!==t){switch(t.$$typeof){case m:return Xl(n=za(t.type,t.key,t.props,null,e.mode,n),t),n.return=e,n;case _:return(t=Ya(t,e.mode,n)).return=e,t;case D:return f(e,t=(0,t._init)(t._payload),n)}if(I(t)||O(t))return(t=Ga(t,e.mode,n,null)).return=e,t;if("function"===typeof t.then)return f(e,Kl(t),n);if(t.$$typeof===b)return f(e,Rr(e,t),n);Zl(e,t)}return null}function p(e,t,n,a){var r=null!==t?t.key:null;if("string"===typeof n&&""!==n||"number"===typeof n||"bigint"===typeof n)return null!==r?null:s(e,t,""+n,a);if("object"===typeof n&&null!==n){switch(n.$$typeof){case m:return n.key===r?c(e,t,n,a):null;case _:return n.key===r?u(e,t,n,a):null;case D:return p(e,t,n=(r=n._init)(n._payload),a)}if(I(n)||O(n))return null!==r?null:d(e,t,n,a,null);if("function"===typeof n.then)return p(e,t,Kl(n),a);if(n.$$typeof===b)return p(e,t,Rr(e,n),a);Zl(e,n)}return null}function g(e,t,n,a,r){if("string"===typeof a&&""!==a||"number"===typeof a||"bigint"===typeof a)return s(t,e=e.get(n)||null,""+a,r);if("object"===typeof a&&null!==a){switch(a.$$typeof){case m:return c(t,e=e.get(null===a.key?n:a.key)||null,a,r);case _:return u(t,e=e.get(null===a.key?n:a.key)||null,a,r);case D:return g(e,t,n,a=(0,a._init)(a._payload),r)}if(I(a)||O(a))return d(t,e=e.get(n)||null,a,r,null);if("function"===typeof a.then)return g(e,t,n,Kl(a),r);if(a.$$typeof===b)return g(e,t,n,Rr(t,a),r);Zl(t,a)}return null}function y(s,c,u,d){if("object"===typeof u&&null!==u&&u.type===h&&null===u.key&&(u=u.props.children),"object"===typeof u&&null!==u){switch(u.$$typeof){case m:e:{for(var v=u.key;null!==c;){if(c.key===v){if((v=u.type)===h){if(7===c.tag){n(s,c.sibling),(d=r(c,u.props.children)).return=s,s=d;break e}}else if(c.elementType===v||"object"===typeof v&&null!==v&&v.$$typeof===D&&Jl(v)===c.type){n(s,c.sibling),Xl(d=r(c,u.props),u),d.return=s,s=d;break e}n(s,c);break}t(s,c),c=c.sibling}u.type===h?((d=Ga(u.props.children,s.mode,d,u.key)).return=s,s=d):(Xl(d=za(u.type,u.key,u.props,null,s.mode,d),u),d.return=s,s=d)}return o(s);case _:e:{for(v=u.key;null!==c;){if(c.key===v){if(4===c.tag&&c.stateNode.containerInfo===u.containerInfo&&c.stateNode.implementation===u.implementation){n(s,c.sibling),(d=r(c,u.children||[])).return=s,s=d;break e}n(s,c);break}t(s,c),c=c.sibling}(d=Ya(u,s.mode,d)).return=s,s=d}return o(s);case D:return y(s,c,u=(v=u._init)(u._payload),d)}if(I(u))return function(r,l,o,s){for(var c=null,u=null,d=l,m=l=0,_=null;null!==d&&m<o.length;m++){d.index>m?(_=d,d=null):_=d.sibling;var h=p(r,d,o[m],s);if(null===h){null===d&&(d=_);break}e&&d&&null===h.alternate&&t(r,d),l=i(h,l,m),null===u?c=h:u.sibling=h,u=h,d=_}if(m===o.length)return n(r,d),ir&&Ja(r,m),c;if(null===d){for(;m<o.length;m++)null!==(d=f(r,o[m],s))&&(l=i(d,l,m),null===u?c=d:u.sibling=d,u=d);return ir&&Ja(r,m),c}for(d=a(d);m<o.length;m++)null!==(_=g(d,r,m,o[m],s))&&(e&&null!==_.alternate&&d.delete(null===_.key?m:_.key),l=i(_,l,m),null===u?c=_:u.sibling=_,u=_);return e&&d.forEach(function(e){return t(r,e)}),ir&&Ja(r,m),c}(s,c,u,d);if(O(u)){if("function"!==typeof(v=O(u)))throw Error(l(150));return function(r,o,s,c){if(null==s)throw Error(l(151));for(var u=null,d=null,m=o,_=o=0,h=null,y=s.next();null!==m&&!y.done;_++,y=s.next()){m.index>_?(h=m,m=null):h=m.sibling;var v=p(r,m,y.value,c);if(null===v){null===m&&(m=h);break}e&&m&&null===v.alternate&&t(r,m),o=i(v,o,_),null===d?u=v:d.sibling=v,d=v,m=h}if(y.done)return n(r,m),ir&&Ja(r,_),u;if(null===m){for(;!y.done;_++,y=s.next())null!==(y=f(r,y.value,c))&&(o=i(y,o,_),null===d?u=y:d.sibling=y,d=y);return ir&&Ja(r,_),u}for(m=a(m);!y.done;_++,y=s.next())null!==(y=g(m,r,_,y.value,c))&&(e&&null!==y.alternate&&m.delete(null===y.key?_:y.key),o=i(y,o,_),null===d?u=y:d.sibling=y,d=y);return e&&m.forEach(function(e){return t(r,e)}),ir&&Ja(r,_),u}(s,c,u=v.call(u),d)}if("function"===typeof u.then)return y(s,c,Kl(u),d);if(u.$$typeof===b)return y(s,c,Rr(s,u),d);Zl(s,u)}return"string"===typeof u&&""!==u||"number"===typeof u||"bigint"===typeof u?(u=""+u,null!==c&&6===c.tag?(n(s,c.sibling),(d=r(c,u)).return=s,s=d):(n(s,c),(d=Ha(u,s.mode,d)).return=s,s=d),o(s)):n(s,c)}return function(e,t,n,a){try{$l=0;var r=y(e,t,n,a);return Ql=null,r}catch(l){if(l===Wr||l===Vr)throw l;var i=La(29,l,null,e.mode);return i.lanes=a,i.return=e,i}}}var to=eo(!0),no=eo(!1),ao=F(null),ro=null;function io(e){var t=e.alternate;G(co,1&co.current),G(ao,e),null===ro&&(null===t||null!==pi.current||null!==t.memoizedState)&&(ro=e)}function lo(e){if(22===e.tag){if(G(co,co.current),G(ao,e),null===ro){var t=e.alternate;null!==t&&null!==t.memoizedState&&(ro=e)}}else oo()}function oo(){G(co,co.current),G(ao,ao.current)}function so(e){z(ao),ro===e&&(ro=null),z(co)}var co=F(0);function uo(e){for(var t=e;null!==t;){if(13===t.tag){var n=t.memoizedState;if(null!==n&&(null===(n=n.dehydrated)||"$?"===n.data||hd(n)))return t}else if(19===t.tag&&void 0!==t.memoizedProps.revealOrder){if(0!==(128&t.flags))return t}else if(null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}function fo(e,t,n,a){n=null===(n=n(a,t=e.memoizedState))||void 0===n?t:f({},t,n),e.memoizedState=n,0===e.lanes&&(e.updateQueue.baseState=n)}var po={enqueueSetState:function(e,t,n){e=e._reactInternals;var a=Pc(),r=ri(a);r.payload=t,void 0!==n&&null!==n&&(r.callback=n),null!==(t=ii(e,r,a))&&(Lc(t,e,a),li(t,e,a))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var a=Pc(),r=ri(a);r.tag=1,r.payload=t,void 0!==n&&null!==n&&(r.callback=n),null!==(t=ii(e,r,a))&&(Lc(t,e,a),li(t,e,a))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=Pc(),a=ri(n);a.tag=2,void 0!==t&&null!==t&&(a.callback=t),null!==(t=ii(e,a,n))&&(Lc(t,e,n),li(t,e,n))}};function mo(e,t,n,a,r,i,l){return"function"===typeof(e=e.stateNode).shouldComponentUpdate?e.shouldComponentUpdate(a,i,l):!t.prototype||!t.prototype.isPureReactComponent||(!Kn(n,a)||!Kn(r,i))}function _o(e,t,n,a){e=t.state,"function"===typeof t.componentWillReceiveProps&&t.componentWillReceiveProps(n,a),"function"===typeof t.UNSAFE_componentWillReceiveProps&&t.UNSAFE_componentWillReceiveProps(n,a),t.state!==e&&po.enqueueReplaceState(t,t.state,null)}function ho(e,t){var n=t;if("ref"in t)for(var a in n={},t)"ref"!==a&&(n[a]=t[a]);if(e=e.defaultProps)for(var r in n===t&&(n=f({},n)),e)void 0===n[r]&&(n[r]=e[r]);return n}var go="function"===typeof reportError?reportError:function(e){if("object"===typeof window&&"function"===typeof window.ErrorEvent){var t=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:"object"===typeof e&&null!==e&&"string"===typeof e.message?String(e.message):String(e),error:e});if(!window.dispatchEvent(t))return}else if("object"===typeof process&&"function"===typeof process.emit)return void process.emit("uncaughtException",e);console.error(e)};function yo(e){go(e)}function vo(e){console.error(e)}function Eo(e){go(e)}function bo(e,t){try{(0,e.onUncaughtError)(t.value,{componentStack:t.stack})}catch(n){setTimeout(function(){throw n})}}function Co(e,t,n){try{(0,e.onCaughtError)(n.value,{componentStack:n.stack,errorBoundary:1===t.tag?t.stateNode:null})}catch(a){setTimeout(function(){throw a})}}function Ao(e,t,n){return(n=ri(n)).tag=3,n.payload={element:null},n.callback=function(){bo(e,t)},n}function So(e){return(e=ri(e)).tag=3,e}function No(e,t,n,a){var r=n.type.getDerivedStateFromError;if("function"===typeof r){var i=a.value;e.payload=function(){return r(i)},e.callback=function(){Co(t,n,a)}}var l=n.stateNode;null!==l&&"function"===typeof l.componentDidCatch&&(e.callback=function(){Co(t,n,a),"function"!==typeof r&&(null===Sc?Sc=new Set([this]):Sc.add(this));var e=a.stack;this.componentDidCatch(a.value,{componentStack:null!==e?e:""})})}var Do=Error(l(461)),Ro=!1;function wo(e,t,n,a){t.child=null===e?no(t,null,n,a):to(t,e.child,n,a)}function ko(e,t,n,a,r){n=n.render;var i=t.ref;if("ref"in a){var l={};for(var o in a)"ref"!==o&&(l[o]=a[o])}else l=a;return Nr(t),a=xi(e,t,n,l,i,r),o=Mi(),null===e||Ro?(ir&&o&&tr(t),t.flags|=1,wo(e,t,a,r),t.child):(Li(e,t,r),$o(e,t,r))}function Oo(e,t,n,a,r){if(null===e){var i=n.type;return"function"!==typeof i||ja(i)||void 0!==i.defaultProps||null!==n.compare?((e=za(n.type,null,a,t,t.mode,r)).ref=t.ref,e.return=t,t.child=e):(t.tag=15,t.type=i,xo(e,t,i,a,r))}if(i=e.child,!Ko(e,r)){var l=i.memoizedProps;if((n=null!==(n=n.compare)?n:Kn)(l,a)&&e.ref===t.ref)return $o(e,t,r)}return t.flags|=1,(e=Ua(i,a)).ref=t.ref,e.return=t,t.child=e}function xo(e,t,n,a,r){if(null!==e){var i=e.memoizedProps;if(Kn(i,a)&&e.ref===t.ref){if(Ro=!1,t.pendingProps=a=i,!Ko(e,r))return t.lanes=e.lanes,$o(e,t,r);0!==(131072&e.flags)&&(Ro=!0)}}return Mo(e,t,n,a,r)}function To(e,t,n){var a=t.pendingProps,r=a.children,i=null!==e?e.memoizedState:null;if("hidden"===a.mode){if(0!==(128&t.flags)){if(a=null!==i?i.baseLanes|n:n,null!==e){for(r=t.child=e.child,i=0;null!==r;)i=i|r.lanes|r.childLanes,r=r.sibling;t.childLanes=i&~a}else t.childLanes=0,t.child=null;return Io(e,t,a,n)}if(0===(536870912&n))return t.lanes=t.childLanes=536870912,Io(e,t,null!==i?i.baseLanes|n:n,n);t.memoizedState={baseLanes:0,cachePool:null},null!==e&&Yr(0,null!==i?i.cachePool:null),null!==i?_i(t,i):hi(),lo(t)}else null!==i?(Yr(0,i.cachePool),_i(t,i),oo(),t.memoizedState=null):(null!==e&&Yr(0,null),hi(),oo());return wo(e,t,r,n),t.child}function Io(e,t,n,a){var r=Hr();return r=null===r?null:{parent:Tr._currentValue,pool:r},t.memoizedState={baseLanes:n,cachePool:r},null!==e&&Yr(0,null),hi(),lo(t),null!==e&&Ar(e,t,a,!0),null}function Po(e,t){var n=t.ref;if(null===n)null!==e&&null!==e.ref&&(t.flags|=4194816);else{if("function"!==typeof n&&"object"!==typeof n)throw Error(l(284));null!==e&&e.ref===n||(t.flags|=4194816)}}function Mo(e,t,n,a,r){return Nr(t),n=xi(e,t,n,a,void 0,r),a=Mi(),null===e||Ro?(ir&&a&&tr(t),t.flags|=1,wo(e,t,n,r),t.child):(Li(e,t,r),$o(e,t,r))}function Lo(e,t,n,a,r,i){return Nr(t),t.updateQueue=null,n=Ii(t,a,n,r),Ti(e),a=Mi(),null===e||Ro?(ir&&a&&tr(t),t.flags|=1,wo(e,t,n,i),t.child):(Li(e,t,i),$o(e,t,i))}function jo(e,t,n,a,r){if(Nr(t),null===t.stateNode){var i=Pa,l=n.contextType;"object"===typeof l&&null!==l&&(i=Dr(l)),i=new n(a,i),t.memoizedState=null!==i.state&&void 0!==i.state?i.state:null,i.updater=po,t.stateNode=i,i._reactInternals=t,(i=t.stateNode).props=a,i.state=t.memoizedState,i.refs={},ni(t),l=n.contextType,i.context="object"===typeof l&&null!==l?Dr(l):Pa,i.state=t.memoizedState,"function"===typeof(l=n.getDerivedStateFromProps)&&(fo(t,n,l,a),i.state=t.memoizedState),"function"===typeof n.getDerivedStateFromProps||"function"===typeof i.getSnapshotBeforeUpdate||"function"!==typeof i.UNSAFE_componentWillMount&&"function"!==typeof i.componentWillMount||(l=i.state,"function"===typeof i.componentWillMount&&i.componentWillMount(),"function"===typeof i.UNSAFE_componentWillMount&&i.UNSAFE_componentWillMount(),l!==i.state&&po.enqueueReplaceState(i,i.state,null),ui(t,a,i,r),ci(),i.state=t.memoizedState),"function"===typeof i.componentDidMount&&(t.flags|=4194308),a=!0}else if(null===e){i=t.stateNode;var o=t.memoizedProps,s=ho(n,o);i.props=s;var c=i.context,u=n.contextType;l=Pa,"object"===typeof u&&null!==u&&(l=Dr(u));var d=n.getDerivedStateFromProps;u="function"===typeof d||"function"===typeof i.getSnapshotBeforeUpdate,o=t.pendingProps!==o,u||"function"!==typeof i.UNSAFE_componentWillReceiveProps&&"function"!==typeof i.componentWillReceiveProps||(o||c!==l)&&_o(t,i,a,l),ti=!1;var f=t.memoizedState;i.state=f,ui(t,a,i,r),ci(),c=t.memoizedState,o||f!==c||ti?("function"===typeof d&&(fo(t,n,d,a),c=t.memoizedState),(s=ti||mo(t,n,s,a,f,c,l))?(u||"function"!==typeof i.UNSAFE_componentWillMount&&"function"!==typeof i.componentWillMount||("function"===typeof i.componentWillMount&&i.componentWillMount(),"function"===typeof i.UNSAFE_componentWillMount&&i.UNSAFE_componentWillMount()),"function"===typeof i.componentDidMount&&(t.flags|=4194308)):("function"===typeof i.componentDidMount&&(t.flags|=4194308),t.memoizedProps=a,t.memoizedState=c),i.props=a,i.state=c,i.context=l,a=s):("function"===typeof i.componentDidMount&&(t.flags|=4194308),a=!1)}else{i=t.stateNode,ai(e,t),u=ho(n,l=t.memoizedProps),i.props=u,d=t.pendingProps,f=i.context,c=n.contextType,s=Pa,"object"===typeof c&&null!==c&&(s=Dr(c)),(c="function"===typeof(o=n.getDerivedStateFromProps)||"function"===typeof i.getSnapshotBeforeUpdate)||"function"!==typeof i.UNSAFE_componentWillReceiveProps&&"function"!==typeof i.componentWillReceiveProps||(l!==d||f!==s)&&_o(t,i,a,s),ti=!1,f=t.memoizedState,i.state=f,ui(t,a,i,r),ci();var p=t.memoizedState;l!==d||f!==p||ti||null!==e&&null!==e.dependencies&&Sr(e.dependencies)?("function"===typeof o&&(fo(t,n,o,a),p=t.memoizedState),(u=ti||mo(t,n,u,a,f,p,s)||null!==e&&null!==e.dependencies&&Sr(e.dependencies))?(c||"function"!==typeof i.UNSAFE_componentWillUpdate&&"function"!==typeof i.componentWillUpdate||("function"===typeof i.componentWillUpdate&&i.componentWillUpdate(a,p,s),"function"===typeof i.UNSAFE_componentWillUpdate&&i.UNSAFE_componentWillUpdate(a,p,s)),"function"===typeof i.componentDidUpdate&&(t.flags|=4),"function"===typeof i.getSnapshotBeforeUpdate&&(t.flags|=1024)):("function"!==typeof i.componentDidUpdate||l===e.memoizedProps&&f===e.memoizedState||(t.flags|=4),"function"!==typeof i.getSnapshotBeforeUpdate||l===e.memoizedProps&&f===e.memoizedState||(t.flags|=1024),t.memoizedProps=a,t.memoizedState=p),i.props=a,i.state=p,i.context=s,a=u):("function"!==typeof i.componentDidUpdate||l===e.memoizedProps&&f===e.memoizedState||(t.flags|=4),"function"!==typeof i.getSnapshotBeforeUpdate||l===e.memoizedProps&&f===e.memoizedState||(t.flags|=1024),a=!1)}return i=a,Po(e,t),a=0!==(128&t.flags),i||a?(i=t.stateNode,n=a&&"function"!==typeof n.getDerivedStateFromError?null:i.render(),t.flags|=1,null!==e&&a?(t.child=to(t,e.child,null,r),t.child=to(t,null,n,r)):wo(e,t,n,r),t.memoizedState=i.state,e=t.child):e=$o(e,t,r),e}function Uo(e,t,n,a){return pr(),t.flags|=256,wo(e,t,n,a),t.child}var Fo={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function zo(e){return{baseLanes:e,cachePool:Br()}}function Go(e,t,n){return e=null!==e?e.childLanes&~n:0,t&&(e|=hc),e}function Ho(e,t,n){var a,r=t.pendingProps,i=!1,o=0!==(128&t.flags);if((a=o)||(a=(null===e||null!==e.memoizedState)&&0!==(2&co.current)),a&&(i=!0,t.flags&=-129),a=0!==(32&t.flags),t.flags&=-33,null===e){if(ir){if(i?io(t):oo(),ir){var s,c=rr;if(s=c){e:{for(s=c,c=or;8!==s.nodeType;){if(!c){c=null;break e}if(null===(s=gd(s.nextSibling))){c=null;break e}}c=s}null!==c?(t.memoizedState={dehydrated:c,treeContext:null!==Ka?{id:Xa,overflow:Za}:null,retryLane:536870912,hydrationErrors:null},(s=La(18,null,null,0)).stateNode=c,s.return=t,t.child=s,ar=t,rr=null,s=!0):s=!1}s||cr(t)}if(null!==(c=t.memoizedState)&&null!==(c=c.dehydrated))return hd(c)?t.lanes=32:t.lanes=536870912,null;so(t)}return c=r.children,r=r.fallback,i?(oo(),c=Bo({mode:"hidden",children:c},i=t.mode),r=Ga(r,i,n,null),c.return=t,r.return=t,c.sibling=r,t.child=c,(i=t.child).memoizedState=zo(n),i.childLanes=Go(e,a,n),t.memoizedState=Fo,r):(io(t),Yo(t,c))}if(null!==(s=e.memoizedState)&&null!==(c=s.dehydrated)){if(o)256&t.flags?(io(t),t.flags&=-257,t=Wo(e,t,n)):null!==t.memoizedState?(oo(),t.child=e.child,t.flags|=128,t=null):(oo(),i=r.fallback,c=t.mode,r=Bo({mode:"visible",children:r.children},c),(i=Ga(i,c,n,null)).flags|=2,r.return=t,i.return=t,r.sibling=i,t.child=r,to(t,e.child,null,n),(r=t.child).memoizedState=zo(n),r.childLanes=Go(e,a,n),t.memoizedState=Fo,t=i);else if(io(t),hd(c)){if(a=c.nextSibling&&c.nextSibling.dataset)var u=a.dgst;a=u,(r=Error(l(419))).stack="",r.digest=a,_r({value:r,source:null,stack:null}),t=Wo(e,t,n)}else if(Ro||Ar(e,t,n,!1),a=0!==(n&e.childLanes),Ro||a){if(null!==(a=ac)&&(0!==(r=0!==((r=0!==(42&(r=n&-n))?1:we(r))&(a.suspendedLanes|n))?0:r)&&r!==s.retryLane))throw s.retryLane=r,xa(e,r),Lc(a,e,r),Do;"$?"===c.data||Vc(),t=Wo(e,t,n)}else"$?"===c.data?(t.flags|=192,t.child=e.child,t=null):(e=s.treeContext,rr=gd(c.nextSibling),ar=t,ir=!0,lr=null,or=!1,null!==e&&(Qa[$a++]=Xa,Qa[$a++]=Za,Qa[$a++]=Ka,Xa=e.id,Za=e.overflow,Ka=t),(t=Yo(t,r.children)).flags|=4096);return t}return i?(oo(),i=r.fallback,c=t.mode,u=(s=e.child).sibling,(r=Ua(s,{mode:"hidden",children:r.children})).subtreeFlags=65011712&s.subtreeFlags,null!==u?i=Ua(u,i):(i=Ga(i,c,n,null)).flags|=2,i.return=t,r.return=t,r.sibling=i,t.child=r,r=i,i=t.child,null===(c=e.child.memoizedState)?c=zo(n):(null!==(s=c.cachePool)?(u=Tr._currentValue,s=s.parent!==u?{parent:u,pool:u}:s):s=Br(),c={baseLanes:c.baseLanes|n,cachePool:s}),i.memoizedState=c,i.childLanes=Go(e,a,n),t.memoizedState=Fo,r):(io(t),e=(n=e.child).sibling,(n=Ua(n,{mode:"visible",children:r.children})).return=t,n.sibling=null,null!==e&&(null===(a=t.deletions)?(t.deletions=[e],t.flags|=16):a.push(e)),t.child=n,t.memoizedState=null,n)}function Yo(e,t){return(t=Bo({mode:"visible",children:t},e.mode)).return=e,e.child=t}function Bo(e,t){return(e=La(22,e,null,t)).lanes=0,e.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null},e}function Wo(e,t,n){return to(t,e.child,null,n),(e=Yo(t,t.pendingProps.children)).flags|=2,t.memoizedState=null,e}function qo(e,t,n){e.lanes|=t;var a=e.alternate;null!==a&&(a.lanes|=t),br(e.return,t,n)}function Vo(e,t,n,a,r){var i=e.memoizedState;null===i?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:a,tail:n,tailMode:r}:(i.isBackwards=t,i.rendering=null,i.renderingStartTime=0,i.last=a,i.tail=n,i.tailMode=r)}function Qo(e,t,n){var a=t.pendingProps,r=a.revealOrder,i=a.tail;if(wo(e,t,a.children,n),0!==(2&(a=co.current)))a=1&a|2,t.flags|=128;else{if(null!==e&&0!==(128&e.flags))e:for(e=t.child;null!==e;){if(13===e.tag)null!==e.memoizedState&&qo(e,n,t);else if(19===e.tag)qo(e,n,t);else if(null!==e.child){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;null===e.sibling;){if(null===e.return||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}a&=1}switch(G(co,a),r){case"forwards":for(n=t.child,r=null;null!==n;)null!==(e=n.alternate)&&null===uo(e)&&(r=n),n=n.sibling;null===(n=r)?(r=t.child,t.child=null):(r=n.sibling,n.sibling=null),Vo(t,!1,r,n,i);break;case"backwards":for(n=null,r=t.child,t.child=null;null!==r;){if(null!==(e=r.alternate)&&null===uo(e)){t.child=r;break}e=r.sibling,r.sibling=n,n=r,r=e}Vo(t,!0,n,null,i);break;case"together":Vo(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function $o(e,t,n){if(null!==e&&(t.dependencies=e.dependencies),pc|=t.lanes,0===(n&t.childLanes)){if(null===e)return null;if(Ar(e,t,n,!1),0===(n&t.childLanes))return null}if(null!==e&&t.child!==e.child)throw Error(l(153));if(null!==t.child){for(n=Ua(e=t.child,e.pendingProps),t.child=n,n.return=t;null!==e.sibling;)e=e.sibling,(n=n.sibling=Ua(e,e.pendingProps)).return=t;n.sibling=null}return t.child}function Ko(e,t){return 0!==(e.lanes&t)||!(null===(e=e.dependencies)||!Sr(e))}function Xo(e,t,n){if(null!==e)if(e.memoizedProps!==t.pendingProps)Ro=!0;else{if(!Ko(e,n)&&0===(128&t.flags))return Ro=!1,function(e,t,n){switch(t.tag){case 3:q(t,t.stateNode.containerInfo),vr(0,Tr,e.memoizedState.cache),pr();break;case 27:case 5:Q(t);break;case 4:q(t,t.stateNode.containerInfo);break;case 10:vr(0,t.type,t.memoizedProps.value);break;case 13:var a=t.memoizedState;if(null!==a)return null!==a.dehydrated?(io(t),t.flags|=128,null):0!==(n&t.child.childLanes)?Ho(e,t,n):(io(t),null!==(e=$o(e,t,n))?e.sibling:null);io(t);break;case 19:var r=0!==(128&e.flags);if((a=0!==(n&t.childLanes))||(Ar(e,t,n,!1),a=0!==(n&t.childLanes)),r){if(a)return Qo(e,t,n);t.flags|=128}if(null!==(r=t.memoizedState)&&(r.rendering=null,r.tail=null,r.lastEffect=null),G(co,co.current),a)break;return null;case 22:case 23:return t.lanes=0,To(e,t,n);case 24:vr(0,Tr,e.memoizedState.cache)}return $o(e,t,n)}(e,t,n);Ro=0!==(131072&e.flags)}else Ro=!1,ir&&0!==(1048576&t.flags)&&er(t,Va,t.index);switch(t.lanes=0,t.tag){case 16:e:{e=t.pendingProps;var a=t.elementType,r=a._init;if(a=r(a._payload),t.type=a,"function"!==typeof a){if(void 0!==a&&null!==a){if((r=a.$$typeof)===C){t.tag=11,t=ko(null,t,a,e,n);break e}if(r===N){t.tag=14,t=Oo(null,t,a,e,n);break e}}throw t=T(a)||a,Error(l(306,t,""))}ja(a)?(e=ho(a,e),t.tag=1,t=jo(null,t,a,e,n)):(t.tag=0,t=Mo(null,t,a,e,n))}return t;case 0:return Mo(e,t,t.type,t.pendingProps,n);case 1:return jo(e,t,a=t.type,r=ho(a,t.pendingProps),n);case 3:e:{if(q(t,t.stateNode.containerInfo),null===e)throw Error(l(387));a=t.pendingProps;var i=t.memoizedState;r=i.element,ai(e,t),ui(t,a,null,n);var o=t.memoizedState;if(a=o.cache,vr(0,Tr,a),a!==i.cache&&Cr(t,[Tr],n,!0),ci(),a=o.element,i.isDehydrated){if(i={element:a,isDehydrated:!1,cache:o.cache},t.updateQueue.baseState=i,t.memoizedState=i,256&t.flags){t=Uo(e,t,a,n);break e}if(a!==r){_r(r=Sa(Error(l(424)),t)),t=Uo(e,t,a,n);break e}if(9===(e=t.stateNode.containerInfo).nodeType)e=e.body;else e="HTML"===e.nodeName?e.ownerDocument.body:e;for(rr=gd(e.firstChild),ar=t,ir=!0,lr=null,or=!0,n=no(t,null,a,n),t.child=n;n;)n.flags=-3&n.flags|4096,n=n.sibling}else{if(pr(),a===r){t=$o(e,t,n);break e}wo(e,t,a,n)}t=t.child}return t;case 26:return Po(e,t),null===e?(n=wd(t.type,null,t.pendingProps,null))?t.memoizedState=n:ir||(n=t.type,e=t.pendingProps,(a=ad(B.current).createElement(n))[Te]=t,a[Ie]=e,ed(a,n,e),We(a),t.stateNode=a):t.memoizedState=wd(t.type,e.memoizedProps,t.pendingProps,e.memoizedState),null;case 27:return Q(t),null===e&&ir&&(a=t.stateNode=Ed(t.type,t.pendingProps,B.current),ar=t,or=!0,r=rr,pd(t.type)?(yd=r,rr=gd(a.firstChild)):rr=r),wo(e,t,t.pendingProps.children,n),Po(e,t),null===e&&(t.flags|=4194304),t.child;case 5:return null===e&&ir&&((r=a=rr)&&(null!==(a=function(e,t,n,a){for(;1===e.nodeType;){var r=n;if(e.nodeName.toLowerCase()!==t.toLowerCase()){if(!a&&("INPUT"!==e.nodeName||"hidden"!==e.type))break}else if(a){if(!e[Fe])switch(t){case"meta":if(!e.hasAttribute("itemprop"))break;return e;case"link":if("stylesheet"===(i=e.getAttribute("rel"))&&e.hasAttribute("data-precedence"))break;if(i!==r.rel||e.getAttribute("href")!==(null==r.href||""===r.href?null:r.href)||e.getAttribute("crossorigin")!==(null==r.crossOrigin?null:r.crossOrigin)||e.getAttribute("title")!==(null==r.title?null:r.title))break;return e;case"style":if(e.hasAttribute("data-precedence"))break;return e;case"script":if(((i=e.getAttribute("src"))!==(null==r.src?null:r.src)||e.getAttribute("type")!==(null==r.type?null:r.type)||e.getAttribute("crossorigin")!==(null==r.crossOrigin?null:r.crossOrigin))&&i&&e.hasAttribute("async")&&!e.hasAttribute("itemprop"))break;return e;default:return e}}else{if("input"!==t||"hidden"!==e.type)return e;var i=null==r.name?null:""+r.name;if("hidden"===r.type&&e.getAttribute("name")===i)return e}if(null===(e=gd(e.nextSibling)))break}return null}(a,t.type,t.pendingProps,or))?(t.stateNode=a,ar=t,rr=gd(a.firstChild),or=!1,r=!0):r=!1),r||cr(t)),Q(t),r=t.type,i=t.pendingProps,o=null!==e?e.memoizedProps:null,a=i.children,ld(r,i)?a=null:null!==o&&ld(r,o)&&(t.flags|=32),null!==t.memoizedState&&(r=xi(e,t,Pi,null,null,n),Qd._currentValue=r),Po(e,t),wo(e,t,a,n),t.child;case 6:return null===e&&ir&&((e=n=rr)&&(null!==(n=function(e,t,n){if(""===t)return null;for(;3!==e.nodeType;){if((1!==e.nodeType||"INPUT"!==e.nodeName||"hidden"!==e.type)&&!n)return null;if(null===(e=gd(e.nextSibling)))return null}return e}(n,t.pendingProps,or))?(t.stateNode=n,ar=t,rr=null,e=!0):e=!1),e||cr(t)),null;case 13:return Ho(e,t,n);case 4:return q(t,t.stateNode.containerInfo),a=t.pendingProps,null===e?t.child=to(t,null,a,n):wo(e,t,a,n),t.child;case 11:return ko(e,t,t.type,t.pendingProps,n);case 7:return wo(e,t,t.pendingProps,n),t.child;case 8:case 12:return wo(e,t,t.pendingProps.children,n),t.child;case 10:return a=t.pendingProps,vr(0,t.type,a.value),wo(e,t,a.children,n),t.child;case 9:return r=t.type._context,a=t.pendingProps.children,Nr(t),a=a(r=Dr(r)),t.flags|=1,wo(e,t,a,n),t.child;case 14:return Oo(e,t,t.type,t.pendingProps,n);case 15:return xo(e,t,t.type,t.pendingProps,n);case 19:return Qo(e,t,n);case 31:return a=t.pendingProps,n=t.mode,a={mode:a.mode,children:a.children},null===e?((n=Bo(a,n)).ref=t.ref,t.child=n,n.return=t,t=n):((n=Ua(e.child,a)).ref=t.ref,t.child=n,n.return=t,t=n),t;case 22:return To(e,t,n);case 24:return Nr(t),a=Dr(Tr),null===e?(null===(r=Hr())&&(r=ac,i=Ir(),r.pooledCache=i,i.refCount++,null!==i&&(r.pooledCacheLanes|=n),r=i),t.memoizedState={parent:a,cache:r},ni(t),vr(0,Tr,r)):(0!==(e.lanes&n)&&(ai(e,t),ui(t,null,null,n),ci()),r=e.memoizedState,i=t.memoizedState,r.parent!==a?(r={parent:a,cache:a},t.memoizedState=r,0===t.lanes&&(t.memoizedState=t.updateQueue.baseState=r),vr(0,Tr,a)):(a=i.cache,vr(0,Tr,a),a!==r.cache&&Cr(t,[Tr],n,!0))),wo(e,t,t.pendingProps.children,n),t.child;case 29:throw t.pendingProps}throw Error(l(156,t.tag))}function Zo(e){e.flags|=4}function Jo(e,t){if("stylesheet"!==t.type||0!==(4&t.state.loading))e.flags&=-16777217;else if(e.flags|=16777216,!Gd(t)){if(null!==(t=ao.current)&&((4194048&ic)===ic?null!==ro:(62914560&ic)!==ic&&0===(536870912&ic)||t!==ro))throw Zr=Qr,qr;e.flags|=8192}}function es(e,t){null!==t&&(e.flags|=4),16384&e.flags&&(t=22!==e.tag?Ae():536870912,e.lanes|=t,gc|=t)}function ts(e,t){if(!ir)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;null!==t;)null!==t.alternate&&(n=t),t=t.sibling;null===n?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var a=null;null!==n;)null!==n.alternate&&(a=n),n=n.sibling;null===a?t||null===e.tail?e.tail=null:e.tail.sibling=null:a.sibling=null}}function ns(e){var t=null!==e.alternate&&e.alternate.child===e.child,n=0,a=0;if(t)for(var r=e.child;null!==r;)n|=r.lanes|r.childLanes,a|=65011712&r.subtreeFlags,a|=65011712&r.flags,r.return=e,r=r.sibling;else for(r=e.child;null!==r;)n|=r.lanes|r.childLanes,a|=r.subtreeFlags,a|=r.flags,r.return=e,r=r.sibling;return e.subtreeFlags|=a,e.childLanes=n,t}function as(e,t,n){var a=t.pendingProps;switch(nr(t),t.tag){case 31:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:case 1:return ns(t),null;case 3:return n=t.stateNode,a=null,null!==e&&(a=e.memoizedState.cache),t.memoizedState.cache!==a&&(t.flags|=2048),Er(Tr),V(),n.pendingContext&&(n.context=n.pendingContext,n.pendingContext=null),null!==e&&null!==e.child||(fr(t)?Zo(t):null===e||e.memoizedState.isDehydrated&&0===(256&t.flags)||(t.flags|=1024,mr())),ns(t),null;case 26:return n=t.memoizedState,null===e?(Zo(t),null!==n?(ns(t),Jo(t,n)):(ns(t),t.flags&=-16777217)):n?n!==e.memoizedState?(Zo(t),ns(t),Jo(t,n)):(ns(t),t.flags&=-16777217):(e.memoizedProps!==a&&Zo(t),ns(t),t.flags&=-16777217),null;case 27:$(t),n=B.current;var r=t.type;if(null!==e&&null!=t.stateNode)e.memoizedProps!==a&&Zo(t);else{if(!a){if(null===t.stateNode)throw Error(l(166));return ns(t),null}e=H.current,fr(t)?ur(t):(e=Ed(r,a,n),t.stateNode=e,Zo(t))}return ns(t),null;case 5:if($(t),n=t.type,null!==e&&null!=t.stateNode)e.memoizedProps!==a&&Zo(t);else{if(!a){if(null===t.stateNode)throw Error(l(166));return ns(t),null}if(e=H.current,fr(t))ur(t);else{switch(r=ad(B.current),e){case 1:e=r.createElementNS("http://www.w3.org/2000/svg",n);break;case 2:e=r.createElementNS("http://www.w3.org/1998/Math/MathML",n);break;default:switch(n){case"svg":e=r.createElementNS("http://www.w3.org/2000/svg",n);break;case"math":e=r.createElementNS("http://www.w3.org/1998/Math/MathML",n);break;case"script":(e=r.createElement("div")).innerHTML="<script><\/script>",e=e.removeChild(e.firstChild);break;case"select":e="string"===typeof a.is?r.createElement("select",{is:a.is}):r.createElement("select"),a.multiple?e.multiple=!0:a.size&&(e.size=a.size);break;default:e="string"===typeof a.is?r.createElement(n,{is:a.is}):r.createElement(n)}}e[Te]=t,e[Ie]=a;e:for(r=t.child;null!==r;){if(5===r.tag||6===r.tag)e.appendChild(r.stateNode);else if(4!==r.tag&&27!==r.tag&&null!==r.child){r.child.return=r,r=r.child;continue}if(r===t)break e;for(;null===r.sibling;){if(null===r.return||r.return===t)break e;r=r.return}r.sibling.return=r.return,r=r.sibling}t.stateNode=e;e:switch(ed(e,n,a),n){case"button":case"input":case"select":case"textarea":e=!!a.autoFocus;break e;case"img":e=!0;break e;default:e=!1}e&&Zo(t)}}return ns(t),t.flags&=-16777217,null;case 6:if(e&&null!=t.stateNode)e.memoizedProps!==a&&Zo(t);else{if("string"!==typeof a&&null===t.stateNode)throw Error(l(166));if(e=B.current,fr(t)){if(e=t.stateNode,n=t.memoizedProps,a=null,null!==(r=ar))switch(r.tag){case 27:case 5:a=r.memoizedProps}e[Te]=t,(e=!!(e.nodeValue===n||null!==a&&!0===a.suppressHydrationWarning||Ku(e.nodeValue,n)))||cr(t)}else(e=ad(e).createTextNode(a))[Te]=t,t.stateNode=e}return ns(t),null;case 13:if(a=t.memoizedState,null===e||null!==e.memoizedState&&null!==e.memoizedState.dehydrated){if(r=fr(t),null!==a&&null!==a.dehydrated){if(null===e){if(!r)throw Error(l(318));if(!(r=null!==(r=t.memoizedState)?r.dehydrated:null))throw Error(l(317));r[Te]=t}else pr(),0===(128&t.flags)&&(t.memoizedState=null),t.flags|=4;ns(t),r=!1}else r=mr(),null!==e&&null!==e.memoizedState&&(e.memoizedState.hydrationErrors=r),r=!0;if(!r)return 256&t.flags?(so(t),t):(so(t),null)}if(so(t),0!==(128&t.flags))return t.lanes=n,t;if(n=null!==a,e=null!==e&&null!==e.memoizedState,n){r=null,null!==(a=t.child).alternate&&null!==a.alternate.memoizedState&&null!==a.alternate.memoizedState.cachePool&&(r=a.alternate.memoizedState.cachePool.pool);var i=null;null!==a.memoizedState&&null!==a.memoizedState.cachePool&&(i=a.memoizedState.cachePool.pool),i!==r&&(a.flags|=2048)}return n!==e&&n&&(t.child.flags|=8192),es(t,t.updateQueue),ns(t),null;case 4:return V(),null===e&&zu(t.stateNode.containerInfo),ns(t),null;case 10:return Er(t.type),ns(t),null;case 19:if(z(co),null===(r=t.memoizedState))return ns(t),null;if(a=0!==(128&t.flags),null===(i=r.rendering))if(a)ts(r,!1);else{if(0!==fc||null!==e&&0!==(128&e.flags))for(e=t.child;null!==e;){if(null!==(i=uo(e))){for(t.flags|=128,ts(r,!1),e=i.updateQueue,t.updateQueue=e,es(t,e),t.subtreeFlags=0,e=n,n=t.child;null!==n;)Fa(n,e),n=n.sibling;return G(co,1&co.current|2),t.child}e=e.sibling}null!==r.tail&&te()>Cc&&(t.flags|=128,a=!0,ts(r,!1),t.lanes=4194304)}else{if(!a)if(null!==(e=uo(i))){if(t.flags|=128,a=!0,e=e.updateQueue,t.updateQueue=e,es(t,e),ts(r,!0),null===r.tail&&"hidden"===r.tailMode&&!i.alternate&&!ir)return ns(t),null}else 2*te()-r.renderingStartTime>Cc&&536870912!==n&&(t.flags|=128,a=!0,ts(r,!1),t.lanes=4194304);r.isBackwards?(i.sibling=t.child,t.child=i):(null!==(e=r.last)?e.sibling=i:t.child=i,r.last=i)}return null!==r.tail?(t=r.tail,r.rendering=t,r.tail=t.sibling,r.renderingStartTime=te(),t.sibling=null,e=co.current,G(co,a?1&e|2:1&e),t):(ns(t),null);case 22:case 23:return so(t),gi(),a=null!==t.memoizedState,null!==e?null!==e.memoizedState!==a&&(t.flags|=8192):a&&(t.flags|=8192),a?0!==(536870912&n)&&0===(128&t.flags)&&(ns(t),6&t.subtreeFlags&&(t.flags|=8192)):ns(t),null!==(n=t.updateQueue)&&es(t,n.retryQueue),n=null,null!==e&&null!==e.memoizedState&&null!==e.memoizedState.cachePool&&(n=e.memoizedState.cachePool.pool),a=null,null!==t.memoizedState&&null!==t.memoizedState.cachePool&&(a=t.memoizedState.cachePool.pool),a!==n&&(t.flags|=2048),null!==e&&z(Gr),null;case 24:return n=null,null!==e&&(n=e.memoizedState.cache),t.memoizedState.cache!==n&&(t.flags|=2048),Er(Tr),ns(t),null;case 25:case 30:return null}throw Error(l(156,t.tag))}function rs(e,t){switch(nr(t),t.tag){case 1:return 65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 3:return Er(Tr),V(),0!==(65536&(e=t.flags))&&0===(128&e)?(t.flags=-65537&e|128,t):null;case 26:case 27:case 5:return $(t),null;case 13:if(so(t),null!==(e=t.memoizedState)&&null!==e.dehydrated){if(null===t.alternate)throw Error(l(340));pr()}return 65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 19:return z(co),null;case 4:return V(),null;case 10:return Er(t.type),null;case 22:case 23:return so(t),gi(),null!==e&&z(Gr),65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 24:return Er(Tr),null;default:return null}}function is(e,t){switch(nr(t),t.tag){case 3:Er(Tr),V();break;case 26:case 27:case 5:$(t);break;case 4:V();break;case 13:so(t);break;case 19:z(co);break;case 10:Er(t.type);break;case 22:case 23:so(t),gi(),null!==e&&z(Gr);break;case 24:Er(Tr)}}function ls(e,t){try{var n=t.updateQueue,a=null!==n?n.lastEffect:null;if(null!==a){var r=a.next;n=r;do{if((n.tag&e)===e){a=void 0;var i=n.create,l=n.inst;a=i(),l.destroy=a}n=n.next}while(n!==r)}}catch(o){uu(t,t.return,o)}}function os(e,t,n){try{var a=t.updateQueue,r=null!==a?a.lastEffect:null;if(null!==r){var i=r.next;a=i;do{if((a.tag&e)===e){var l=a.inst,o=l.destroy;if(void 0!==o){l.destroy=void 0,r=t;var s=n,c=o;try{c()}catch(u){uu(r,s,u)}}}a=a.next}while(a!==i)}}catch(u){uu(t,t.return,u)}}function ss(e){var t=e.updateQueue;if(null!==t){var n=e.stateNode;try{fi(t,n)}catch(a){uu(e,e.return,a)}}}function cs(e,t,n){n.props=ho(e.type,e.memoizedProps),n.state=e.memoizedState;try{n.componentWillUnmount()}catch(a){uu(e,t,a)}}function us(e,t){try{var n=e.ref;if(null!==n){switch(e.tag){case 26:case 27:case 5:var a=e.stateNode;break;default:a=e.stateNode}"function"===typeof n?e.refCleanup=n(a):n.current=a}}catch(r){uu(e,t,r)}}function ds(e,t){var n=e.ref,a=e.refCleanup;if(null!==n)if("function"===typeof a)try{a()}catch(r){uu(e,t,r)}finally{e.refCleanup=null,null!=(e=e.alternate)&&(e.refCleanup=null)}else if("function"===typeof n)try{n(null)}catch(i){uu(e,t,i)}else n.current=null}function fs(e){var t=e.type,n=e.memoizedProps,a=e.stateNode;try{e:switch(t){case"button":case"input":case"select":case"textarea":n.autoFocus&&a.focus();break e;case"img":n.src?a.src=n.src:n.srcSet&&(a.srcset=n.srcSet)}}catch(r){uu(e,e.return,r)}}function ps(e,t,n){try{var a=e.stateNode;!function(e,t,n,a){switch(t){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var r=null,i=null,o=null,s=null,c=null,u=null,d=null;for(m in n){var f=n[m];if(n.hasOwnProperty(m)&&null!=f)switch(m){case"checked":case"value":break;case"defaultValue":c=f;default:a.hasOwnProperty(m)||Zu(e,t,m,null,a,f)}}for(var p in a){var m=a[p];if(f=n[p],a.hasOwnProperty(p)&&(null!=m||null!=f))switch(p){case"type":i=m;break;case"name":r=m;break;case"checked":u=m;break;case"defaultChecked":d=m;break;case"value":o=m;break;case"defaultValue":s=m;break;case"children":case"dangerouslySetInnerHTML":if(null!=m)throw Error(l(137,t));break;default:m!==f&&Zu(e,t,p,m,a,f)}}return void ht(e,o,s,c,u,d,i,r);case"select":for(i in m=o=s=p=null,n)if(c=n[i],n.hasOwnProperty(i)&&null!=c)switch(i){case"value":break;case"multiple":m=c;default:a.hasOwnProperty(i)||Zu(e,t,i,null,a,c)}for(r in a)if(i=a[r],c=n[r],a.hasOwnProperty(r)&&(null!=i||null!=c))switch(r){case"value":p=i;break;case"defaultValue":s=i;break;case"multiple":o=i;default:i!==c&&Zu(e,t,r,i,a,c)}return t=s,n=o,a=m,void(null!=p?vt(e,!!n,p,!1):!!a!==!!n&&(null!=t?vt(e,!!n,t,!0):vt(e,!!n,n?[]:"",!1)));case"textarea":for(s in m=p=null,n)if(r=n[s],n.hasOwnProperty(s)&&null!=r&&!a.hasOwnProperty(s))switch(s){case"value":case"children":break;default:Zu(e,t,s,null,a,r)}for(o in a)if(r=a[o],i=n[o],a.hasOwnProperty(o)&&(null!=r||null!=i))switch(o){case"value":p=r;break;case"defaultValue":m=r;break;case"children":break;case"dangerouslySetInnerHTML":if(null!=r)throw Error(l(91));break;default:r!==i&&Zu(e,t,o,r,a,i)}return void Et(e,p,m);case"option":for(var _ in n)if(p=n[_],n.hasOwnProperty(_)&&null!=p&&!a.hasOwnProperty(_))if("selected"===_)e.selected=!1;else Zu(e,t,_,null,a,p);for(c in a)if(p=a[c],m=n[c],a.hasOwnProperty(c)&&p!==m&&(null!=p||null!=m))if("selected"===c)e.selected=p&&"function"!==typeof p&&"symbol"!==typeof p;else Zu(e,t,c,p,a,m);return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var h in n)p=n[h],n.hasOwnProperty(h)&&null!=p&&!a.hasOwnProperty(h)&&Zu(e,t,h,null,a,p);for(u in a)if(p=a[u],m=n[u],a.hasOwnProperty(u)&&p!==m&&(null!=p||null!=m))switch(u){case"children":case"dangerouslySetInnerHTML":if(null!=p)throw Error(l(137,t));break;default:Zu(e,t,u,p,a,m)}return;default:if(Dt(t)){for(var g in n)p=n[g],n.hasOwnProperty(g)&&void 0!==p&&!a.hasOwnProperty(g)&&Ju(e,t,g,void 0,a,p);for(d in a)p=a[d],m=n[d],!a.hasOwnProperty(d)||p===m||void 0===p&&void 0===m||Ju(e,t,d,p,a,m);return}}for(var y in n)p=n[y],n.hasOwnProperty(y)&&null!=p&&!a.hasOwnProperty(y)&&Zu(e,t,y,null,a,p);for(f in a)p=a[f],m=n[f],!a.hasOwnProperty(f)||p===m||null==p&&null==m||Zu(e,t,f,p,a,m)}(a,e.type,n,t),a[Ie]=t}catch(r){uu(e,e.return,r)}}function ms(e){return 5===e.tag||3===e.tag||26===e.tag||27===e.tag&&pd(e.type)||4===e.tag}function _s(e){e:for(;;){for(;null===e.sibling;){if(null===e.return||ms(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;5!==e.tag&&6!==e.tag&&18!==e.tag;){if(27===e.tag&&pd(e.type))continue e;if(2&e.flags)continue e;if(null===e.child||4===e.tag)continue e;e.child.return=e,e=e.child}if(!(2&e.flags))return e.stateNode}}function hs(e,t,n){var a=e.tag;if(5===a||6===a)e=e.stateNode,t?(9===n.nodeType?n.body:"HTML"===n.nodeName?n.ownerDocument.body:n).insertBefore(e,t):((t=9===n.nodeType?n.body:"HTML"===n.nodeName?n.ownerDocument.body:n).appendChild(e),null!==(n=n._reactRootContainer)&&void 0!==n||null!==t.onclick||(t.onclick=Xu));else if(4!==a&&(27===a&&pd(e.type)&&(n=e.stateNode,t=null),null!==(e=e.child)))for(hs(e,t,n),e=e.sibling;null!==e;)hs(e,t,n),e=e.sibling}function gs(e,t,n){var a=e.tag;if(5===a||6===a)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(4!==a&&(27===a&&pd(e.type)&&(n=e.stateNode),null!==(e=e.child)))for(gs(e,t,n),e=e.sibling;null!==e;)gs(e,t,n),e=e.sibling}function ys(e){var t=e.stateNode,n=e.memoizedProps;try{for(var a=e.type,r=t.attributes;r.length;)t.removeAttributeNode(r[0]);ed(t,a,n),t[Te]=e,t[Ie]=n}catch(i){uu(e,e.return,i)}}var vs=!1,Es=!1,bs=!1,Cs="function"===typeof WeakSet?WeakSet:Set,As=null;function Ss(e,t,n){var a=n.flags;switch(n.tag){case 0:case 11:case 15:js(e,n),4&a&&ls(5,n);break;case 1:if(js(e,n),4&a)if(e=n.stateNode,null===t)try{e.componentDidMount()}catch(l){uu(n,n.return,l)}else{var r=ho(n.type,t.memoizedProps);t=t.memoizedState;try{e.componentDidUpdate(r,t,e.__reactInternalSnapshotBeforeUpdate)}catch(o){uu(n,n.return,o)}}64&a&&ss(n),512&a&&us(n,n.return);break;case 3:if(js(e,n),64&a&&null!==(e=n.updateQueue)){if(t=null,null!==n.child)switch(n.child.tag){case 27:case 5:case 1:t=n.child.stateNode}try{fi(e,t)}catch(l){uu(n,n.return,l)}}break;case 27:null===t&&4&a&&ys(n);case 26:case 5:js(e,n),null===t&&4&a&&fs(n),512&a&&us(n,n.return);break;case 12:js(e,n);break;case 13:js(e,n),4&a&&Os(e,n),64&a&&(null!==(e=n.memoizedState)&&(null!==(e=e.dehydrated)&&function(e,t){var n=e.ownerDocument;if("$?"!==e.data||"complete"===n.readyState)t();else{var a=function(){t(),n.removeEventListener("DOMContentLoaded",a)};n.addEventListener("DOMContentLoaded",a),e._reactRetry=a}}(e,n=mu.bind(null,n))));break;case 22:if(!(a=null!==n.memoizedState||vs)){t=null!==t&&null!==t.memoizedState||Es,r=vs;var i=Es;vs=a,(Es=t)&&!i?Fs(e,n,0!==(8772&n.subtreeFlags)):js(e,n),vs=r,Es=i}break;case 30:break;default:js(e,n)}}function Ns(e){var t=e.alternate;null!==t&&(e.alternate=null,Ns(t)),e.child=null,e.deletions=null,e.sibling=null,5===e.tag&&(null!==(t=e.stateNode)&&ze(t)),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}var Ds=null,Rs=!1;function ws(e,t,n){for(n=n.child;null!==n;)ks(e,t,n),n=n.sibling}function ks(e,t,n){if(de&&"function"===typeof de.onCommitFiberUnmount)try{de.onCommitFiberUnmount(ue,n)}catch(i){}switch(n.tag){case 26:Es||ds(n,t),ws(e,t,n),n.memoizedState?n.memoizedState.count--:n.stateNode&&(n=n.stateNode).parentNode.removeChild(n);break;case 27:Es||ds(n,t);var a=Ds,r=Rs;pd(n.type)&&(Ds=n.stateNode,Rs=!1),ws(e,t,n),bd(n.stateNode),Ds=a,Rs=r;break;case 5:Es||ds(n,t);case 6:if(a=Ds,r=Rs,Ds=null,ws(e,t,n),Rs=r,null!==(Ds=a))if(Rs)try{(9===Ds.nodeType?Ds.body:"HTML"===Ds.nodeName?Ds.ownerDocument.body:Ds).removeChild(n.stateNode)}catch(l){uu(n,t,l)}else try{Ds.removeChild(n.stateNode)}catch(l){uu(n,t,l)}break;case 18:null!==Ds&&(Rs?(md(9===(e=Ds).nodeType?e.body:"HTML"===e.nodeName?e.ownerDocument.body:e,n.stateNode),wf(e)):md(Ds,n.stateNode));break;case 4:a=Ds,r=Rs,Ds=n.stateNode.containerInfo,Rs=!0,ws(e,t,n),Ds=a,Rs=r;break;case 0:case 11:case 14:case 15:Es||os(2,n,t),Es||os(4,n,t),ws(e,t,n);break;case 1:Es||(ds(n,t),"function"===typeof(a=n.stateNode).componentWillUnmount&&cs(n,t,a)),ws(e,t,n);break;case 21:ws(e,t,n);break;case 22:Es=(a=Es)||null!==n.memoizedState,ws(e,t,n),Es=a;break;default:ws(e,t,n)}}function Os(e,t){if(null===t.memoizedState&&(null!==(e=t.alternate)&&(null!==(e=e.memoizedState)&&null!==(e=e.dehydrated))))try{wf(e)}catch(n){uu(t,t.return,n)}}function xs(e,t){var n=function(e){switch(e.tag){case 13:case 19:var t=e.stateNode;return null===t&&(t=e.stateNode=new Cs),t;case 22:return null===(t=(e=e.stateNode)._retryCache)&&(t=e._retryCache=new Cs),t;default:throw Error(l(435,e.tag))}}(e);t.forEach(function(t){var a=_u.bind(null,e,t);n.has(t)||(n.add(t),t.then(a,a))})}function Ts(e,t){var n=t.deletions;if(null!==n)for(var a=0;a<n.length;a++){var r=n[a],i=e,o=t,s=o;e:for(;null!==s;){switch(s.tag){case 27:if(pd(s.type)){Ds=s.stateNode,Rs=!1;break e}break;case 5:Ds=s.stateNode,Rs=!1;break e;case 3:case 4:Ds=s.stateNode.containerInfo,Rs=!0;break e}s=s.return}if(null===Ds)throw Error(l(160));ks(i,o,r),Ds=null,Rs=!1,null!==(i=r.alternate)&&(i.return=null),r.return=null}if(13878&t.subtreeFlags)for(t=t.child;null!==t;)Ps(t,e),t=t.sibling}var Is=null;function Ps(e,t){var n=e.alternate,a=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:Ts(t,e),Ms(e),4&a&&(os(3,e,e.return),ls(3,e),os(5,e,e.return));break;case 1:Ts(t,e),Ms(e),512&a&&(Es||null===n||ds(n,n.return)),64&a&&vs&&(null!==(e=e.updateQueue)&&(null!==(a=e.callbacks)&&(n=e.shared.hiddenCallbacks,e.shared.hiddenCallbacks=null===n?a:n.concat(a))));break;case 26:var r=Is;if(Ts(t,e),Ms(e),512&a&&(Es||null===n||ds(n,n.return)),4&a){var i=null!==n?n.memoizedState:null;if(a=e.memoizedState,null===n)if(null===a)if(null===e.stateNode){e:{a=e.type,n=e.memoizedProps,r=r.ownerDocument||r;t:switch(a){case"title":(!(i=r.getElementsByTagName("title")[0])||i[Fe]||i[Te]||"http://www.w3.org/2000/svg"===i.namespaceURI||i.hasAttribute("itemprop"))&&(i=r.createElement(a),r.head.insertBefore(i,r.querySelector("head > title"))),ed(i,a,n),i[Te]=e,We(i),a=i;break e;case"link":var o=Fd("link","href",r).get(a+(n.href||""));if(o)for(var s=0;s<o.length;s++)if((i=o[s]).getAttribute("href")===(null==n.href||""===n.href?null:n.href)&&i.getAttribute("rel")===(null==n.rel?null:n.rel)&&i.getAttribute("title")===(null==n.title?null:n.title)&&i.getAttribute("crossorigin")===(null==n.crossOrigin?null:n.crossOrigin)){o.splice(s,1);break t}ed(i=r.createElement(a),a,n),r.head.appendChild(i);break;case"meta":if(o=Fd("meta","content",r).get(a+(n.content||"")))for(s=0;s<o.length;s++)if((i=o[s]).getAttribute("content")===(null==n.content?null:""+n.content)&&i.getAttribute("name")===(null==n.name?null:n.name)&&i.getAttribute("property")===(null==n.property?null:n.property)&&i.getAttribute("http-equiv")===(null==n.httpEquiv?null:n.httpEquiv)&&i.getAttribute("charset")===(null==n.charSet?null:n.charSet)){o.splice(s,1);break t}ed(i=r.createElement(a),a,n),r.head.appendChild(i);break;default:throw Error(l(468,a))}i[Te]=e,We(i),a=i}e.stateNode=a}else zd(r,e.type,e.stateNode);else e.stateNode=Pd(r,a,e.memoizedProps);else i!==a?(null===i?null!==n.stateNode&&(n=n.stateNode).parentNode.removeChild(n):i.count--,null===a?zd(r,e.type,e.stateNode):Pd(r,a,e.memoizedProps)):null===a&&null!==e.stateNode&&ps(e,e.memoizedProps,n.memoizedProps)}break;case 27:Ts(t,e),Ms(e),512&a&&(Es||null===n||ds(n,n.return)),null!==n&&4&a&&ps(e,e.memoizedProps,n.memoizedProps);break;case 5:if(Ts(t,e),Ms(e),512&a&&(Es||null===n||ds(n,n.return)),32&e.flags){r=e.stateNode;try{Ct(r,"")}catch(m){uu(e,e.return,m)}}4&a&&null!=e.stateNode&&ps(e,r=e.memoizedProps,null!==n?n.memoizedProps:r),1024&a&&(bs=!0);break;case 6:if(Ts(t,e),Ms(e),4&a){if(null===e.stateNode)throw Error(l(162));a=e.memoizedProps,n=e.stateNode;try{n.nodeValue=a}catch(m){uu(e,e.return,m)}}break;case 3:if(Ud=null,r=Is,Is=Sd(t.containerInfo),Ts(t,e),Is=r,Ms(e),4&a&&null!==n&&n.memoizedState.isDehydrated)try{wf(t.containerInfo)}catch(m){uu(e,e.return,m)}bs&&(bs=!1,Ls(e));break;case 4:a=Is,Is=Sd(e.stateNode.containerInfo),Ts(t,e),Ms(e),Is=a;break;case 12:default:Ts(t,e),Ms(e);break;case 13:Ts(t,e),Ms(e),8192&e.child.flags&&null!==e.memoizedState!==(null!==n&&null!==n.memoizedState)&&(bc=te()),4&a&&(null!==(a=e.updateQueue)&&(e.updateQueue=null,xs(e,a)));break;case 22:r=null!==e.memoizedState;var c=null!==n&&null!==n.memoizedState,u=vs,d=Es;if(vs=u||r,Es=d||c,Ts(t,e),Es=d,vs=u,Ms(e),8192&a)e:for(t=e.stateNode,t._visibility=r?-2&t._visibility:1|t._visibility,r&&(null===n||c||vs||Es||Us(e)),n=null,t=e;;){if(5===t.tag||26===t.tag){if(null===n){c=n=t;try{if(i=c.stateNode,r)"function"===typeof(o=i.style).setProperty?o.setProperty("display","none","important"):o.display="none";else{s=c.stateNode;var f=c.memoizedProps.style,p=void 0!==f&&null!==f&&f.hasOwnProperty("display")?f.display:null;s.style.display=null==p||"boolean"===typeof p?"":(""+p).trim()}}catch(m){uu(c,c.return,m)}}}else if(6===t.tag){if(null===n){c=t;try{c.stateNode.nodeValue=r?"":c.memoizedProps}catch(m){uu(c,c.return,m)}}}else if((22!==t.tag&&23!==t.tag||null===t.memoizedState||t===e)&&null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;null===t.sibling;){if(null===t.return||t.return===e)break e;n===t&&(n=null),t=t.return}n===t&&(n=null),t.sibling.return=t.return,t=t.sibling}4&a&&(null!==(a=e.updateQueue)&&(null!==(n=a.retryQueue)&&(a.retryQueue=null,xs(e,n))));break;case 19:Ts(t,e),Ms(e),4&a&&(null!==(a=e.updateQueue)&&(e.updateQueue=null,xs(e,a)));case 30:case 21:}}function Ms(e){var t=e.flags;if(2&t){try{for(var n,a=e.return;null!==a;){if(ms(a)){n=a;break}a=a.return}if(null==n)throw Error(l(160));switch(n.tag){case 27:var r=n.stateNode;gs(e,_s(e),r);break;case 5:var i=n.stateNode;32&n.flags&&(Ct(i,""),n.flags&=-33),gs(e,_s(e),i);break;case 3:case 4:var o=n.stateNode.containerInfo;hs(e,_s(e),o);break;default:throw Error(l(161))}}catch(s){uu(e,e.return,s)}e.flags&=-3}4096&t&&(e.flags&=-4097)}function Ls(e){if(1024&e.subtreeFlags)for(e=e.child;null!==e;){var t=e;Ls(t),5===t.tag&&1024&t.flags&&t.stateNode.reset(),e=e.sibling}}function js(e,t){if(8772&t.subtreeFlags)for(t=t.child;null!==t;)Ss(e,t.alternate,t),t=t.sibling}function Us(e){for(e=e.child;null!==e;){var t=e;switch(t.tag){case 0:case 11:case 14:case 15:os(4,t,t.return),Us(t);break;case 1:ds(t,t.return);var n=t.stateNode;"function"===typeof n.componentWillUnmount&&cs(t,t.return,n),Us(t);break;case 27:bd(t.stateNode);case 26:case 5:ds(t,t.return),Us(t);break;case 22:null===t.memoizedState&&Us(t);break;default:Us(t)}e=e.sibling}}function Fs(e,t,n){for(n=n&&0!==(8772&t.subtreeFlags),t=t.child;null!==t;){var a=t.alternate,r=e,i=t,l=i.flags;switch(i.tag){case 0:case 11:case 15:Fs(r,i,n),ls(4,i);break;case 1:if(Fs(r,i,n),"function"===typeof(r=(a=i).stateNode).componentDidMount)try{r.componentDidMount()}catch(c){uu(a,a.return,c)}if(null!==(r=(a=i).updateQueue)){var o=a.stateNode;try{var s=r.shared.hiddenCallbacks;if(null!==s)for(r.shared.hiddenCallbacks=null,r=0;r<s.length;r++)di(s[r],o)}catch(c){uu(a,a.return,c)}}n&&64&l&&ss(i),us(i,i.return);break;case 27:ys(i);case 26:case 5:Fs(r,i,n),n&&null===a&&4&l&&fs(i),us(i,i.return);break;case 12:Fs(r,i,n);break;case 13:Fs(r,i,n),n&&4&l&&Os(r,i);break;case 22:null===i.memoizedState&&Fs(r,i,n),us(i,i.return);break;case 30:break;default:Fs(r,i,n)}t=t.sibling}}function zs(e,t){var n=null;null!==e&&null!==e.memoizedState&&null!==e.memoizedState.cachePool&&(n=e.memoizedState.cachePool.pool),e=null,null!==t.memoizedState&&null!==t.memoizedState.cachePool&&(e=t.memoizedState.cachePool.pool),e!==n&&(null!=e&&e.refCount++,null!=n&&Pr(n))}function Gs(e,t){e=null,null!==t.alternate&&(e=t.alternate.memoizedState.cache),(t=t.memoizedState.cache)!==e&&(t.refCount++,null!=e&&Pr(e))}function Hs(e,t,n,a){if(10256&t.subtreeFlags)for(t=t.child;null!==t;)Ys(e,t,n,a),t=t.sibling}function Ys(e,t,n,a){var r=t.flags;switch(t.tag){case 0:case 11:case 15:Hs(e,t,n,a),2048&r&&ls(9,t);break;case 1:case 13:default:Hs(e,t,n,a);break;case 3:Hs(e,t,n,a),2048&r&&(e=null,null!==t.alternate&&(e=t.alternate.memoizedState.cache),(t=t.memoizedState.cache)!==e&&(t.refCount++,null!=e&&Pr(e)));break;case 12:if(2048&r){Hs(e,t,n,a),e=t.stateNode;try{var i=t.memoizedProps,l=i.id,o=i.onPostCommit;"function"===typeof o&&o(l,null===t.alternate?"mount":"update",e.passiveEffectDuration,-0)}catch(s){uu(t,t.return,s)}}else Hs(e,t,n,a);break;case 23:break;case 22:i=t.stateNode,l=t.alternate,null!==t.memoizedState?2&i._visibility?Hs(e,t,n,a):Ws(e,t):2&i._visibility?Hs(e,t,n,a):(i._visibility|=2,Bs(e,t,n,a,0!==(10256&t.subtreeFlags))),2048&r&&zs(l,t);break;case 24:Hs(e,t,n,a),2048&r&&Gs(t.alternate,t)}}function Bs(e,t,n,a,r){for(r=r&&0!==(10256&t.subtreeFlags),t=t.child;null!==t;){var i=e,l=t,o=n,s=a,c=l.flags;switch(l.tag){case 0:case 11:case 15:Bs(i,l,o,s,r),ls(8,l);break;case 23:break;case 22:var u=l.stateNode;null!==l.memoizedState?2&u._visibility?Bs(i,l,o,s,r):Ws(i,l):(u._visibility|=2,Bs(i,l,o,s,r)),r&&2048&c&&zs(l.alternate,l);break;case 24:Bs(i,l,o,s,r),r&&2048&c&&Gs(l.alternate,l);break;default:Bs(i,l,o,s,r)}t=t.sibling}}function Ws(e,t){if(10256&t.subtreeFlags)for(t=t.child;null!==t;){var n=e,a=t,r=a.flags;switch(a.tag){case 22:Ws(n,a),2048&r&&zs(a.alternate,a);break;case 24:Ws(n,a),2048&r&&Gs(a.alternate,a);break;default:Ws(n,a)}t=t.sibling}}var qs=8192;function Vs(e){if(e.subtreeFlags&qs)for(e=e.child;null!==e;)Qs(e),e=e.sibling}function Qs(e){switch(e.tag){case 26:Vs(e),e.flags&qs&&null!==e.memoizedState&&function(e,t,n){if(null===Hd)throw Error(l(475));var a=Hd;if("stylesheet"===t.type&&("string"!==typeof n.media||!1!==matchMedia(n.media).matches)&&0===(4&t.state.loading)){if(null===t.instance){var r=kd(n.href),i=e.querySelector(Od(r));if(i)return null!==(e=i._p)&&"object"===typeof e&&"function"===typeof e.then&&(a.count++,a=Bd.bind(a),e.then(a,a)),t.state.loading|=4,t.instance=i,void We(i);i=e.ownerDocument||e,n=xd(n),(r=Cd.get(r))&&Ld(n,r),We(i=i.createElement("link"));var o=i;o._p=new Promise(function(e,t){o.onload=e,o.onerror=t}),ed(i,"link",n),t.instance=i}null===a.stylesheets&&(a.stylesheets=new Map),a.stylesheets.set(t,e),(e=t.state.preload)&&0===(3&t.state.loading)&&(a.count++,t=Bd.bind(a),e.addEventListener("load",t),e.addEventListener("error",t))}}(Is,e.memoizedState,e.memoizedProps);break;case 5:default:Vs(e);break;case 3:case 4:var t=Is;Is=Sd(e.stateNode.containerInfo),Vs(e),Is=t;break;case 22:null===e.memoizedState&&(null!==(t=e.alternate)&&null!==t.memoizedState?(t=qs,qs=16777216,Vs(e),qs=t):Vs(e))}}function $s(e){var t=e.alternate;if(null!==t&&null!==(e=t.child)){t.child=null;do{t=e.sibling,e.sibling=null,e=t}while(null!==e)}}function Ks(e){var t=e.deletions;if(0!==(16&e.flags)){if(null!==t)for(var n=0;n<t.length;n++){var a=t[n];As=a,Js(a,e)}$s(e)}if(10256&e.subtreeFlags)for(e=e.child;null!==e;)Xs(e),e=e.sibling}function Xs(e){switch(e.tag){case 0:case 11:case 15:Ks(e),2048&e.flags&&os(9,e,e.return);break;case 3:case 12:default:Ks(e);break;case 22:var t=e.stateNode;null!==e.memoizedState&&2&t._visibility&&(null===e.return||13!==e.return.tag)?(t._visibility&=-3,Zs(e)):Ks(e)}}function Zs(e){var t=e.deletions;if(0!==(16&e.flags)){if(null!==t)for(var n=0;n<t.length;n++){var a=t[n];As=a,Js(a,e)}$s(e)}for(e=e.child;null!==e;){switch((t=e).tag){case 0:case 11:case 15:os(8,t,t.return),Zs(t);break;case 22:2&(n=t.stateNode)._visibility&&(n._visibility&=-3,Zs(t));break;default:Zs(t)}e=e.sibling}}function Js(e,t){for(;null!==As;){var n=As;switch(n.tag){case 0:case 11:case 15:os(8,n,t);break;case 23:case 22:if(null!==n.memoizedState&&null!==n.memoizedState.cachePool){var a=n.memoizedState.cachePool.pool;null!=a&&a.refCount++}break;case 24:Pr(n.memoizedState.cache)}if(null!==(a=n.child))a.return=n,As=a;else e:for(n=e;null!==As;){var r=(a=As).sibling,i=a.return;if(Ns(a),a===n){As=null;break e}if(null!==r){r.return=i,As=r;break e}As=i}}}var ec={getCacheForType:function(e){var t=Dr(Tr),n=t.data.get(e);return void 0===n&&(n=e(),t.data.set(e,n)),n}},tc="function"===typeof WeakMap?WeakMap:Map,nc=0,ac=null,rc=null,ic=0,lc=0,oc=null,sc=!1,cc=!1,uc=!1,dc=0,fc=0,pc=0,mc=0,_c=0,hc=0,gc=0,yc=null,vc=null,Ec=!1,bc=0,Cc=1/0,Ac=null,Sc=null,Nc=0,Dc=null,Rc=null,wc=0,kc=0,Oc=null,xc=null,Tc=0,Ic=null;function Pc(){if(0!==(2&nc)&&0!==ic)return ic&-ic;if(null!==P.T){return 0!==jr?jr:ku()}return Oe()}function Mc(){0===hc&&(hc=0===(536870912&ic)||ir?Ce():536870912);var e=ao.current;return null!==e&&(e.flags|=32),hc}function Lc(e,t,n){(e!==ac||2!==lc&&9!==lc)&&null===e.cancelPendingCommit||(Yc(e,0),zc(e,ic,hc,!1)),Ne(e,n),0!==(2&nc)&&e===ac||(e===ac&&(0===(2&nc)&&(mc|=n),4===fc&&zc(e,ic,hc,!1)),Cu(e))}function jc(e,t,n){if(0!==(6&nc))throw Error(l(327));for(var a=!n&&0===(124&t)&&0===(t&e.expiredLanes)||Ee(e,t),r=a?function(e,t){var n=nc;nc|=2;var a=Wc(),r=qc();ac!==e||ic!==t?(Ac=null,Cc=te()+500,Yc(e,t)):cc=Ee(e,t);e:for(;;)try{if(0!==lc&&null!==rc){t=rc;var i=oc;t:switch(lc){case 1:lc=0,oc=null,Jc(e,t,i,1);break;case 2:case 9:if($r(i)){lc=0,oc=null,Zc(t);break}t=function(){2!==lc&&9!==lc||ac!==e||(lc=7),Cu(e)},i.then(t,t);break e;case 3:lc=7;break e;case 4:lc=5;break e;case 7:$r(i)?(lc=0,oc=null,Zc(t)):(lc=0,oc=null,Jc(e,t,i,7));break;case 5:var o=null;switch(rc.tag){case 26:o=rc.memoizedState;case 5:case 27:var s=rc;if(!o||Gd(o)){lc=0,oc=null;var c=s.sibling;if(null!==c)rc=c;else{var u=s.return;null!==u?(rc=u,eu(u)):rc=null}break t}}lc=0,oc=null,Jc(e,t,i,5);break;case 6:lc=0,oc=null,Jc(e,t,i,6);break;case 8:Hc(),fc=6;break e;default:throw Error(l(462))}}Kc();break}catch(d){Bc(e,d)}return yr=gr=null,P.H=a,P.A=r,nc=n,null!==rc?0:(ac=null,ic=0,wa(),fc)}(e,t):Qc(e,t,!0),i=a;;){if(0===r){cc&&!a&&zc(e,t,0,!1);break}if(n=e.current.alternate,!i||Fc(n)){if(2===r){if(i=t,e.errorRecoveryDisabledLanes&i)var o=0;else o=0!==(o=-536870913&e.pendingLanes)?o:536870912&o?536870912:0;if(0!==o){t=o;e:{var s=e;r=yc;var c=s.current.memoizedState.isDehydrated;if(c&&(Yc(s,o).flags|=256),2!==(o=Qc(s,o,!1))){if(uc&&!c){s.errorRecoveryDisabledLanes|=i,mc|=i,r=4;break e}i=vc,vc=r,null!==i&&(null===vc?vc=i:vc.push.apply(vc,i))}r=o}if(i=!1,2!==r)continue}}if(1===r){Yc(e,0),zc(e,t,0,!0);break}e:{switch(a=e,i=r){case 0:case 1:throw Error(l(345));case 4:if((4194048&t)!==t)break;case 6:zc(a,t,hc,!sc);break e;case 2:vc=null;break;case 3:case 5:break;default:throw Error(l(329))}if((62914560&t)===t&&10<(r=bc+300-te())){if(zc(a,t,hc,!sc),0!==ve(a,0,!0))break e;a.timeoutHandle=sd(Uc.bind(null,a,n,vc,Ac,Ec,t,hc,mc,gc,sc,i,2,-0,0),r)}else Uc(a,n,vc,Ac,Ec,t,hc,mc,gc,sc,i,0,-0,0)}break}r=Qc(e,t,!1),i=!1}Cu(e)}function Uc(e,t,n,a,r,i,o,s,c,u,d,f,p,m){if(e.timeoutHandle=-1,(8192&(f=t.subtreeFlags)||16785408===(16785408&f))&&(Hd={stylesheets:null,count:0,unsuspend:Yd},Qs(t),null!==(f=function(){if(null===Hd)throw Error(l(475));var e=Hd;return e.stylesheets&&0===e.count&&qd(e,e.stylesheets),0<e.count?function(t){var n=setTimeout(function(){if(e.stylesheets&&qd(e,e.stylesheets),e.unsuspend){var t=e.unsuspend;e.unsuspend=null,t()}},6e4);return e.unsuspend=t,function(){e.unsuspend=null,clearTimeout(n)}}:null}())))return e.cancelPendingCommit=f(nu.bind(null,e,t,i,n,a,r,o,s,c,d,1,p,m)),void zc(e,i,o,!u);nu(e,t,i,n,a,r,o,s,c)}function Fc(e){for(var t=e;;){var n=t.tag;if((0===n||11===n||15===n)&&16384&t.flags&&(null!==(n=t.updateQueue)&&null!==(n=n.stores)))for(var a=0;a<n.length;a++){var r=n[a],i=r.getSnapshot;r=r.value;try{if(!$n(i(),r))return!1}catch(l){return!1}}if(n=t.child,16384&t.subtreeFlags&&null!==n)n.return=t,t=n;else{if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function zc(e,t,n,a){t&=~_c,t&=~mc,e.suspendedLanes|=t,e.pingedLanes&=~t,a&&(e.warmLanes|=t),a=e.expirationTimes;for(var r=t;0<r;){var i=31-pe(r),l=1<<i;a[i]=-1,r&=~l}0!==n&&De(e,n,t)}function Gc(){return 0!==(6&nc)||(Au(0,!1),!1)}function Hc(){if(null!==rc){if(0===lc)var e=rc.return;else yr=gr=null,ji(e=rc),Ql=null,$l=0,e=rc;for(;null!==e;)is(e.alternate,e),e=e.return;rc=null}}function Yc(e,t){var n=e.timeoutHandle;-1!==n&&(e.timeoutHandle=-1,cd(n)),null!==(n=e.cancelPendingCommit)&&(e.cancelPendingCommit=null,n()),Hc(),ac=e,rc=n=Ua(e.current,null),ic=t,lc=0,oc=null,sc=!1,cc=Ee(e,t),uc=!1,gc=hc=_c=mc=pc=fc=0,vc=yc=null,Ec=!1,0!==(8&t)&&(t|=32&t);var a=e.entangledLanes;if(0!==a)for(e=e.entanglements,a&=t;0<a;){var r=31-pe(a),i=1<<r;t|=e[r],a&=~i}return dc=t,wa(),n}function Bc(e,t){vi=null,P.H=Bl,t===Wr||t===Vr?(t=Jr(),lc=3):t===qr?(t=Jr(),lc=4):lc=t===Do?8:null!==t&&"object"===typeof t&&"function"===typeof t.then?6:1,oc=t,null===rc&&(fc=1,bo(e,Sa(t,e.current)))}function Wc(){var e=P.H;return P.H=Bl,null===e?Bl:e}function qc(){var e=P.A;return P.A=ec,e}function Vc(){fc=4,sc||(4194048&ic)!==ic&&null!==ao.current||(cc=!0),0===(134217727&pc)&&0===(134217727&mc)||null===ac||zc(ac,ic,hc,!1)}function Qc(e,t,n){var a=nc;nc|=2;var r=Wc(),i=qc();ac===e&&ic===t||(Ac=null,Yc(e,t)),t=!1;var l=fc;e:for(;;)try{if(0!==lc&&null!==rc){var o=rc,s=oc;switch(lc){case 8:Hc(),l=6;break e;case 3:case 2:case 9:case 6:null===ao.current&&(t=!0);var c=lc;if(lc=0,oc=null,Jc(e,o,s,c),n&&cc){l=0;break e}break;default:c=lc,lc=0,oc=null,Jc(e,o,s,c)}}$c(),l=fc;break}catch(u){Bc(e,u)}return t&&e.shellSuspendCounter++,yr=gr=null,nc=a,P.H=r,P.A=i,null===rc&&(ac=null,ic=0,wa()),l}function $c(){for(;null!==rc;)Xc(rc)}function Kc(){for(;null!==rc&&!J();)Xc(rc)}function Xc(e){var t=Xo(e.alternate,e,dc);e.memoizedProps=e.pendingProps,null===t?eu(e):rc=t}function Zc(e){var t=e,n=t.alternate;switch(t.tag){case 15:case 0:t=Lo(n,t,t.pendingProps,t.type,void 0,ic);break;case 11:t=Lo(n,t,t.pendingProps,t.type.render,t.ref,ic);break;case 5:ji(t);default:is(n,t),t=Xo(n,t=rc=Fa(t,dc),dc)}e.memoizedProps=e.pendingProps,null===t?eu(e):rc=t}function Jc(e,t,n,a){yr=gr=null,ji(t),Ql=null,$l=0;var r=t.return;try{if(function(e,t,n,a,r){if(n.flags|=32768,null!==a&&"object"===typeof a&&"function"===typeof a.then){if(null!==(t=n.alternate)&&Ar(t,n,r,!0),null!==(n=ao.current)){switch(n.tag){case 13:return null===ro?Vc():null===n.alternate&&0===fc&&(fc=3),n.flags&=-257,n.flags|=65536,n.lanes=r,a===Qr?n.flags|=16384:(null===(t=n.updateQueue)?n.updateQueue=new Set([a]):t.add(a),du(e,a,r)),!1;case 22:return n.flags|=65536,a===Qr?n.flags|=16384:(null===(t=n.updateQueue)?(t={transitions:null,markerInstances:null,retryQueue:new Set([a])},n.updateQueue=t):null===(n=t.retryQueue)?t.retryQueue=new Set([a]):n.add(a),du(e,a,r)),!1}throw Error(l(435,n.tag))}return du(e,a,r),Vc(),!1}if(ir)return null!==(t=ao.current)?(0===(65536&t.flags)&&(t.flags|=256),t.flags|=65536,t.lanes=r,a!==sr&&_r(Sa(e=Error(l(422),{cause:a}),n))):(a!==sr&&_r(Sa(t=Error(l(423),{cause:a}),n)),(e=e.current.alternate).flags|=65536,r&=-r,e.lanes|=r,a=Sa(a,n),oi(e,r=Ao(e.stateNode,a,r)),4!==fc&&(fc=2)),!1;var i=Error(l(520),{cause:a});if(i=Sa(i,n),null===yc?yc=[i]:yc.push(i),4!==fc&&(fc=2),null===t)return!0;a=Sa(a,n),n=t;do{switch(n.tag){case 3:return n.flags|=65536,e=r&-r,n.lanes|=e,oi(n,e=Ao(n.stateNode,a,e)),!1;case 1:if(t=n.type,i=n.stateNode,0===(128&n.flags)&&("function"===typeof t.getDerivedStateFromError||null!==i&&"function"===typeof i.componentDidCatch&&(null===Sc||!Sc.has(i))))return n.flags|=65536,r&=-r,n.lanes|=r,No(r=So(r),e,n,a),oi(n,r),!1}n=n.return}while(null!==n);return!1}(e,r,t,n,ic))return fc=1,bo(e,Sa(n,e.current)),void(rc=null)}catch(i){if(null!==r)throw rc=r,i;return fc=1,bo(e,Sa(n,e.current)),void(rc=null)}32768&t.flags?(ir||1===a?e=!0:cc||0!==(536870912&ic)?e=!1:(sc=e=!0,(2===a||9===a||3===a||6===a)&&(null!==(a=ao.current)&&13===a.tag&&(a.flags|=16384))),tu(t,e)):eu(t)}function eu(e){var t=e;do{if(0!==(32768&t.flags))return void tu(t,sc);e=t.return;var n=as(t.alternate,t,dc);if(null!==n)return void(rc=n);if(null!==(t=t.sibling))return void(rc=t);rc=t=e}while(null!==t);0===fc&&(fc=5)}function tu(e,t){do{var n=rs(e.alternate,e);if(null!==n)return n.flags&=32767,void(rc=n);if(null!==(n=e.return)&&(n.flags|=32768,n.subtreeFlags=0,n.deletions=null),!t&&null!==(e=e.sibling))return void(rc=e);rc=e=n}while(null!==e);fc=6,rc=null}function nu(e,t,n,a,r,i,o,s,c){e.cancelPendingCommit=null;do{ou()}while(0!==Nc);if(0!==(6&nc))throw Error(l(327));if(null!==t){if(t===e.current)throw Error(l(177));if(i=t.lanes|t.childLanes,function(e,t,n,a,r,i){var l=e.pendingLanes;e.pendingLanes=n,e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0,e.expiredLanes&=n,e.entangledLanes&=n,e.errorRecoveryDisabledLanes&=n,e.shellSuspendCounter=0;var o=e.entanglements,s=e.expirationTimes,c=e.hiddenUpdates;for(n=l&~n;0<n;){var u=31-pe(n),d=1<<u;o[u]=0,s[u]=-1;var f=c[u];if(null!==f)for(c[u]=null,u=0;u<f.length;u++){var p=f[u];null!==p&&(p.lane&=-536870913)}n&=~d}0!==a&&De(e,a,0),0!==i&&0===r&&0!==e.tag&&(e.suspendedLanes|=i&~(l&~t))}(e,n,i|=Ra,o,s,c),e===ac&&(rc=ac=null,ic=0),Rc=t,Dc=e,wc=n,kc=i,Oc=r,xc=a,0!==(10256&t.subtreeFlags)||0!==(10256&t.flags)?(e.callbackNode=null,e.callbackPriority=0,X(ie,function(){return su(),null})):(e.callbackNode=null,e.callbackPriority=0),a=0!==(13878&t.flags),0!==(13878&t.subtreeFlags)||a){a=P.T,P.T=null,r=M.p,M.p=2,o=nc,nc|=4;try{!function(e,t){if(e=e.containerInfo,td=nf,ta(e=ea(e))){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{var a=(n=(n=e.ownerDocument)&&n.defaultView||window).getSelection&&n.getSelection();if(a&&0!==a.rangeCount){n=a.anchorNode;var r=a.anchorOffset,i=a.focusNode;a=a.focusOffset;try{n.nodeType,i.nodeType}catch(h){n=null;break e}var o=0,s=-1,c=-1,u=0,d=0,f=e,p=null;t:for(;;){for(var m;f!==n||0!==r&&3!==f.nodeType||(s=o+r),f!==i||0!==a&&3!==f.nodeType||(c=o+a),3===f.nodeType&&(o+=f.nodeValue.length),null!==(m=f.firstChild);)p=f,f=m;for(;;){if(f===e)break t;if(p===n&&++u===r&&(s=o),p===i&&++d===a&&(c=o),null!==(m=f.nextSibling))break;p=(f=p).parentNode}f=m}n=-1===s||-1===c?null:{start:s,end:c}}else n=null}n=n||{start:0,end:0}}else n=null;for(nd={focusedElem:e,selectionRange:n},nf=!1,As=t;null!==As;)if(e=(t=As).child,0!==(1024&t.subtreeFlags)&&null!==e)e.return=t,As=e;else for(;null!==As;){switch(i=(t=As).alternate,e=t.flags,t.tag){case 0:case 11:case 15:case 5:case 26:case 27:case 6:case 4:case 17:break;case 1:if(0!==(1024&e)&&null!==i){e=void 0,n=t,r=i.memoizedProps,i=i.memoizedState,a=n.stateNode;try{var _=ho(n.type,r,(n.elementType,n.type));e=a.getSnapshotBeforeUpdate(_,i),a.__reactInternalSnapshotBeforeUpdate=e}catch(g){uu(n,n.return,g)}}break;case 3:if(0!==(1024&e))if(9===(n=(e=t.stateNode.containerInfo).nodeType))_d(e);else if(1===n)switch(e.nodeName){case"HEAD":case"HTML":case"BODY":_d(e);break;default:e.textContent=""}break;default:if(0!==(1024&e))throw Error(l(163))}if(null!==(e=t.sibling)){e.return=t.return,As=e;break}As=t.return}}(e,t)}finally{nc=o,M.p=r,P.T=a}}Nc=1,au(),ru(),iu()}}function au(){if(1===Nc){Nc=0;var e=Dc,t=Rc,n=0!==(13878&t.flags);if(0!==(13878&t.subtreeFlags)||n){n=P.T,P.T=null;var a=M.p;M.p=2;var r=nc;nc|=4;try{Ps(t,e);var i=nd,l=ea(e.containerInfo),o=i.focusedElem,s=i.selectionRange;if(l!==o&&o&&o.ownerDocument&&Jn(o.ownerDocument.documentElement,o)){if(null!==s&&ta(o)){var c=s.start,u=s.end;if(void 0===u&&(u=c),"selectionStart"in o)o.selectionStart=c,o.selectionEnd=Math.min(u,o.value.length);else{var d=o.ownerDocument||document,f=d&&d.defaultView||window;if(f.getSelection){var p=f.getSelection(),m=o.textContent.length,_=Math.min(s.start,m),h=void 0===s.end?_:Math.min(s.end,m);!p.extend&&_>h&&(l=h,h=_,_=l);var g=Zn(o,_),y=Zn(o,h);if(g&&y&&(1!==p.rangeCount||p.anchorNode!==g.node||p.anchorOffset!==g.offset||p.focusNode!==y.node||p.focusOffset!==y.offset)){var v=d.createRange();v.setStart(g.node,g.offset),p.removeAllRanges(),_>h?(p.addRange(v),p.extend(y.node,y.offset)):(v.setEnd(y.node,y.offset),p.addRange(v))}}}}for(d=[],p=o;p=p.parentNode;)1===p.nodeType&&d.push({element:p,left:p.scrollLeft,top:p.scrollTop});for("function"===typeof o.focus&&o.focus(),o=0;o<d.length;o++){var E=d[o];E.element.scrollLeft=E.left,E.element.scrollTop=E.top}}nf=!!td,nd=td=null}finally{nc=r,M.p=a,P.T=n}}e.current=t,Nc=2}}function ru(){if(2===Nc){Nc=0;var e=Dc,t=Rc,n=0!==(8772&t.flags);if(0!==(8772&t.subtreeFlags)||n){n=P.T,P.T=null;var a=M.p;M.p=2;var r=nc;nc|=4;try{Ss(e,t.alternate,t)}finally{nc=r,M.p=a,P.T=n}}Nc=3}}function iu(){if(4===Nc||3===Nc){Nc=0,ee();var e=Dc,t=Rc,n=wc,a=xc;0!==(10256&t.subtreeFlags)||0!==(10256&t.flags)?Nc=5:(Nc=0,Rc=Dc=null,lu(e,e.pendingLanes));var r=e.pendingLanes;if(0===r&&(Sc=null),ke(n),t=t.stateNode,de&&"function"===typeof de.onCommitFiberRoot)try{de.onCommitFiberRoot(ue,t,void 0,128===(128&t.current.flags))}catch(s){}if(null!==a){t=P.T,r=M.p,M.p=2,P.T=null;try{for(var i=e.onRecoverableError,l=0;l<a.length;l++){var o=a[l];i(o.value,{componentStack:o.stack})}}finally{P.T=t,M.p=r}}0!==(3&wc)&&ou(),Cu(e),r=e.pendingLanes,0!==(4194090&n)&&0!==(42&r)?e===Ic?Tc++:(Tc=0,Ic=e):Tc=0,Au(0,!1)}}function lu(e,t){0===(e.pooledCacheLanes&=t)&&(null!=(t=e.pooledCache)&&(e.pooledCache=null,Pr(t)))}function ou(e){return au(),ru(),iu(),su()}function su(){if(5!==Nc)return!1;var e=Dc,t=kc;kc=0;var n=ke(wc),a=P.T,r=M.p;try{M.p=32>n?32:n,P.T=null,n=Oc,Oc=null;var i=Dc,o=wc;if(Nc=0,Rc=Dc=null,wc=0,0!==(6&nc))throw Error(l(331));var s=nc;if(nc|=4,Xs(i.current),Ys(i,i.current,o,n),nc=s,Au(0,!1),de&&"function"===typeof de.onPostCommitFiberRoot)try{de.onPostCommitFiberRoot(ue,i)}catch(c){}return!0}finally{M.p=r,P.T=a,lu(e,t)}}function cu(e,t,n){t=Sa(n,t),null!==(e=ii(e,t=Ao(e.stateNode,t,2),2))&&(Ne(e,2),Cu(e))}function uu(e,t,n){if(3===e.tag)cu(e,e,n);else for(;null!==t;){if(3===t.tag){cu(t,e,n);break}if(1===t.tag){var a=t.stateNode;if("function"===typeof t.type.getDerivedStateFromError||"function"===typeof a.componentDidCatch&&(null===Sc||!Sc.has(a))){e=Sa(n,e),null!==(a=ii(t,n=So(2),2))&&(No(n,a,t,e),Ne(a,2),Cu(a));break}}t=t.return}}function du(e,t,n){var a=e.pingCache;if(null===a){a=e.pingCache=new tc;var r=new Set;a.set(t,r)}else void 0===(r=a.get(t))&&(r=new Set,a.set(t,r));r.has(n)||(uc=!0,r.add(n),e=fu.bind(null,e,t,n),t.then(e,e))}function fu(e,t,n){var a=e.pingCache;null!==a&&a.delete(t),e.pingedLanes|=e.suspendedLanes&n,e.warmLanes&=~n,ac===e&&(ic&n)===n&&(4===fc||3===fc&&(62914560&ic)===ic&&300>te()-bc?0===(2&nc)&&Yc(e,0):_c|=n,gc===ic&&(gc=0)),Cu(e)}function pu(e,t){0===t&&(t=Ae()),null!==(e=xa(e,t))&&(Ne(e,t),Cu(e))}function mu(e){var t=e.memoizedState,n=0;null!==t&&(n=t.retryLane),pu(e,n)}function _u(e,t){var n=0;switch(e.tag){case 13:var a=e.stateNode,r=e.memoizedState;null!==r&&(n=r.retryLane);break;case 19:a=e.stateNode;break;case 22:a=e.stateNode._retryCache;break;default:throw Error(l(314))}null!==a&&a.delete(t),pu(e,n)}var hu=null,gu=null,yu=!1,vu=!1,Eu=!1,bu=0;function Cu(e){e!==gu&&null===e.next&&(null===gu?hu=gu=e:gu=gu.next=e),vu=!0,yu||(yu=!0,dd(function(){0!==(6&nc)?X(ae,Su):Nu()}))}function Au(e,t){if(!Eu&&vu){Eu=!0;do{for(var n=!1,a=hu;null!==a;){if(!t)if(0!==e){var r=a.pendingLanes;if(0===r)var i=0;else{var l=a.suspendedLanes,o=a.pingedLanes;i=(1<<31-pe(42|e)+1)-1,i=201326741&(i&=r&~(l&~o))?201326741&i|1:i?2|i:0}0!==i&&(n=!0,wu(a,i))}else i=ic,0===(3&(i=ve(a,a===ac?i:0,null!==a.cancelPendingCommit||-1!==a.timeoutHandle)))||Ee(a,i)||(n=!0,wu(a,i));a=a.next}}while(n);Eu=!1}}function Su(){Nu()}function Nu(){vu=yu=!1;var e=0;0!==bu&&(function(){var e=window.event;if(e&&"popstate"===e.type)return e!==od&&(od=e,!0);return od=null,!1}()&&(e=bu),bu=0);for(var t=te(),n=null,a=hu;null!==a;){var r=a.next,i=Du(a,t);0===i?(a.next=null,null===n?hu=r:n.next=r,null===r&&(gu=n)):(n=a,(0!==e||0!==(3&i))&&(vu=!0)),a=r}Au(e,!1)}function Du(e,t){for(var n=e.suspendedLanes,a=e.pingedLanes,r=e.expirationTimes,i=-62914561&e.pendingLanes;0<i;){var l=31-pe(i),o=1<<l,s=r[l];-1===s?0!==(o&n)&&0===(o&a)||(r[l]=be(o,t)):s<=t&&(e.expiredLanes|=o),i&=~o}if(n=ic,n=ve(e,e===(t=ac)?n:0,null!==e.cancelPendingCommit||-1!==e.timeoutHandle),a=e.callbackNode,0===n||e===t&&(2===lc||9===lc)||null!==e.cancelPendingCommit)return null!==a&&null!==a&&Z(a),e.callbackNode=null,e.callbackPriority=0;if(0===(3&n)||Ee(e,n)){if((t=n&-n)===e.callbackPriority)return t;switch(null!==a&&Z(a),ke(n)){case 2:case 8:n=re;break;case 32:default:n=ie;break;case 268435456:n=oe}return a=Ru.bind(null,e),n=X(n,a),e.callbackPriority=t,e.callbackNode=n,t}return null!==a&&null!==a&&Z(a),e.callbackPriority=2,e.callbackNode=null,2}function Ru(e,t){if(0!==Nc&&5!==Nc)return e.callbackNode=null,e.callbackPriority=0,null;var n=e.callbackNode;if(ou()&&e.callbackNode!==n)return null;var a=ic;return 0===(a=ve(e,e===ac?a:0,null!==e.cancelPendingCommit||-1!==e.timeoutHandle))?null:(jc(e,a,t),Du(e,te()),null!=e.callbackNode&&e.callbackNode===n?Ru.bind(null,e):null)}function wu(e,t){if(ou())return null;jc(e,t,!0)}function ku(){return 0===bu&&(bu=Ce()),bu}function Ou(e){return null==e||"symbol"===typeof e||"boolean"===typeof e?null:"function"===typeof e?e:kt(""+e)}function xu(e,t){var n=t.ownerDocument.createElement("input");return n.name=t.name,n.value=t.value,e.id&&n.setAttribute("form",e.id),t.parentNode.insertBefore(n,t),e=new FormData(e),n.parentNode.removeChild(n),e}for(var Tu=0;Tu<ba.length;Tu++){var Iu=ba[Tu];Ca(Iu.toLowerCase(),"on"+(Iu[0].toUpperCase()+Iu.slice(1)))}Ca(pa,"onAnimationEnd"),Ca(ma,"onAnimationIteration"),Ca(_a,"onAnimationStart"),Ca("dblclick","onDoubleClick"),Ca("focusin","onFocus"),Ca("focusout","onBlur"),Ca(ha,"onTransitionRun"),Ca(ga,"onTransitionStart"),Ca(ya,"onTransitionCancel"),Ca(va,"onTransitionEnd"),$e("onMouseEnter",["mouseout","mouseover"]),$e("onMouseLeave",["mouseout","mouseover"]),$e("onPointerEnter",["pointerout","pointerover"]),$e("onPointerLeave",["pointerout","pointerover"]),Qe("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),Qe("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),Qe("onBeforeInput",["compositionend","keypress","textInput","paste"]),Qe("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),Qe("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),Qe("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Pu="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Mu=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Pu));function Lu(e,t){t=0!==(4&t);for(var n=0;n<e.length;n++){var a=e[n],r=a.event;a=a.listeners;e:{var i=void 0;if(t)for(var l=a.length-1;0<=l;l--){var o=a[l],s=o.instance,c=o.currentTarget;if(o=o.listener,s!==i&&r.isPropagationStopped())break e;i=o,r.currentTarget=c;try{i(r)}catch(u){go(u)}r.currentTarget=null,i=s}else for(l=0;l<a.length;l++){if(s=(o=a[l]).instance,c=o.currentTarget,o=o.listener,s!==i&&r.isPropagationStopped())break e;i=o,r.currentTarget=c;try{i(r)}catch(u){go(u)}r.currentTarget=null,i=s}}}}function ju(e,t){var n=t[Me];void 0===n&&(n=t[Me]=new Set);var a=e+"__bubble";n.has(a)||(Gu(t,e,2,!1),n.add(a))}function Uu(e,t,n){var a=0;t&&(a|=4),Gu(n,e,a,t)}var Fu="_reactListening"+Math.random().toString(36).slice(2);function zu(e){if(!e[Fu]){e[Fu]=!0,qe.forEach(function(t){"selectionchange"!==t&&(Mu.has(t)||Uu(t,!1,e),Uu(t,!0,e))});var t=9===e.nodeType?e:e.ownerDocument;null===t||t[Fu]||(t[Fu]=!0,Uu("selectionchange",!1,t))}}function Gu(e,t,n,a){switch(uf(t)){case 2:var r=af;break;case 8:r=rf;break;default:r=lf}n=r.bind(null,t,n,e),r=void 0,!Ft||"touchstart"!==t&&"touchmove"!==t&&"wheel"!==t||(r=!0),a?void 0!==r?e.addEventListener(t,n,{capture:!0,passive:r}):e.addEventListener(t,n,!0):void 0!==r?e.addEventListener(t,n,{passive:r}):e.addEventListener(t,n,!1)}function Hu(e,t,n,a,r){var i=a;if(0===(1&t)&&0===(2&t)&&null!==a)e:for(;;){if(null===a)return;var l=a.tag;if(3===l||4===l){var o=a.stateNode.containerInfo;if(o===r)break;if(4===l)for(l=a.return;null!==l;){var c=l.tag;if((3===c||4===c)&&l.stateNode.containerInfo===r)return;l=l.return}for(;null!==o;){if(null===(l=Ge(o)))return;if(5===(c=l.tag)||6===c||26===c||27===c){a=i=l;continue e}o=o.parentNode}}a=a.return}Lt(function(){var a=i,r=xt(n),l=[];e:{var o=Ea.get(e);if(void 0!==o){var c=Jt,u=e;switch(e){case"keypress":if(0===Wt(n))break e;case"keydown":case"keyup":c=_n;break;case"focusin":u="focus",c=ln;break;case"focusout":u="blur",c=ln;break;case"beforeblur":case"afterblur":c=ln;break;case"click":if(2===n.button)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":c=an;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":c=rn;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":c=gn;break;case pa:case ma:case _a:c=on;break;case va:c=yn;break;case"scroll":case"scrollend":c=tn;break;case"wheel":c=vn;break;case"copy":case"cut":case"paste":c=sn;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":c=hn;break;case"toggle":case"beforetoggle":c=En}var d=0!==(4&t),f=!d&&("scroll"===e||"scrollend"===e),p=d?null!==o?o+"Capture":null:o;d=[];for(var m,_=a;null!==_;){var h=_;if(m=h.stateNode,5!==(h=h.tag)&&26!==h&&27!==h||null===m||null===p||null!=(h=jt(_,p))&&d.push(Yu(_,h,m)),f)break;_=_.return}0<d.length&&(o=new c(o,u,null,n,r),l.push({event:o,listeners:d}))}}if(0===(7&t)){if(c="mouseout"===e||"pointerout"===e,(!(o="mouseover"===e||"pointerover"===e)||n===Ot||!(u=n.relatedTarget||n.fromElement)||!Ge(u)&&!u[Pe])&&(c||o)&&(o=r.window===r?r:(o=r.ownerDocument)?o.defaultView||o.parentWindow:window,c?(c=a,null!==(u=(u=n.relatedTarget||n.toElement)?Ge(u):null)&&(f=s(u),d=u.tag,u!==f||5!==d&&27!==d&&6!==d)&&(u=null)):(c=null,u=a),c!==u)){if(d=an,h="onMouseLeave",p="onMouseEnter",_="mouse","pointerout"!==e&&"pointerover"!==e||(d=hn,h="onPointerLeave",p="onPointerEnter",_="pointer"),f=null==c?o:Ye(c),m=null==u?o:Ye(u),(o=new d(h,_+"leave",c,n,r)).target=f,o.relatedTarget=m,h=null,Ge(r)===a&&((d=new d(p,_+"enter",u,n,r)).target=m,d.relatedTarget=f,h=d),f=h,c&&u)e:{for(p=u,_=0,m=d=c;m;m=Wu(m))_++;for(m=0,h=p;h;h=Wu(h))m++;for(;0<_-m;)d=Wu(d),_--;for(;0<m-_;)p=Wu(p),m--;for(;_--;){if(d===p||null!==p&&d===p.alternate)break e;d=Wu(d),p=Wu(p)}d=null}else d=null;null!==c&&qu(l,o,c,d,!1),null!==u&&null!==f&&qu(l,f,u,d,!0)}if("select"===(c=(o=a?Ye(a):window).nodeName&&o.nodeName.toLowerCase())||"input"===c&&"file"===o.type)var g=Un;else if(Tn(o))if(Fn)g=Qn;else{g=qn;var y=Wn}else!(c=o.nodeName)||"input"!==c.toLowerCase()||"checkbox"!==o.type&&"radio"!==o.type?a&&Dt(a.elementType)&&(g=Un):g=Vn;switch(g&&(g=g(e,a))?In(l,g,n,r):(y&&y(e,o,a),"focusout"===e&&a&&"number"===o.type&&null!=a.memoizedProps.value&&yt(o,"number",o.value)),y=a?Ye(a):window,e){case"focusin":(Tn(y)||"true"===y.contentEditable)&&(aa=y,ra=a,ia=null);break;case"focusout":ia=ra=aa=null;break;case"mousedown":la=!0;break;case"contextmenu":case"mouseup":case"dragend":la=!1,oa(l,n,r);break;case"selectionchange":if(na)break;case"keydown":case"keyup":oa(l,n,r)}var v;if(Cn)e:{switch(e){case"compositionstart":var E="onCompositionStart";break e;case"compositionend":E="onCompositionEnd";break e;case"compositionupdate":E="onCompositionUpdate";break e}E=void 0}else On?wn(e,n)&&(E="onCompositionEnd"):"keydown"===e&&229===n.keyCode&&(E="onCompositionStart");E&&(Nn&&"ko"!==n.locale&&(On||"onCompositionStart"!==E?"onCompositionEnd"===E&&On&&(v=Bt()):(Ht="value"in(Gt=r)?Gt.value:Gt.textContent,On=!0)),0<(y=Bu(a,E)).length&&(E=new cn(E,e,null,n,r),l.push({event:E,listeners:y}),v?E.data=v:null!==(v=kn(n))&&(E.data=v))),(v=Sn?function(e,t){switch(e){case"compositionend":return kn(t);case"keypress":return 32!==t.which?null:(Rn=!0,Dn);case"textInput":return(e=t.data)===Dn&&Rn?null:e;default:return null}}(e,n):function(e,t){if(On)return"compositionend"===e||!Cn&&wn(e,t)?(e=Bt(),Yt=Ht=Gt=null,On=!1,e):null;switch(e){case"paste":default:return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return Nn&&"ko"!==t.locale?null:t.data}}(e,n))&&(0<(E=Bu(a,"onBeforeInput")).length&&(y=new cn("onBeforeInput","beforeinput",null,n,r),l.push({event:y,listeners:E}),y.data=v)),function(e,t,n,a,r){if("submit"===t&&n&&n.stateNode===r){var i=Ou((r[Ie]||null).action),l=a.submitter;l&&null!==(t=(t=l[Ie]||null)?Ou(t.formAction):l.getAttribute("formAction"))&&(i=t,l=null);var o=new Jt("action","action",null,a,r);e.push({event:o,listeners:[{instance:null,listener:function(){if(a.defaultPrevented){if(0!==bu){var e=l?xu(r,l):new FormData(r);Ol(n,{pending:!0,data:e,method:r.method,action:i},null,e)}}else"function"===typeof i&&(o.preventDefault(),e=l?xu(r,l):new FormData(r),Ol(n,{pending:!0,data:e,method:r.method,action:i},i,e))},currentTarget:r}]})}}(l,e,a,n,r)}Lu(l,t)})}function Yu(e,t,n){return{instance:e,listener:t,currentTarget:n}}function Bu(e,t){for(var n=t+"Capture",a=[];null!==e;){var r=e,i=r.stateNode;if(5!==(r=r.tag)&&26!==r&&27!==r||null===i||(null!=(r=jt(e,n))&&a.unshift(Yu(e,r,i)),null!=(r=jt(e,t))&&a.push(Yu(e,r,i))),3===e.tag)return a;e=e.return}return[]}function Wu(e){if(null===e)return null;do{e=e.return}while(e&&5!==e.tag&&27!==e.tag);return e||null}function qu(e,t,n,a,r){for(var i=t._reactName,l=[];null!==n&&n!==a;){var o=n,s=o.alternate,c=o.stateNode;if(o=o.tag,null!==s&&s===a)break;5!==o&&26!==o&&27!==o||null===c||(s=c,r?null!=(c=jt(n,i))&&l.unshift(Yu(n,c,s)):r||null!=(c=jt(n,i))&&l.push(Yu(n,c,s))),n=n.return}0!==l.length&&e.push({event:t,listeners:l})}var Vu=/\r\n?/g,Qu=/\u0000|\uFFFD/g;function $u(e){return("string"===typeof e?e:""+e).replace(Vu,"\n").replace(Qu,"")}function Ku(e,t){return t=$u(t),$u(e)===t}function Xu(){}function Zu(e,t,n,a,r,i){switch(n){case"children":"string"===typeof a?"body"===t||"textarea"===t&&""===a||Ct(e,a):("number"===typeof a||"bigint"===typeof a)&&"body"!==t&&Ct(e,""+a);break;case"className":nt(e,"class",a);break;case"tabIndex":nt(e,"tabindex",a);break;case"dir":case"role":case"viewBox":case"width":case"height":nt(e,n,a);break;case"style":Nt(e,a,i);break;case"data":if("object"!==t){nt(e,"data",a);break}case"src":case"href":if(""===a&&("a"!==t||"href"!==n)){e.removeAttribute(n);break}if(null==a||"function"===typeof a||"symbol"===typeof a||"boolean"===typeof a){e.removeAttribute(n);break}a=kt(""+a),e.setAttribute(n,a);break;case"action":case"formAction":if("function"===typeof a){e.setAttribute(n,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}if("function"===typeof i&&("formAction"===n?("input"!==t&&Zu(e,t,"name",r.name,r,null),Zu(e,t,"formEncType",r.formEncType,r,null),Zu(e,t,"formMethod",r.formMethod,r,null),Zu(e,t,"formTarget",r.formTarget,r,null)):(Zu(e,t,"encType",r.encType,r,null),Zu(e,t,"method",r.method,r,null),Zu(e,t,"target",r.target,r,null))),null==a||"symbol"===typeof a||"boolean"===typeof a){e.removeAttribute(n);break}a=kt(""+a),e.setAttribute(n,a);break;case"onClick":null!=a&&(e.onclick=Xu);break;case"onScroll":null!=a&&ju("scroll",e);break;case"onScrollEnd":null!=a&&ju("scrollend",e);break;case"dangerouslySetInnerHTML":if(null!=a){if("object"!==typeof a||!("__html"in a))throw Error(l(61));if(null!=(n=a.__html)){if(null!=r.children)throw Error(l(60));e.innerHTML=n}}break;case"multiple":e.multiple=a&&"function"!==typeof a&&"symbol"!==typeof a;break;case"muted":e.muted=a&&"function"!==typeof a&&"symbol"!==typeof a;break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":case"autoFocus":break;case"xlinkHref":if(null==a||"function"===typeof a||"boolean"===typeof a||"symbol"===typeof a){e.removeAttribute("xlink:href");break}n=kt(""+a),e.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",n);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":null!=a&&"function"!==typeof a&&"symbol"!==typeof a?e.setAttribute(n,""+a):e.removeAttribute(n);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":a&&"function"!==typeof a&&"symbol"!==typeof a?e.setAttribute(n,""):e.removeAttribute(n);break;case"capture":case"download":!0===a?e.setAttribute(n,""):!1!==a&&null!=a&&"function"!==typeof a&&"symbol"!==typeof a?e.setAttribute(n,a):e.removeAttribute(n);break;case"cols":case"rows":case"size":case"span":null!=a&&"function"!==typeof a&&"symbol"!==typeof a&&!isNaN(a)&&1<=a?e.setAttribute(n,a):e.removeAttribute(n);break;case"rowSpan":case"start":null==a||"function"===typeof a||"symbol"===typeof a||isNaN(a)?e.removeAttribute(n):e.setAttribute(n,a);break;case"popover":ju("beforetoggle",e),ju("toggle",e),tt(e,"popover",a);break;case"xlinkActuate":at(e,"http://www.w3.org/1999/xlink","xlink:actuate",a);break;case"xlinkArcrole":at(e,"http://www.w3.org/1999/xlink","xlink:arcrole",a);break;case"xlinkRole":at(e,"http://www.w3.org/1999/xlink","xlink:role",a);break;case"xlinkShow":at(e,"http://www.w3.org/1999/xlink","xlink:show",a);break;case"xlinkTitle":at(e,"http://www.w3.org/1999/xlink","xlink:title",a);break;case"xlinkType":at(e,"http://www.w3.org/1999/xlink","xlink:type",a);break;case"xmlBase":at(e,"http://www.w3.org/XML/1998/namespace","xml:base",a);break;case"xmlLang":at(e,"http://www.w3.org/XML/1998/namespace","xml:lang",a);break;case"xmlSpace":at(e,"http://www.w3.org/XML/1998/namespace","xml:space",a);break;case"is":tt(e,"is",a);break;case"innerText":case"textContent":break;default:(!(2<n.length)||"o"!==n[0]&&"O"!==n[0]||"n"!==n[1]&&"N"!==n[1])&&tt(e,n=Rt.get(n)||n,a)}}function Ju(e,t,n,a,r,i){switch(n){case"style":Nt(e,a,i);break;case"dangerouslySetInnerHTML":if(null!=a){if("object"!==typeof a||!("__html"in a))throw Error(l(61));if(null!=(n=a.__html)){if(null!=r.children)throw Error(l(60));e.innerHTML=n}}break;case"children":"string"===typeof a?Ct(e,a):("number"===typeof a||"bigint"===typeof a)&&Ct(e,""+a);break;case"onScroll":null!=a&&ju("scroll",e);break;case"onScrollEnd":null!=a&&ju("scrollend",e);break;case"onClick":null!=a&&(e.onclick=Xu);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":case"innerText":case"textContent":break;default:Ve.hasOwnProperty(n)||("o"!==n[0]||"n"!==n[1]||(r=n.endsWith("Capture"),t=n.slice(2,r?n.length-7:void 0),"function"===typeof(i=null!=(i=e[Ie]||null)?i[n]:null)&&e.removeEventListener(t,i,r),"function"!==typeof a)?n in e?e[n]=a:!0===a?e.setAttribute(n,""):tt(e,n,a):("function"!==typeof i&&null!==i&&(n in e?e[n]=null:e.hasAttribute(n)&&e.removeAttribute(n)),e.addEventListener(t,a,r)))}}function ed(e,t,n){switch(t){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":ju("error",e),ju("load",e);var a,r=!1,i=!1;for(a in n)if(n.hasOwnProperty(a)){var o=n[a];if(null!=o)switch(a){case"src":r=!0;break;case"srcSet":i=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(l(137,t));default:Zu(e,t,a,o,n,null)}}return i&&Zu(e,t,"srcSet",n.srcSet,n,null),void(r&&Zu(e,t,"src",n.src,n,null));case"input":ju("invalid",e);var s=a=o=i=null,c=null,u=null;for(r in n)if(n.hasOwnProperty(r)){var d=n[r];if(null!=d)switch(r){case"name":i=d;break;case"type":o=d;break;case"checked":c=d;break;case"defaultChecked":u=d;break;case"value":a=d;break;case"defaultValue":s=d;break;case"children":case"dangerouslySetInnerHTML":if(null!=d)throw Error(l(137,t));break;default:Zu(e,t,r,d,n,null)}}return gt(e,a,s,c,u,o,i,!1),void dt(e);case"select":for(i in ju("invalid",e),r=o=a=null,n)if(n.hasOwnProperty(i)&&null!=(s=n[i]))switch(i){case"value":a=s;break;case"defaultValue":o=s;break;case"multiple":r=s;default:Zu(e,t,i,s,n,null)}return t=a,n=o,e.multiple=!!r,void(null!=t?vt(e,!!r,t,!1):null!=n&&vt(e,!!r,n,!0));case"textarea":for(o in ju("invalid",e),a=i=r=null,n)if(n.hasOwnProperty(o)&&null!=(s=n[o]))switch(o){case"value":r=s;break;case"defaultValue":i=s;break;case"children":a=s;break;case"dangerouslySetInnerHTML":if(null!=s)throw Error(l(91));break;default:Zu(e,t,o,s,n,null)}return bt(e,r,i,a),void dt(e);case"option":for(c in n)if(n.hasOwnProperty(c)&&null!=(r=n[c]))if("selected"===c)e.selected=r&&"function"!==typeof r&&"symbol"!==typeof r;else Zu(e,t,c,r,n,null);return;case"dialog":ju("beforetoggle",e),ju("toggle",e),ju("cancel",e),ju("close",e);break;case"iframe":case"object":ju("load",e);break;case"video":case"audio":for(r=0;r<Pu.length;r++)ju(Pu[r],e);break;case"image":ju("error",e),ju("load",e);break;case"details":ju("toggle",e);break;case"embed":case"source":case"link":ju("error",e),ju("load",e);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(u in n)if(n.hasOwnProperty(u)&&null!=(r=n[u]))switch(u){case"children":case"dangerouslySetInnerHTML":throw Error(l(137,t));default:Zu(e,t,u,r,n,null)}return;default:if(Dt(t)){for(d in n)n.hasOwnProperty(d)&&(void 0!==(r=n[d])&&Ju(e,t,d,r,n,void 0));return}}for(s in n)n.hasOwnProperty(s)&&(null!=(r=n[s])&&Zu(e,t,s,r,n,null))}var td=null,nd=null;function ad(e){return 9===e.nodeType?e:e.ownerDocument}function rd(e){switch(e){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function id(e,t){if(0===e)switch(t){case"svg":return 1;case"math":return 2;default:return 0}return 1===e&&"foreignObject"===t?0:e}function ld(e,t){return"textarea"===e||"noscript"===e||"string"===typeof t.children||"number"===typeof t.children||"bigint"===typeof t.children||"object"===typeof t.dangerouslySetInnerHTML&&null!==t.dangerouslySetInnerHTML&&null!=t.dangerouslySetInnerHTML.__html}var od=null;var sd="function"===typeof setTimeout?setTimeout:void 0,cd="function"===typeof clearTimeout?clearTimeout:void 0,ud="function"===typeof Promise?Promise:void 0,dd="function"===typeof queueMicrotask?queueMicrotask:"undefined"!==typeof ud?function(e){return ud.resolve(null).then(e).catch(fd)}:sd;function fd(e){setTimeout(function(){throw e})}function pd(e){return"head"===e}function md(e,t){var n=t,a=0,r=0;do{var i=n.nextSibling;if(e.removeChild(n),i&&8===i.nodeType)if("/$"===(n=i.data)){if(0<a&&8>a){n=a;var l=e.ownerDocument;if(1&n&&bd(l.documentElement),2&n&&bd(l.body),4&n)for(bd(n=l.head),l=n.firstChild;l;){var o=l.nextSibling,s=l.nodeName;l[Fe]||"SCRIPT"===s||"STYLE"===s||"LINK"===s&&"stylesheet"===l.rel.toLowerCase()||n.removeChild(l),l=o}}if(0===r)return e.removeChild(i),void wf(t);r--}else"$"===n||"$?"===n||"$!"===n?r++:a=n.charCodeAt(0)-48;else a=0;n=i}while(n);wf(t)}function _d(e){var t=e.firstChild;for(t&&10===t.nodeType&&(t=t.nextSibling);t;){var n=t;switch(t=t.nextSibling,n.nodeName){case"HTML":case"HEAD":case"BODY":_d(n),ze(n);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if("stylesheet"===n.rel.toLowerCase())continue}e.removeChild(n)}}function hd(e){return"$!"===e.data||"$?"===e.data&&"complete"===e.ownerDocument.readyState}function gd(e){for(;null!=e;e=e.nextSibling){var t=e.nodeType;if(1===t||3===t)break;if(8===t){if("$"===(t=e.data)||"$!"===t||"$?"===t||"F!"===t||"F"===t)break;if("/$"===t)return null}}return e}var yd=null;function vd(e){e=e.previousSibling;for(var t=0;e;){if(8===e.nodeType){var n=e.data;if("$"===n||"$!"===n||"$?"===n){if(0===t)return e;t--}else"/$"===n&&t++}e=e.previousSibling}return null}function Ed(e,t,n){switch(t=ad(n),e){case"html":if(!(e=t.documentElement))throw Error(l(452));return e;case"head":if(!(e=t.head))throw Error(l(453));return e;case"body":if(!(e=t.body))throw Error(l(454));return e;default:throw Error(l(451))}}function bd(e){for(var t=e.attributes;t.length;)e.removeAttributeNode(t[0]);ze(e)}var Cd=new Map,Ad=new Set;function Sd(e){return"function"===typeof e.getRootNode?e.getRootNode():9===e.nodeType?e:e.ownerDocument}var Nd=M.d;M.d={f:function(){var e=Nd.f(),t=Gc();return e||t},r:function(e){var t=He(e);null!==t&&5===t.tag&&"form"===t.type?Tl(t):Nd.r(e)},D:function(e){Nd.D(e),Rd("dns-prefetch",e,null)},C:function(e,t){Nd.C(e,t),Rd("preconnect",e,t)},L:function(e,t,n){Nd.L(e,t,n);var a=Dd;if(a&&e&&t){var r='link[rel="preload"][as="'+_t(t)+'"]';"image"===t&&n&&n.imageSrcSet?(r+='[imagesrcset="'+_t(n.imageSrcSet)+'"]',"string"===typeof n.imageSizes&&(r+='[imagesizes="'+_t(n.imageSizes)+'"]')):r+='[href="'+_t(e)+'"]';var i=r;switch(t){case"style":i=kd(e);break;case"script":i=Td(e)}Cd.has(i)||(e=f({rel:"preload",href:"image"===t&&n&&n.imageSrcSet?void 0:e,as:t},n),Cd.set(i,e),null!==a.querySelector(r)||"style"===t&&a.querySelector(Od(i))||"script"===t&&a.querySelector(Id(i))||(ed(t=a.createElement("link"),"link",e),We(t),a.head.appendChild(t)))}},m:function(e,t){Nd.m(e,t);var n=Dd;if(n&&e){var a=t&&"string"===typeof t.as?t.as:"script",r='link[rel="modulepreload"][as="'+_t(a)+'"][href="'+_t(e)+'"]',i=r;switch(a){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":i=Td(e)}if(!Cd.has(i)&&(e=f({rel:"modulepreload",href:e},t),Cd.set(i,e),null===n.querySelector(r))){switch(a){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(n.querySelector(Id(i)))return}ed(a=n.createElement("link"),"link",e),We(a),n.head.appendChild(a)}}},X:function(e,t){Nd.X(e,t);var n=Dd;if(n&&e){var a=Be(n).hoistableScripts,r=Td(e),i=a.get(r);i||((i=n.querySelector(Id(r)))||(e=f({src:e,async:!0},t),(t=Cd.get(r))&&jd(e,t),We(i=n.createElement("script")),ed(i,"link",e),n.head.appendChild(i)),i={type:"script",instance:i,count:1,state:null},a.set(r,i))}},S:function(e,t,n){Nd.S(e,t,n);var a=Dd;if(a&&e){var r=Be(a).hoistableStyles,i=kd(e);t=t||"default";var l=r.get(i);if(!l){var o={loading:0,preload:null};if(l=a.querySelector(Od(i)))o.loading=5;else{e=f({rel:"stylesheet",href:e,"data-precedence":t},n),(n=Cd.get(i))&&Ld(e,n);var s=l=a.createElement("link");We(s),ed(s,"link",e),s._p=new Promise(function(e,t){s.onload=e,s.onerror=t}),s.addEventListener("load",function(){o.loading|=1}),s.addEventListener("error",function(){o.loading|=2}),o.loading|=4,Md(l,t,a)}l={type:"stylesheet",instance:l,count:1,state:o},r.set(i,l)}}},M:function(e,t){Nd.M(e,t);var n=Dd;if(n&&e){var a=Be(n).hoistableScripts,r=Td(e),i=a.get(r);i||((i=n.querySelector(Id(r)))||(e=f({src:e,async:!0,type:"module"},t),(t=Cd.get(r))&&jd(e,t),We(i=n.createElement("script")),ed(i,"link",e),n.head.appendChild(i)),i={type:"script",instance:i,count:1,state:null},a.set(r,i))}}};var Dd="undefined"===typeof document?null:document;function Rd(e,t,n){var a=Dd;if(a&&"string"===typeof t&&t){var r=_t(t);r='link[rel="'+e+'"][href="'+r+'"]',"string"===typeof n&&(r+='[crossorigin="'+n+'"]'),Ad.has(r)||(Ad.add(r),e={rel:e,crossOrigin:n,href:t},null===a.querySelector(r)&&(ed(t=a.createElement("link"),"link",e),We(t),a.head.appendChild(t)))}}function wd(e,t,n,a){var r,i,o,s,c=(c=B.current)?Sd(c):null;if(!c)throw Error(l(446));switch(e){case"meta":case"title":return null;case"style":return"string"===typeof n.precedence&&"string"===typeof n.href?(t=kd(n.href),(a=(n=Be(c).hoistableStyles).get(t))||(a={type:"style",instance:null,count:0,state:null},n.set(t,a)),a):{type:"void",instance:null,count:0,state:null};case"link":if("stylesheet"===n.rel&&"string"===typeof n.href&&"string"===typeof n.precedence){e=kd(n.href);var u=Be(c).hoistableStyles,d=u.get(e);if(d||(c=c.ownerDocument||c,d={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},u.set(e,d),(u=c.querySelector(Od(e)))&&!u._p&&(d.instance=u,d.state.loading=5),Cd.has(e)||(n={rel:"preload",as:"style",href:n.href,crossOrigin:n.crossOrigin,integrity:n.integrity,media:n.media,hrefLang:n.hrefLang,referrerPolicy:n.referrerPolicy},Cd.set(e,n),u||(r=c,i=e,o=n,s=d.state,r.querySelector('link[rel="preload"][as="style"]['+i+"]")?s.loading=1:(i=r.createElement("link"),s.preload=i,i.addEventListener("load",function(){return s.loading|=1}),i.addEventListener("error",function(){return s.loading|=2}),ed(i,"link",o),We(i),r.head.appendChild(i))))),t&&null===a)throw Error(l(528,""));return d}if(t&&null!==a)throw Error(l(529,""));return null;case"script":return t=n.async,"string"===typeof(n=n.src)&&t&&"function"!==typeof t&&"symbol"!==typeof t?(t=Td(n),(a=(n=Be(c).hoistableScripts).get(t))||(a={type:"script",instance:null,count:0,state:null},n.set(t,a)),a):{type:"void",instance:null,count:0,state:null};default:throw Error(l(444,e))}}function kd(e){return'href="'+_t(e)+'"'}function Od(e){return'link[rel="stylesheet"]['+e+"]"}function xd(e){return f({},e,{"data-precedence":e.precedence,precedence:null})}function Td(e){return'[src="'+_t(e)+'"]'}function Id(e){return"script[async]"+e}function Pd(e,t,n){if(t.count++,null===t.instance)switch(t.type){case"style":var a=e.querySelector('style[data-href~="'+_t(n.href)+'"]');if(a)return t.instance=a,We(a),a;var r=f({},n,{"data-href":n.href,"data-precedence":n.precedence,href:null,precedence:null});return We(a=(e.ownerDocument||e).createElement("style")),ed(a,"style",r),Md(a,n.precedence,e),t.instance=a;case"stylesheet":r=kd(n.href);var i=e.querySelector(Od(r));if(i)return t.state.loading|=4,t.instance=i,We(i),i;a=xd(n),(r=Cd.get(r))&&Ld(a,r),We(i=(e.ownerDocument||e).createElement("link"));var o=i;return o._p=new Promise(function(e,t){o.onload=e,o.onerror=t}),ed(i,"link",a),t.state.loading|=4,Md(i,n.precedence,e),t.instance=i;case"script":return i=Td(n.src),(r=e.querySelector(Id(i)))?(t.instance=r,We(r),r):(a=n,(r=Cd.get(i))&&jd(a=f({},n),r),We(r=(e=e.ownerDocument||e).createElement("script")),ed(r,"link",a),e.head.appendChild(r),t.instance=r);case"void":return null;default:throw Error(l(443,t.type))}else"stylesheet"===t.type&&0===(4&t.state.loading)&&(a=t.instance,t.state.loading|=4,Md(a,n.precedence,e));return t.instance}function Md(e,t,n){for(var a=n.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),r=a.length?a[a.length-1]:null,i=r,l=0;l<a.length;l++){var o=a[l];if(o.dataset.precedence===t)i=o;else if(i!==r)break}i?i.parentNode.insertBefore(e,i.nextSibling):(t=9===n.nodeType?n.head:n).insertBefore(e,t.firstChild)}function Ld(e,t){null==e.crossOrigin&&(e.crossOrigin=t.crossOrigin),null==e.referrerPolicy&&(e.referrerPolicy=t.referrerPolicy),null==e.title&&(e.title=t.title)}function jd(e,t){null==e.crossOrigin&&(e.crossOrigin=t.crossOrigin),null==e.referrerPolicy&&(e.referrerPolicy=t.referrerPolicy),null==e.integrity&&(e.integrity=t.integrity)}var Ud=null;function Fd(e,t,n){if(null===Ud){var a=new Map,r=Ud=new Map;r.set(n,a)}else(a=(r=Ud).get(n))||(a=new Map,r.set(n,a));if(a.has(e))return a;for(a.set(e,null),n=n.getElementsByTagName(e),r=0;r<n.length;r++){var i=n[r];if(!(i[Fe]||i[Te]||"link"===e&&"stylesheet"===i.getAttribute("rel"))&&"http://www.w3.org/2000/svg"!==i.namespaceURI){var l=i.getAttribute(t)||"";l=e+l;var o=a.get(l);o?o.push(i):a.set(l,[i])}}return a}function zd(e,t,n){(e=e.ownerDocument||e).head.insertBefore(n,"title"===t?e.querySelector("head > title"):null)}function Gd(e){return"stylesheet"!==e.type||0!==(3&e.state.loading)}var Hd=null;function Yd(){}function Bd(){if(this.count--,0===this.count)if(this.stylesheets)qd(this,this.stylesheets);else if(this.unsuspend){var e=this.unsuspend;this.unsuspend=null,e()}}var Wd=null;function qd(e,t){e.stylesheets=null,null!==e.unsuspend&&(e.count++,Wd=new Map,t.forEach(Vd,e),Wd=null,Bd.call(e))}function Vd(e,t){if(!(4&t.state.loading)){var n=Wd.get(e);if(n)var a=n.get(null);else{n=new Map,Wd.set(e,n);for(var r=e.querySelectorAll("link[data-precedence],style[data-precedence]"),i=0;i<r.length;i++){var l=r[i];"LINK"!==l.nodeName&&"not all"===l.getAttribute("media")||(n.set(l.dataset.precedence,l),a=l)}a&&n.set(null,a)}l=(r=t.instance).getAttribute("data-precedence"),(i=n.get(l)||a)===a&&n.set(null,r),n.set(l,r),this.count++,a=Bd.bind(this),r.addEventListener("load",a),r.addEventListener("error",a),i?i.parentNode.insertBefore(r,i.nextSibling):(e=9===e.nodeType?e.head:e).insertBefore(r,e.firstChild),t.state.loading|=4}}var Qd={$$typeof:b,Provider:null,Consumer:null,_currentValue:L,_currentValue2:L,_threadCount:0};function $d(e,t,n,a,r,i,l,o){this.tag=1,this.containerInfo=e,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Se(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Se(0),this.hiddenUpdates=Se(null),this.identifierPrefix=a,this.onUncaughtError=r,this.onCaughtError=i,this.onRecoverableError=l,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=o,this.incompleteTransitions=new Map}function Kd(e,t,n,a,r,i,l,o,s,c,u,d){return e=new $d(e,t,n,l,o,s,c,d),t=1,!0===i&&(t|=24),i=La(3,null,null,t),e.current=i,i.stateNode=e,(t=Ir()).refCount++,e.pooledCache=t,t.refCount++,i.memoizedState={element:a,isDehydrated:n,cache:t},ni(i),e}function Xd(e){return e?e=Pa:Pa}function Zd(e,t,n,a,r,i){r=Xd(r),null===a.context?a.context=r:a.pendingContext=r,(a=ri(t)).payload={element:n},null!==(i=void 0===i?null:i)&&(a.callback=i),null!==(n=ii(e,a,t))&&(Lc(n,0,t),li(n,e,t))}function Jd(e,t){if(null!==(e=e.memoizedState)&&null!==e.dehydrated){var n=e.retryLane;e.retryLane=0!==n&&n<t?n:t}}function ef(e,t){Jd(e,t),(e=e.alternate)&&Jd(e,t)}function tf(e){if(13===e.tag){var t=xa(e,67108864);null!==t&&Lc(t,0,67108864),ef(e,67108864)}}var nf=!0;function af(e,t,n,a){var r=P.T;P.T=null;var i=M.p;try{M.p=2,lf(e,t,n,a)}finally{M.p=i,P.T=r}}function rf(e,t,n,a){var r=P.T;P.T=null;var i=M.p;try{M.p=8,lf(e,t,n,a)}finally{M.p=i,P.T=r}}function lf(e,t,n,a){if(nf){var r=of(a);if(null===r)Hu(e,t,a,sf,n),vf(e,a);else if(function(e,t,n,a,r){switch(t){case"focusin":return ff=Ef(ff,e,t,n,a,r),!0;case"dragenter":return pf=Ef(pf,e,t,n,a,r),!0;case"mouseover":return mf=Ef(mf,e,t,n,a,r),!0;case"pointerover":var i=r.pointerId;return _f.set(i,Ef(_f.get(i)||null,e,t,n,a,r)),!0;case"gotpointercapture":return i=r.pointerId,hf.set(i,Ef(hf.get(i)||null,e,t,n,a,r)),!0}return!1}(r,e,t,n,a))a.stopPropagation();else if(vf(e,a),4&t&&-1<yf.indexOf(e)){for(;null!==r;){var i=He(r);if(null!==i)switch(i.tag){case 3:if((i=i.stateNode).current.memoizedState.isDehydrated){var l=ye(i.pendingLanes);if(0!==l){var o=i;for(o.pendingLanes|=2,o.entangledLanes|=2;l;){var s=1<<31-pe(l);o.entanglements[1]|=s,l&=~s}Cu(i),0===(6&nc)&&(Cc=te()+500,Au(0,!1))}}break;case 13:null!==(o=xa(i,2))&&Lc(o,0,2),Gc(),ef(i,2)}if(null===(i=of(a))&&Hu(e,t,a,sf,n),i===r)break;r=i}null!==r&&a.stopPropagation()}else Hu(e,t,a,null,n)}}function of(e){return cf(e=xt(e))}var sf=null;function cf(e){if(sf=null,null!==(e=Ge(e))){var t=s(e);if(null===t)e=null;else{var n=t.tag;if(13===n){if(null!==(e=c(t)))return e;e=null}else if(3===n){if(t.stateNode.current.memoizedState.isDehydrated)return 3===t.tag?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null)}}return sf=e,null}function uf(e){switch(e){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(ne()){case ae:return 2;case re:return 8;case ie:case le:return 32;case oe:return 268435456;default:return 32}default:return 32}}var df=!1,ff=null,pf=null,mf=null,_f=new Map,hf=new Map,gf=[],yf="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function vf(e,t){switch(e){case"focusin":case"focusout":ff=null;break;case"dragenter":case"dragleave":pf=null;break;case"mouseover":case"mouseout":mf=null;break;case"pointerover":case"pointerout":_f.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":hf.delete(t.pointerId)}}function Ef(e,t,n,a,r,i){return null===e||e.nativeEvent!==i?(e={blockedOn:t,domEventName:n,eventSystemFlags:a,nativeEvent:i,targetContainers:[r]},null!==t&&(null!==(t=He(t))&&tf(t)),e):(e.eventSystemFlags|=a,t=e.targetContainers,null!==r&&-1===t.indexOf(r)&&t.push(r),e)}function bf(e){var t=Ge(e.target);if(null!==t){var n=s(t);if(null!==n)if(13===(t=n.tag)){if(null!==(t=c(n)))return e.blockedOn=t,void function(e,t){var n=M.p;try{return M.p=e,t()}finally{M.p=n}}(e.priority,function(){if(13===n.tag){var e=Pc();e=we(e);var t=xa(n,e);null!==t&&Lc(t,0,e),ef(n,e)}})}else if(3===t&&n.stateNode.current.memoizedState.isDehydrated)return void(e.blockedOn=3===n.tag?n.stateNode.containerInfo:null)}e.blockedOn=null}function Cf(e){if(null!==e.blockedOn)return!1;for(var t=e.targetContainers;0<t.length;){var n=of(e.nativeEvent);if(null!==n)return null!==(t=He(n))&&tf(t),e.blockedOn=n,!1;var a=new(n=e.nativeEvent).constructor(n.type,n);Ot=a,n.target.dispatchEvent(a),Ot=null,t.shift()}return!0}function Af(e,t,n){Cf(e)&&n.delete(t)}function Sf(){df=!1,null!==ff&&Cf(ff)&&(ff=null),null!==pf&&Cf(pf)&&(pf=null),null!==mf&&Cf(mf)&&(mf=null),_f.forEach(Af),hf.forEach(Af)}function Nf(e,t){e.blockedOn===t&&(e.blockedOn=null,df||(df=!0,a.unstable_scheduleCallback(a.unstable_NormalPriority,Sf)))}var Df=null;function Rf(e){Df!==e&&(Df=e,a.unstable_scheduleCallback(a.unstable_NormalPriority,function(){Df===e&&(Df=null);for(var t=0;t<e.length;t+=3){var n=e[t],a=e[t+1],r=e[t+2];if("function"!==typeof a){if(null===cf(a||n))continue;break}var i=He(n);null!==i&&(e.splice(t,3),t-=3,Ol(i,{pending:!0,data:r,method:n.method,action:a},a,r))}}))}function wf(e){function t(t){return Nf(t,e)}null!==ff&&Nf(ff,e),null!==pf&&Nf(pf,e),null!==mf&&Nf(mf,e),_f.forEach(t),hf.forEach(t);for(var n=0;n<gf.length;n++){var a=gf[n];a.blockedOn===e&&(a.blockedOn=null)}for(;0<gf.length&&null===(n=gf[0]).blockedOn;)bf(n),null===n.blockedOn&&gf.shift();if(null!=(n=(e.ownerDocument||e).$$reactFormReplay))for(a=0;a<n.length;a+=3){var r=n[a],i=n[a+1],l=r[Ie]||null;if("function"===typeof i)l||Rf(n);else if(l){var o=null;if(i&&i.hasAttribute("formAction")){if(r=i,l=i[Ie]||null)o=l.formAction;else if(null!==cf(r))continue}else o=l.action;"function"===typeof o?n[a+1]=o:(n.splice(a,3),a-=3),Rf(n)}}}function kf(e){this._internalRoot=e}function Of(e){this._internalRoot=e}Of.prototype.render=kf.prototype.render=function(e){var t=this._internalRoot;if(null===t)throw Error(l(409));Zd(t.current,Pc(),e,t,null,null)},Of.prototype.unmount=kf.prototype.unmount=function(){var e=this._internalRoot;if(null!==e){this._internalRoot=null;var t=e.containerInfo;Zd(e.current,2,null,e,null,null),Gc(),t[Pe]=null}},Of.prototype.unstable_scheduleHydration=function(e){if(e){var t=Oe();e={blockedOn:null,target:e,priority:t};for(var n=0;n<gf.length&&0!==t&&t<gf[n].priority;n++);gf.splice(n,0,e),0===n&&bf(e)}};var xf=r.version;if("19.1.1"!==xf)throw Error(l(527,xf,"19.1.1"));M.findDOMNode=function(e){var t=e._reactInternals;if(void 0===t){if("function"===typeof e.render)throw Error(l(188));throw e=Object.keys(e).join(","),Error(l(268,e))}return e=function(e){var t=e.alternate;if(!t){if(null===(t=s(e)))throw Error(l(188));return t!==e?null:e}for(var n=e,a=t;;){var r=n.return;if(null===r)break;var i=r.alternate;if(null===i){if(null!==(a=r.return)){n=a;continue}break}if(r.child===i.child){for(i=r.child;i;){if(i===n)return u(r),e;if(i===a)return u(r),t;i=i.sibling}throw Error(l(188))}if(n.return!==a.return)n=r,a=i;else{for(var o=!1,c=r.child;c;){if(c===n){o=!0,n=r,a=i;break}if(c===a){o=!0,a=r,n=i;break}c=c.sibling}if(!o){for(c=i.child;c;){if(c===n){o=!0,n=i,a=r;break}if(c===a){o=!0,a=i,n=r;break}c=c.sibling}if(!o)throw Error(l(189))}}if(n.alternate!==a)throw Error(l(190))}if(3!==n.tag)throw Error(l(188));return n.stateNode.current===n?e:t}(t),e=null===(e=null!==e?d(e):null)?null:e.stateNode};var Tf={bundleType:0,version:"19.1.1",rendererPackageName:"react-dom",currentDispatcherRef:P,reconcilerVersion:"19.1.1"};if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__){var If=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!If.isDisabled&&If.supportsFiber)try{ue=If.inject(Tf),de=If}catch(Mf){}}t.createRoot=function(e,t){if(!o(e))throw Error(l(299));var n=!1,a="",r=yo,i=vo,s=Eo;return null!==t&&void 0!==t&&(!0===t.unstable_strictMode&&(n=!0),void 0!==t.identifierPrefix&&(a=t.identifierPrefix),void 0!==t.onUncaughtError&&(r=t.onUncaughtError),void 0!==t.onCaughtError&&(i=t.onCaughtError),void 0!==t.onRecoverableError&&(s=t.onRecoverableError),void 0!==t.unstable_transitionCallbacks&&t.unstable_transitionCallbacks),t=Kd(e,1,!1,null,0,n,a,r,i,s,0,null),e[Pe]=t.current,zu(e),new kf(t)},t.hydrateRoot=function(e,t,n){if(!o(e))throw Error(l(299));var a=!1,r="",i=yo,s=vo,c=Eo,u=null;return null!==n&&void 0!==n&&(!0===n.unstable_strictMode&&(a=!0),void 0!==n.identifierPrefix&&(r=n.identifierPrefix),void 0!==n.onUncaughtError&&(i=n.onUncaughtError),void 0!==n.onCaughtError&&(s=n.onCaughtError),void 0!==n.onRecoverableError&&(c=n.onRecoverableError),void 0!==n.unstable_transitionCallbacks&&n.unstable_transitionCallbacks,void 0!==n.formState&&(u=n.formState)),(t=Kd(e,1,!0,t,0,a,r,i,s,c,0,u)).context=Xd(null),n=t.current,(r=ri(a=we(a=Pc()))).callback=null,ii(n,r,a),n=a,t.current.lanes=n,Ne(t,n),Cu(t),e[Pe]=t.current,zu(e),new Of(t)},t.version="19.1.1"},43:(e,t,n)=>{e.exports=n(288)},288:(e,t)=>{var n=Symbol.for("react.transitional.element"),a=Symbol.for("react.portal"),r=Symbol.for("react.fragment"),i=Symbol.for("react.strict_mode"),l=Symbol.for("react.profiler"),o=Symbol.for("react.consumer"),s=Symbol.for("react.context"),c=Symbol.for("react.forward_ref"),u=Symbol.for("react.suspense"),d=Symbol.for("react.memo"),f=Symbol.for("react.lazy"),p=Symbol.iterator;var m={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},_=Object.assign,h={};function g(e,t,n){this.props=e,this.context=t,this.refs=h,this.updater=n||m}function y(){}function v(e,t,n){this.props=e,this.context=t,this.refs=h,this.updater=n||m}g.prototype.isReactComponent={},g.prototype.setState=function(e,t){if("object"!==typeof e&&"function"!==typeof e&&null!=e)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")},g.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")},y.prototype=g.prototype;var E=v.prototype=new y;E.constructor=v,_(E,g.prototype),E.isPureReactComponent=!0;var b=Array.isArray,C={H:null,A:null,T:null,S:null,V:null},A=Object.prototype.hasOwnProperty;function S(e,t,a,r,i,l){return a=l.ref,{$$typeof:n,type:e,key:t,ref:void 0!==a?a:null,props:l}}function N(e){return"object"===typeof e&&null!==e&&e.$$typeof===n}var D=/\/+/g;function R(e,t){return"object"===typeof e&&null!==e&&null!=e.key?function(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(e){return t[e]})}(""+e.key):t.toString(36)}function w(){}function k(e,t,r,i,l){var o=typeof e;"undefined"!==o&&"boolean"!==o||(e=null);var s,c,u=!1;if(null===e)u=!0;else switch(o){case"bigint":case"string":case"number":u=!0;break;case"object":switch(e.$$typeof){case n:case a:u=!0;break;case f:return k((u=e._init)(e._payload),t,r,i,l)}}if(u)return l=l(e),u=""===i?"."+R(e,0):i,b(l)?(r="",null!=u&&(r=u.replace(D,"$&/")+"/"),k(l,t,r,"",function(e){return e})):null!=l&&(N(l)&&(s=l,c=r+(null==l.key||e&&e.key===l.key?"":(""+l.key).replace(D,"$&/")+"/")+u,l=S(s.type,c,void 0,0,0,s.props)),t.push(l)),1;u=0;var d,m=""===i?".":i+":";if(b(e))for(var _=0;_<e.length;_++)u+=k(i=e[_],t,r,o=m+R(i,_),l);else if("function"===typeof(_=null===(d=e)||"object"!==typeof d?null:"function"===typeof(d=p&&d[p]||d["@@iterator"])?d:null))for(e=_.call(e),_=0;!(i=e.next()).done;)u+=k(i=i.value,t,r,o=m+R(i,_++),l);else if("object"===o){if("function"===typeof e.then)return k(function(e){switch(e.status){case"fulfilled":return e.value;case"rejected":throw e.reason;default:switch("string"===typeof e.status?e.then(w,w):(e.status="pending",e.then(function(t){"pending"===e.status&&(e.status="fulfilled",e.value=t)},function(t){"pending"===e.status&&(e.status="rejected",e.reason=t)})),e.status){case"fulfilled":return e.value;case"rejected":throw e.reason}}throw e}(e),t,r,i,l);throw t=String(e),Error("Objects are not valid as a React child (found: "+("[object Object]"===t?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.")}return u}function O(e,t,n){if(null==e)return e;var a=[],r=0;return k(e,a,"","",function(e){return t.call(n,e,r++)}),a}function x(e){if(-1===e._status){var t=e._result;(t=t()).then(function(t){0!==e._status&&-1!==e._status||(e._status=1,e._result=t)},function(t){0!==e._status&&-1!==e._status||(e._status=2,e._result=t)}),-1===e._status&&(e._status=0,e._result=t)}if(1===e._status)return e._result.default;throw e._result}var T="function"===typeof reportError?reportError:function(e){if("object"===typeof window&&"function"===typeof window.ErrorEvent){var t=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:"object"===typeof e&&null!==e&&"string"===typeof e.message?String(e.message):String(e),error:e});if(!window.dispatchEvent(t))return}else if("object"===typeof process&&"function"===typeof process.emit)return void process.emit("uncaughtException",e);console.error(e)};function I(){}t.Children={map:O,forEach:function(e,t,n){O(e,function(){t.apply(this,arguments)},n)},count:function(e){var t=0;return O(e,function(){t++}),t},toArray:function(e){return O(e,function(e){return e})||[]},only:function(e){if(!N(e))throw Error("React.Children.only expected to receive a single React element child.");return e}},t.Component=g,t.Fragment=r,t.Profiler=l,t.PureComponent=v,t.StrictMode=i,t.Suspense=u,t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=C,t.__COMPILER_RUNTIME={__proto__:null,c:function(e){return C.H.useMemoCache(e)}},t.cache=function(e){return function(){return e.apply(null,arguments)}},t.cloneElement=function(e,t,n){if(null===e||void 0===e)throw Error("The argument must be a React element, but you passed "+e+".");var a=_({},e.props),r=e.key;if(null!=t)for(i in void 0!==t.ref&&void 0,void 0!==t.key&&(r=""+t.key),t)!A.call(t,i)||"key"===i||"__self"===i||"__source"===i||"ref"===i&&void 0===t.ref||(a[i]=t[i]);var i=arguments.length-2;if(1===i)a.children=n;else if(1<i){for(var l=Array(i),o=0;o<i;o++)l[o]=arguments[o+2];a.children=l}return S(e.type,r,void 0,0,0,a)},t.createContext=function(e){return(e={$$typeof:s,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null}).Provider=e,e.Consumer={$$typeof:o,_context:e},e},t.createElement=function(e,t,n){var a,r={},i=null;if(null!=t)for(a in void 0!==t.key&&(i=""+t.key),t)A.call(t,a)&&"key"!==a&&"__self"!==a&&"__source"!==a&&(r[a]=t[a]);var l=arguments.length-2;if(1===l)r.children=n;else if(1<l){for(var o=Array(l),s=0;s<l;s++)o[s]=arguments[s+2];r.children=o}if(e&&e.defaultProps)for(a in l=e.defaultProps)void 0===r[a]&&(r[a]=l[a]);return S(e,i,void 0,0,0,r)},t.createRef=function(){return{current:null}},t.forwardRef=function(e){return{$$typeof:c,render:e}},t.isValidElement=N,t.lazy=function(e){return{$$typeof:f,_payload:{_status:-1,_result:e},_init:x}},t.memo=function(e,t){return{$$typeof:d,type:e,compare:void 0===t?null:t}},t.startTransition=function(e){var t=C.T,n={};C.T=n;try{var a=e(),r=C.S;null!==r&&r(n,a),"object"===typeof a&&null!==a&&"function"===typeof a.then&&a.then(I,T)}catch(i){T(i)}finally{C.T=t}},t.unstable_useCacheRefresh=function(){return C.H.useCacheRefresh()},t.use=function(e){return C.H.use(e)},t.useActionState=function(e,t,n){return C.H.useActionState(e,t,n)},t.useCallback=function(e,t){return C.H.useCallback(e,t)},t.useContext=function(e){return C.H.useContext(e)},t.useDebugValue=function(){},t.useDeferredValue=function(e,t){return C.H.useDeferredValue(e,t)},t.useEffect=function(e,t,n){var a=C.H;if("function"===typeof n)throw Error("useEffect CRUD overload is not enabled in this build of React.");return a.useEffect(e,t)},t.useId=function(){return C.H.useId()},t.useImperativeHandle=function(e,t,n){return C.H.useImperativeHandle(e,t,n)},t.useInsertionEffect=function(e,t){return C.H.useInsertionEffect(e,t)},t.useLayoutEffect=function(e,t){return C.H.useLayoutEffect(e,t)},t.useMemo=function(e,t){return C.H.useMemo(e,t)},t.useOptimistic=function(e,t){return C.H.useOptimistic(e,t)},t.useReducer=function(e,t,n){return C.H.useReducer(e,t,n)},t.useRef=function(e){return C.H.useRef(e)},t.useState=function(e){return C.H.useState(e)},t.useSyncExternalStore=function(e,t,n){return C.H.useSyncExternalStore(e,t,n)},t.useTransition=function(){return C.H.useTransition()},t.version="19.1.1"},391:(e,t,n)=>{!function e(){if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"===typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}(),e.exports=n(4)},579:(e,t,n)=>{e.exports=n(799)},672:(e,t,n)=>{var a=n(43);function r(e){var t="https://react.dev/errors/"+e;if(1<arguments.length){t+="?args[]="+encodeURIComponent(arguments[1]);for(var n=2;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n])}return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function i(){}var l={d:{f:i,r:function(){throw Error(r(522))},D:i,C:i,L:i,m:i,X:i,S:i,M:i},p:0,findDOMNode:null},o=Symbol.for("react.portal");var s=a.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function c(e,t){return"font"===e?"":"string"===typeof t?"use-credentials"===t?t:"":void 0}t.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=l,t.createPortal=function(e,t){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;if(!t||1!==t.nodeType&&9!==t.nodeType&&11!==t.nodeType)throw Error(r(299));return function(e,t,n){var a=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:o,key:null==a?null:""+a,children:e,containerInfo:t,implementation:n}}(e,t,null,n)},t.flushSync=function(e){var t=s.T,n=l.p;try{if(s.T=null,l.p=2,e)return e()}finally{s.T=t,l.p=n,l.d.f()}},t.preconnect=function(e,t){"string"===typeof e&&(t?t="string"===typeof(t=t.crossOrigin)?"use-credentials"===t?t:"":void 0:t=null,l.d.C(e,t))},t.prefetchDNS=function(e){"string"===typeof e&&l.d.D(e)},t.preinit=function(e,t){if("string"===typeof e&&t&&"string"===typeof t.as){var n=t.as,a=c(n,t.crossOrigin),r="string"===typeof t.integrity?t.integrity:void 0,i="string"===typeof t.fetchPriority?t.fetchPriority:void 0;"style"===n?l.d.S(e,"string"===typeof t.precedence?t.precedence:void 0,{crossOrigin:a,integrity:r,fetchPriority:i}):"script"===n&&l.d.X(e,{crossOrigin:a,integrity:r,fetchPriority:i,nonce:"string"===typeof t.nonce?t.nonce:void 0})}},t.preinitModule=function(e,t){if("string"===typeof e)if("object"===typeof t&&null!==t){if(null==t.as||"script"===t.as){var n=c(t.as,t.crossOrigin);l.d.M(e,{crossOrigin:n,integrity:"string"===typeof t.integrity?t.integrity:void 0,nonce:"string"===typeof t.nonce?t.nonce:void 0})}}else null==t&&l.d.M(e)},t.preload=function(e,t){if("string"===typeof e&&"object"===typeof t&&null!==t&&"string"===typeof t.as){var n=t.as,a=c(n,t.crossOrigin);l.d.L(e,n,{crossOrigin:a,integrity:"string"===typeof t.integrity?t.integrity:void 0,nonce:"string"===typeof t.nonce?t.nonce:void 0,type:"string"===typeof t.type?t.type:void 0,fetchPriority:"string"===typeof t.fetchPriority?t.fetchPriority:void 0,referrerPolicy:"string"===typeof t.referrerPolicy?t.referrerPolicy:void 0,imageSrcSet:"string"===typeof t.imageSrcSet?t.imageSrcSet:void 0,imageSizes:"string"===typeof t.imageSizes?t.imageSizes:void 0,media:"string"===typeof t.media?t.media:void 0})}},t.preloadModule=function(e,t){if("string"===typeof e)if(t){var n=c(t.as,t.crossOrigin);l.d.m(e,{as:"string"===typeof t.as&&"script"!==t.as?t.as:void 0,crossOrigin:n,integrity:"string"===typeof t.integrity?t.integrity:void 0})}else l.d.m(e)},t.requestFormReset=function(e){l.d.r(e)},t.unstable_batchedUpdates=function(e,t){return e(t)},t.useFormState=function(e,t,n){return s.H.useFormState(e,t,n)},t.useFormStatus=function(){return s.H.useHostTransitionStatus()},t.version="19.1.1"},799:(e,t)=>{var n=Symbol.for("react.transitional.element"),a=Symbol.for("react.fragment");function r(e,t,a){var r=null;if(void 0!==a&&(r=""+a),void 0!==t.key&&(r=""+t.key),"key"in t)for(var i in a={},t)"key"!==i&&(a[i]=t[i]);else a=t;return t=a.ref,{$$typeof:n,type:e,key:r,ref:void 0!==t?t:null,props:a}}t.Fragment=a,t.jsx=r,t.jsxs=r},853:(e,t,n)=>{e.exports=n(896)},896:(e,t)=>{function n(e,t){var n=e.length;e.push(t);e:for(;0<n;){var a=n-1>>>1,r=e[a];if(!(0<i(r,t)))break e;e[a]=t,e[n]=r,n=a}}function a(e){return 0===e.length?null:e[0]}function r(e){if(0===e.length)return null;var t=e[0],n=e.pop();if(n!==t){e[0]=n;e:for(var a=0,r=e.length,l=r>>>1;a<l;){var o=2*(a+1)-1,s=e[o],c=o+1,u=e[c];if(0>i(s,n))c<r&&0>i(u,s)?(e[a]=u,e[c]=n,a=c):(e[a]=s,e[o]=n,a=o);else{if(!(c<r&&0>i(u,n)))break e;e[a]=u,e[c]=n,a=c}}}return t}function i(e,t){var n=e.sortIndex-t.sortIndex;return 0!==n?n:e.id-t.id}if(t.unstable_now=void 0,"object"===typeof performance&&"function"===typeof performance.now){var l=performance;t.unstable_now=function(){return l.now()}}else{var o=Date,s=o.now();t.unstable_now=function(){return o.now()-s}}var c=[],u=[],d=1,f=null,p=3,m=!1,_=!1,h=!1,g=!1,y="function"===typeof setTimeout?setTimeout:null,v="function"===typeof clearTimeout?clearTimeout:null,E="undefined"!==typeof setImmediate?setImmediate:null;function b(e){for(var t=a(u);null!==t;){if(null===t.callback)r(u);else{if(!(t.startTime<=e))break;r(u),t.sortIndex=t.expirationTime,n(c,t)}t=a(u)}}function C(e){if(h=!1,b(e),!_)if(null!==a(c))_=!0,S||(S=!0,A());else{var t=a(u);null!==t&&T(C,t.startTime-e)}}var A,S=!1,N=-1,D=5,R=-1;function w(){return!!g||!(t.unstable_now()-R<D)}function k(){if(g=!1,S){var e=t.unstable_now();R=e;var n=!0;try{e:{_=!1,h&&(h=!1,v(N),N=-1),m=!0;var i=p;try{t:{for(b(e),f=a(c);null!==f&&!(f.expirationTime>e&&w());){var l=f.callback;if("function"===typeof l){f.callback=null,p=f.priorityLevel;var o=l(f.expirationTime<=e);if(e=t.unstable_now(),"function"===typeof o){f.callback=o,b(e),n=!0;break t}f===a(c)&&r(c),b(e)}else r(c);f=a(c)}if(null!==f)n=!0;else{var s=a(u);null!==s&&T(C,s.startTime-e),n=!1}}break e}finally{f=null,p=i,m=!1}n=void 0}}finally{n?A():S=!1}}}if("function"===typeof E)A=function(){E(k)};else if("undefined"!==typeof MessageChannel){var O=new MessageChannel,x=O.port2;O.port1.onmessage=k,A=function(){x.postMessage(null)}}else A=function(){y(k,0)};function T(e,n){N=y(function(){e(t.unstable_now())},n)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(e){e.callback=null},t.unstable_forceFrameRate=function(e){0>e||125<e?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):D=0<e?Math.floor(1e3/e):5},t.unstable_getCurrentPriorityLevel=function(){return p},t.unstable_next=function(e){switch(p){case 1:case 2:case 3:var t=3;break;default:t=p}var n=p;p=t;try{return e()}finally{p=n}},t.unstable_requestPaint=function(){g=!0},t.unstable_runWithPriority=function(e,t){switch(e){case 1:case 2:case 3:case 4:case 5:break;default:e=3}var n=p;p=e;try{return t()}finally{p=n}},t.unstable_scheduleCallback=function(e,r,i){var l=t.unstable_now();switch("object"===typeof i&&null!==i?i="number"===typeof(i=i.delay)&&0<i?l+i:l:i=l,e){case 1:var o=-1;break;case 2:o=250;break;case 5:o=1073741823;break;case 4:o=1e4;break;default:o=5e3}return e={id:d++,callback:r,priorityLevel:e,startTime:i,expirationTime:o=i+o,sortIndex:-1},i>l?(e.sortIndex=i,n(u,e),null===a(c)&&e===a(u)&&(h?(v(N),N=-1):h=!0,T(C,i-l))):(e.sortIndex=o,n(c,e),_||m||(_=!0,S||(S=!0,A()))),e},t.unstable_shouldYield=w,t.unstable_wrapCallback=function(e){var t=p;return function(){var n=p;p=t;try{return e.apply(this,arguments)}finally{p=n}}}},950:(e,t,n)=>{!function e(){if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"===typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}(),e.exports=n(672)}},t={};function n(a){var r=t[a];if(void 0!==r)return r.exports;var i=t[a]={exports:{}};return e[a](i,i.exports,n),i.exports}n.m=e,n.d=(e,t)=>{for(var a in t)n.o(t,a)&&!n.o(e,a)&&Object.defineProperty(e,a,{enumerable:!0,get:t[a]})},n.f={},n.e=e=>Promise.all(Object.keys(n.f).reduce((t,a)=>(n.f[a](e,t),t),[])),n.u=e=>"static/js/"+e+".fb6f5a1e.chunk.js",n.miniCssF=e=>{},n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),(()=>{var e={},t="historio-web:";n.l=(a,r,i,l)=>{if(e[a])e[a].push(r);else{var o,s;if(void 0!==i)for(var c=document.getElementsByTagName("script"),u=0;u<c.length;u++){var d=c[u];if(d.getAttribute("src")==a||d.getAttribute("data-webpack")==t+i){o=d;break}}o||(s=!0,(o=document.createElement("script")).charset="utf-8",o.timeout=120,n.nc&&o.setAttribute("nonce",n.nc),o.setAttribute("data-webpack",t+i),o.src=a),e[a]=[r];var f=(t,n)=>{o.onerror=o.onload=null,clearTimeout(p);var r=e[a];if(delete e[a],o.parentNode&&o.parentNode.removeChild(o),r&&r.forEach(e=>e(n)),t)return t(n)},p=setTimeout(f.bind(null,void 0,{type:"timeout",target:o}),12e4);o.onerror=f.bind(null,o.onerror),o.onload=f.bind(null,o.onload),s&&document.head.appendChild(o)}}})(),n.r=e=>{"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.p="./",(()=>{var e={792:0};n.f.j=(t,a)=>{var r=n.o(e,t)?e[t]:void 0;if(0!==r)if(r)a.push(r[2]);else{var i=new Promise((n,a)=>r=e[t]=[n,a]);a.push(r[2]=i);var l=n.p+n.u(t),o=new Error;n.l(l,a=>{if(n.o(e,t)&&(0!==(r=e[t])&&(e[t]=void 0),r)){var i=a&&("load"===a.type?"missing":a.type),l=a&&a.target&&a.target.src;o.message="Loading chunk "+t+" failed.\n("+i+": "+l+")",o.name="ChunkLoadError",o.type=i,o.request=l,r[1](o)}},"chunk-"+t,t)}};var t=(t,a)=>{var r,i,l=a[0],o=a[1],s=a[2],c=0;if(l.some(t=>0!==e[t])){for(r in o)n.o(o,r)&&(n.m[r]=o[r]);if(s)s(n)}for(t&&t(a);c<l.length;c++)i=l[c],n.o(e,i)&&e[i]&&e[i][0](),e[i]=0},a=self.webpackChunkhistorio_web=self.webpackChunkhistorio_web||[];a.forEach(t.bind(null,0)),a.push=t.bind(null,a.push.bind(a))})();var a=n(43),r=n(391);function i(e){return i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},i(e)}function l(e){var t=function(e,t){if("object"!=i(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var a=n.call(e,t||"default");if("object"!=i(a))return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==i(t)?t:t+""}function o(e,t,n){return(t=l(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function s(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,a)}return n}function c(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?s(Object(n),!0).forEach(function(t){o(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):s(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var u=Symbol.for("immer-nothing"),d=Symbol.for("immer-draftable"),f=Symbol.for("immer-state");function p(e){throw new Error("[Immer] minified error nr: ".concat(e,". Full error at: https://bit.ly/3cXEKWf"))}var m=Object.getPrototypeOf;function _(e){return!!e&&!!e[f]}function h(e){var t;return!!e&&(v(e)||Array.isArray(e)||!!e[d]||!(null===(t=e.constructor)||void 0===t||!t[d])||S(e)||N(e))}var g=Object.prototype.constructor.toString(),y=new WeakMap;function v(e){if(!e||"object"!==typeof e)return!1;const t=Object.getPrototypeOf(e);if(null===t||t===Object.prototype)return!0;const n=Object.hasOwnProperty.call(t,"constructor")&&t.constructor;if(n===Object)return!0;if("function"!==typeof n)return!1;let a=y.get(n);return void 0===a&&(a=Function.toString.call(n),y.set(n,a)),a===g}function E(e,t){let n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];if(0===b(e)){(n?Reflect.ownKeys(e):Object.keys(e)).forEach(n=>{t(n,e[n],e)})}else e.forEach((n,a)=>t(a,n,e))}function b(e){const t=e[f];return t?t.type_:Array.isArray(e)?1:S(e)?2:N(e)?3:0}function C(e,t){return 2===b(e)?e.has(t):Object.prototype.hasOwnProperty.call(e,t)}function A(e,t,n){const a=b(e);2===a?e.set(t,n):3===a?e.add(n):e[t]=n}function S(e){return e instanceof Map}function N(e){return e instanceof Set}function D(e){return e.copy_||e.base_}function R(e,t){if(S(e))return new Map(e);if(N(e))return new Set(e);if(Array.isArray(e))return Array.prototype.slice.call(e);const n=v(e);if(!0===t||"class_only"===t&&!n){const t=Object.getOwnPropertyDescriptors(e);delete t[f];let n=Reflect.ownKeys(t);for(let a=0;a<n.length;a++){const r=n[a],i=t[r];!1===i.writable&&(i.writable=!0,i.configurable=!0),(i.get||i.set)&&(t[r]={configurable:!0,writable:!0,enumerable:i.enumerable,value:e[r]})}return Object.create(m(e),t)}{const t=m(e);if(null!==t&&n)return c({},e);const a=Object.create(t);return Object.assign(a,e)}}function w(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return O(e)||_(e)||!h(e)||(b(e)>1&&Object.defineProperties(e,{set:k,add:k,clear:k,delete:k}),Object.freeze(e),t&&Object.values(e).forEach(e=>w(e,!0))),e}var k={value:function(){p(2)}};function O(e){return null===e||"object"!==typeof e||Object.isFrozen(e)}var x,T={};function I(e){const t=T[e];return t||p(0),t}function P(){return x}function M(e,t){t&&(I("Patches"),e.patches_=[],e.inversePatches_=[],e.patchListener_=t)}function L(e){j(e),e.drafts_.forEach(F),e.drafts_=null}function j(e){e===x&&(x=e.parent_)}function U(e){return x={drafts_:[],parent_:x,immer_:e,canAutoFreeze_:!0,unfinalizedDrafts_:0}}function F(e){const t=e[f];0===t.type_||1===t.type_?t.revoke_():t.revoked_=!0}function z(e,t){t.unfinalizedDrafts_=t.drafts_.length;const n=t.drafts_[0];return void 0!==e&&e!==n?(n[f].modified_&&(L(t),p(4)),h(e)&&(e=G(t,e),t.parent_||Y(t,e)),t.patches_&&I("Patches").generateReplacementPatches_(n[f].base_,e,t.patches_,t.inversePatches_)):e=G(t,n,[]),L(t),t.patches_&&t.patchListener_(t.patches_,t.inversePatches_),e!==u?e:void 0}function G(e,t,n){if(O(t))return t;const a=e.immer_.shouldUseStrictIteration(),r=t[f];if(!r)return E(t,(a,i)=>H(e,r,t,a,i,n),a),t;if(r.scope_!==e)return t;if(!r.modified_)return Y(e,r.base_,!0),r.base_;if(!r.finalized_){r.finalized_=!0,r.scope_.unfinalizedDrafts_--;const t=r.copy_;let i=t,l=!1;3===r.type_&&(i=new Set(t),t.clear(),l=!0),E(i,(a,i)=>H(e,r,t,a,i,n,l),a),Y(e,t,!1),n&&e.patches_&&I("Patches").generatePatches_(r,n,e.patches_,e.inversePatches_)}return r.copy_}function H(e,t,n,a,r,i,l){if(null==r)return;if("object"!==typeof r&&!l)return;const o=O(r);if(!o||l){if(_(r)){const l=G(e,r,i&&t&&3!==t.type_&&!C(t.assigned_,a)?i.concat(a):void 0);if(A(n,a,l),!_(l))return;e.canAutoFreeze_=!1}else l&&n.add(r);if(h(r)&&!o){if(!e.immer_.autoFreeze_&&e.unfinalizedDrafts_<1)return;if(t&&t.base_&&t.base_[a]===r&&o)return;G(e,r),t&&t.scope_.parent_||"symbol"===typeof a||!(S(n)?n.has(a):Object.prototype.propertyIsEnumerable.call(n,a))||Y(e,r)}}}function Y(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];!e.parent_&&e.immer_.autoFreeze_&&e.canAutoFreeze_&&w(t,n)}var B={get(e,t){if(t===f)return e;const n=D(e);if(!C(n,t))return function(e,t,n){var a;const r=V(t,n);return r?"value"in r?r.value:null===(a=r.get)||void 0===a?void 0:a.call(e.draft_):void 0}(e,n,t);const a=n[t];return e.finalized_||!h(a)?a:a===q(e.base_,t)?($(e),e.copy_[t]=K(a,e)):a},has:(e,t)=>t in D(e),ownKeys:e=>Reflect.ownKeys(D(e)),set(e,t,n){const a=V(D(e),t);if(null!==a&&void 0!==a&&a.set)return a.set.call(e.draft_,n),!0;if(!e.modified_){const a=q(D(e),t),l=null===a||void 0===a?void 0:a[f];if(l&&l.base_===n)return e.copy_[t]=n,e.assigned_[t]=!1,!0;if(((r=n)===(i=a)?0!==r||1/r===1/i:r!==r&&i!==i)&&(void 0!==n||C(e.base_,t)))return!0;$(e),Q(e)}var r,i;return e.copy_[t]===n&&(void 0!==n||t in e.copy_)||Number.isNaN(n)&&Number.isNaN(e.copy_[t])||(e.copy_[t]=n,e.assigned_[t]=!0),!0},deleteProperty:(e,t)=>(void 0!==q(e.base_,t)||t in e.base_?(e.assigned_[t]=!1,$(e),Q(e)):delete e.assigned_[t],e.copy_&&delete e.copy_[t],!0),getOwnPropertyDescriptor(e,t){const n=D(e),a=Reflect.getOwnPropertyDescriptor(n,t);return a?{writable:!0,configurable:1!==e.type_||"length"!==t,enumerable:a.enumerable,value:n[t]}:a},defineProperty(){p(11)},getPrototypeOf:e=>m(e.base_),setPrototypeOf(){p(12)}},W={};function q(e,t){const n=e[f];return(n?D(n):e)[t]}function V(e,t){if(!(t in e))return;let n=m(e);for(;n;){const e=Object.getOwnPropertyDescriptor(n,t);if(e)return e;n=m(n)}}function Q(e){e.modified_||(e.modified_=!0,e.parent_&&Q(e.parent_))}function $(e){e.copy_||(e.copy_=R(e.base_,e.scope_.immer_.useStrictShallowCopy_))}E(B,(e,t)=>{W[e]=function(){return arguments[0]=arguments[0][0],t.apply(this,arguments)}}),W.deleteProperty=function(e,t){return W.set.call(this,e,t,void 0)},W.set=function(e,t,n){return B.set.call(this,e[0],t,n,e[0])};function K(e,t){const n=S(e)?I("MapSet").proxyMap_(e,t):N(e)?I("MapSet").proxySet_(e,t):function(e,t){const n=Array.isArray(e),a={type_:n?1:0,scope_:t?t.scope_:P(),modified_:!1,finalized_:!1,assigned_:{},parent_:t,base_:e,draft_:null,copy_:null,revoke_:null,isManual_:!1};let r=a,i=B;n&&(r=[a],i=W);const{revoke:l,proxy:o}=Proxy.revocable(r,i);return a.draft_=o,a.revoke_=l,o}(e,t);return(t?t.scope_:P()).drafts_.push(n),n}function X(e){return _(e)||p(10),Z(e)}function Z(e){if(!h(e)||O(e))return e;const t=e[f];let n,a=!0;if(t){if(!t.modified_)return t.base_;t.finalized_=!0,n=R(e,t.scope_.immer_.useStrictShallowCopy_),a=t.scope_.immer_.shouldUseStrictIteration()}else n=R(e,!0);return E(n,(e,t)=>{A(n,e,Z(t))},a),t&&(t.finalized_=!1),n}var J,ee=new class{constructor(e){var t=this;this.autoFreeze_=!0,this.useStrictShallowCopy_=!1,this.useStrictIteration_=!0,this.produce=(e,t,n)=>{if("function"===typeof e&&"function"!==typeof t){const n=t;t=e;const a=this;return function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:n;for(var r=arguments.length,i=new Array(r>1?r-1:0),l=1;l<r;l++)i[l-1]=arguments[l];return a.produce(e,e=>t.call(this,e,...i))}}let a;if("function"!==typeof t&&p(6),void 0!==n&&"function"!==typeof n&&p(7),h(e)){const r=U(this),i=K(e,void 0);let l=!0;try{a=t(i),l=!1}finally{l?L(r):j(r)}return M(r,n),z(a,r)}if(!e||"object"!==typeof e){if(a=t(e),void 0===a&&(a=e),a===u&&(a=void 0),this.autoFreeze_&&w(a,!0),n){const t=[],r=[];I("Patches").generateReplacementPatches_(e,a,t,r),n(t,r)}return a}p(1)},this.produceWithPatches=(e,n)=>{if("function"===typeof e)return function(n){for(var a=arguments.length,r=new Array(a>1?a-1:0),i=1;i<a;i++)r[i-1]=arguments[i];return t.produceWithPatches(n,t=>e(t,...r))};let a,r;return[this.produce(e,n,(e,t)=>{a=e,r=t}),a,r]},"boolean"===typeof(null===e||void 0===e?void 0:e.autoFreeze)&&this.setAutoFreeze(e.autoFreeze),"boolean"===typeof(null===e||void 0===e?void 0:e.useStrictShallowCopy)&&this.setUseStrictShallowCopy(e.useStrictShallowCopy),"boolean"===typeof(null===e||void 0===e?void 0:e.useStrictIteration)&&this.setUseStrictIteration(e.useStrictIteration)}createDraft(e){h(e)||p(8),_(e)&&(e=X(e));const t=U(this),n=K(e,void 0);return n[f].isManual_=!0,j(t),n}finishDraft(e,t){const n=e&&e[f];n&&n.isManual_||p(9);const{scope_:a}=n;return M(a,t),z(void 0,a)}setAutoFreeze(e){this.autoFreeze_=e}setUseStrictShallowCopy(e){this.useStrictShallowCopy_=e}setUseStrictIteration(e){this.useStrictIteration_=e}shouldUseStrictIteration(){return this.useStrictIteration_}applyPatches(e,t){let n;for(n=t.length-1;n>=0;n--){const a=t[n];if(0===a.path.length&&"replace"===a.op){e=a.value;break}}n>-1&&(t=t.slice(n+1));const a=I("Patches").applyPatches_;return _(e)?a(e,t):this.produce(e,e=>a(e,t))}},te=ee.produce;var ne=new Uint8Array(16);function ae(){if(!J&&!(J="undefined"!==typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||"undefined"!==typeof msCrypto&&"function"===typeof msCrypto.getRandomValues&&msCrypto.getRandomValues.bind(msCrypto)))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return J(ne)}const re=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i;const ie=function(e){return"string"===typeof e&&re.test(e)};for(var le=[],oe=0;oe<256;++oe)le.push((oe+256).toString(16).substr(1));const se=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=(le[e[t+0]]+le[e[t+1]]+le[e[t+2]]+le[e[t+3]]+"-"+le[e[t+4]]+le[e[t+5]]+"-"+le[e[t+6]]+le[e[t+7]]+"-"+le[e[t+8]]+le[e[t+9]]+"-"+le[e[t+10]]+le[e[t+11]]+le[e[t+12]]+le[e[t+13]]+le[e[t+14]]+le[e[t+15]]).toLowerCase();if(!ie(n))throw TypeError("Stringified UUID is invalid");return n};const ce=function(e,t,n){var a=(e=e||{}).random||(e.rng||ae)();if(a[6]=15&a[6]|64,a[8]=63&a[8]|128,t){n=n||0;for(var r=0;r<16;++r)t[n+r]=a[r];return t}return se(a)},ue=(e,t)=>c(c({},e),{},{owner:t,instance_id:"".concat(t,"-").concat(e.name,"-").concat(ce()),current_durability:e.durability}),de=e=>{let t,n=e.length;for(;0!==n;)t=Math.floor(Math.random()*n),n--,[e[n],e[t]]=[e[t],e[n]];return e},fe=(e,t)=>{if(!e)return 0;let n=0;return n=e.field.filter(e=>"\u30de\u30cd\u30fc"===e.name).reduce((e,t)=>e+(t.current_durability||0),0),e.scale+n},pe="MULLIGAN",me="START_TURN",_e="PLAYER1",he="PLAYER2",ge=_e,ye=he,ve="\u8ca1",Ee="\u4e8b\u8c61",be="\u30a4\u30c7\u30aa\u30ed\u30ae\u30fc",Ce={CARD_DRAWN:"CARD_DRAWN",CARD_DRAWN_THIS:"CARD_DRAWN_THIS",CARD_DRAWN_OWNER:"CARD_DRAWN_OWNER",CARD_DRAWN_OPPONENT:"CARD_DRAWN_OPPONENT",CARD_PLACED:"CARD_PLACED",CARD_PLACED_THIS:"CARD_PLACED_THIS",CARD_PLACED_OWNER:"CARD_PLACED_OWNER",CARD_PLACED_OPPONENT:"CARD_PLACED_OPPONENT",CARD_DISCARDED:"CARD_DISCARDED",CARD_DISCARDED_THIS:"CARD_DISCARDED_THIS",CARD_DISCARDED_OWNER:"CARD_DISCARDED_OWNER",CARD_DISCARDED_OPPONENT:"CARD_DISCARDED_OPPONENT",CARD_BOUNCED:"CARD_BOUNCED",CARD_BOUNCED_THIS:"CARD_BOUNCED_THIS",CARD_BOUNCED_OWNER:"CARD_BOUNCED_OWNER",CARD_BOUNCED_OPPONENT:"CARD_BOUNCED_OPPONENT",CARD_ADDED_TO_HAND:"CARD_ADDED_TO_HAND",CARD_ADDED_TO_HAND_THIS:"CARD_ADDED_TO_HAND_THIS",CARD_ADDED_TO_HAND_OWNER:"CARD_ADDED_TO_HAND_OWNER",CARD_ADDED_TO_HAND_OPPONENT:"CARD_ADDED_TO_HAND_OPPONENT",PLAY_EVENT:"PLAY_EVENT",PLAY_EVENT_THIS:"PLAY_EVENT_THIS",PLAY_EVENT_OWNER:"PLAY_EVENT_OWNER",PLAY_EVENT_OPPONENT:"PLAY_EVENT_OPPONENT",START_TURN:"START_TURN",START_TURN_OWNER:"START_TURN_OWNER",START_TURN_OPPONENT:"START_TURN_OPPONENT",END_TURN_PHASE:"END_TURN_PHASE",END_TURN_OWNER:"END_TURN_OWNER",END_TURN_OPPONENT:"END_TURN_OPPONENT",WEALTH_DURABILITY_ZERO:"WEALTH_DURABILITY_ZERO",WEALTH_DURABILITY_ZERO_THIS:"WEALTH_DURABILITY_ZERO_THIS",WEALTH_DURABILITY_ZERO_OWNER:"WEALTH_DURABILITY_ZERO_OWNER",WEALTH_DURABILITY_ZERO_OPPONENT:"WEALTH_DURABILITY_ZERO_OPPONENT",DAMAGE_THIS:"DAMAGE_THIS",BOOST_THIS:"BOOST_THIS",PLAYER_PLAY_CARD_ACTION:"PLAYER_PLAY_CARD_ACTION",PLAYER_PLAY_CARD_ACTION_OWNER:"PLAYER_PLAY_CARD_ACTION_OWNER",PLAYER_PLAY_CARD_ACTION_OPPONENT:"PLAYER_PLAY_CARD_ACTION_OPPONENT",MODIFY_CONSCIOUSNESS_INCREASE_RESERVE_OWNER:"MODIFY_CONSCIOUSNESS_INCREASE_RESERVE_OWNER",MODIFY_CONSCIOUSNESS_DECREASE_RESERVE_OWNER:"MODIFY_CONSCIOUSNESS_DECREASE_RESERVE_OWNER",MODIFY_CONSCIOUSNESS_INCREASE_RESERVE_OPPONENT:"MODIFY_CONSCIOUSNESS_INCREASE_RESERVE_OPPONENT",MODIFY_CONSCIOUSNESS_DECREASE_RESERVE_OPPONENT:"MODIFY_CONSCIOUSNESS_DECREASE_RESERVE_OPPONENT",MODIFY_SCALE_INCREASE_RESERVE_OWNER:"MODIFY_SCALE_INCREASE_RESERVE_OWNER",MODIFY_SCALE_DECREASE_RESERVE_OWNER:"MODIFY_SCALE_DECREASE_RESERVE_OWNER",MODIFY_SCALE_INCREASE_RESERVE_OPPONENT:"MODIFY_SCALE_INCREASE_RESERVE_OPPONENT",MODIFY_SCALE_DECREASE_RESERVE_OPPONENT:"MODIFY_SCALE_DECREASE_RESERVE_OPPONENT",MODIFY_CARD_DURABILITY_INCREASE_RESERVE_OWNER:"MODIFY_CARD_DURABILITY_INCREASE_RESERVE_OWNER",MODIFY_CARD_DURABILITY_DECREASE_RESERVE_OWNER:"MODIFY_CARD_DURABILITY_DECREASE_RESERVE_OWNER",MODIFY_CARD_DURABILITY_INCREASE_RESERVE_OPPONENT:"MODIFY_CARD_DURABILITY_INCREASE_RESERVE_OPPONENT",MODIFY_CARD_DURABILITY_DECREASE_RESERVE_OPPONENT:"MODIFY_CARD_DURABILITY_DECREASE_RESERVE_OPPONENT",SUCCESS_PROCESS:"SUCCESS_PROCESS",FAILED_PROCESS:"FAILED_PROCESS"},Ae="PLAYER_ACTION",Se="MODIFY_CONSCIOUSNESS_RESERVE",Ne="MODIFY_SCALE_RESERVE",De="MODIFY_CARD_DURABILITY_RESERVE",Re="MODIFY_CONSCIOUSNESS",we="TURN_START",ke="TURN_END",Oe="GAME_RESULT",xe="TURN_ORDER_DECISION",Te="MODIFY_SCALE",Ie="SET_CONSCIOUSNESS",Pe="SET_SCALE",Me="CONSCIOUSNESS_CHANGED",Le="SCALE_CHANGED",je="CARD_DURABILITY_CHANGED",Ue="MODIFY_FIELD_LIMIT",Fe="ADD_MODIFY_PARAMETER_CORRECTION",ze="MODIFY_CARD_DURABILITY",Ge="MODIFY_CARD_REQUIRED_SCALE",He="ADD_CARD_TO_GAME",Ye="MOVE_CARD",Be="MOVE_CARD_AFTER_ANIMATION",We="TRIGGER_AFTER_ANIMATION",qe="REMOVE_CARD_FROM_GAME",Ve="REORDER_FIELD_CARDS",Qe="DRAW_CARD",$e="SKIP_EFFECT",Ke="CHECK_GAME_OVER",Xe="PROCESS_CARD_OPERATION",Ze="PROCESS_DRAW_RANDOM_CARD_AND_MODIFY_REQUIRED_SCALE",Je="PROCESS_DISCARD_ALL_HAND_WEALTH_CARDS_AND_DRAW",et="PROCESS_MOVE_HAND_WEALTH_TO_DECK_AND_DRAW",tt="PROCESS_CHOOSE_AND_DISCARD_IDEOLOGY",nt="PROCESS_CHOOSE_AND_MOVE_CARD_FROM_PILE",at="PROCESS_CHOOSE_AND_MODIFY_DURABILITY_TO_WEALTH",rt="PROCESS_MONEY_DURABILITY_BASED_COUNT_MODIFY_CARD_DURABILITY",it="PROCESS_CHOOSE_AND_BOUNCE_TO_WEALTH",lt="PROCESS_RETURN_LARGEST_REQUIRED_SCALE_CARD_TO_DECK",ot="PROCESS_DISCARD_ALL_IDEOLOGY_FROM_HAND_AND_DECK",st="PROCESS_ADD_CARD_CONDITIONAL_ON_DECK_COUNT",ct="PROCESS_ADD_CARD_CONDITIONAL",ut="PROCESS_SET_ALL_SCALE_TO_ZERO_AND_REDUCE_CONSCIOUSNESS",dt="PROCESS_ADD_CARDS_BASED_ON_DISCARDED_COUNT",ft="PROCESS_MONEY_CARD_PLACEMENT_EFFECT",pt="PROCESS_MONEY_CARD_TURN_START_EFFECT",mt="PROCESS_ADD_CHOICE_CARD_TO_HAND",_t="PROCESS_DISCARD_ALL_HAND_IDEOLOGY_AND_ADD_MONEY",ht="PROCESS_REDUCE_MONEY_DURABILITY_AND_GAIN_SCALE",gt="PROCESS_MODIFY_MONEY_DURABILITY_RANDOM",yt="PROCESS_ADD_MONEY_TOKEN_BASED_ON_CARDS_PLAYED",vt="PROCESS_ALL_WEALTH_BOOST",Et="PROCESS_COUNTER_ATTACK",bt="PROCESS_DEAL_DAMAGE_TO_ALL_WEALTH",Ct="PROCESS_EXPOSE_CARD_BY_TYPE",At="_PLACE_IDEOLOGY",St="EVENT_EFFECTS_COMPLETE",Nt="EVENT_CARD_PLAYED",Dt="CARD_REVEALED";const Rt=new class{constructor(){this.pendingAnimations=new Set,this.completedAnimations=new Set}setPendingAnimation(e){console.log("\ud83c\udfacANIM [StateManager] Setting pending animation for card:",e),this.pendingAnimations.add(e)}setAnimationCompleted(e){console.log("\ud83c\udfacANIM [StateManager] Animation completed for card:",e),this.pendingAnimations.delete(e),this.completedAnimations.add(e)}isPendingAnimation(e){return this.pendingAnimations.has(e)}isAnimationCompleted(e){return this.completedAnimations.has(e)}clearCardState(e){console.log("\ud83c\udfacANIM [StateManager] Clearing state for card:",e),this.pendingAnimations.delete(e),this.completedAnimations.delete(e)}clearAllStates(){console.log("\ud83c\udfacANIM [StateManager] Clearing all animation states"),this.pendingAnimations.clear(),this.completedAnimations.clear()}getDebugInfo(){return{pending:Array.from(this.pendingAnimations),completed:Array.from(this.completedAnimations)}}};const wt=class{constructor(){this.animationQueue=[],this.isProcessingTransientAnimation=!1,this.activeAnimations=new Set,this.persistentStates=new Map,this.completedCount=0,this.errors=[],this.cardPlayQueue=[],this.isProcessingCardPlay=!1,this.cardDrawQueue=[],this.isProcessingCardDraw=!1,this.animationDependencies=new Map,this.pendingDestroyAnimations=new Map,this.scheduledCardRemovals=new Map,this.activeElementAnimations=new Map,this.systemAnimationQueue=[],this.isProcessingSystemAnimation=!1,this.isGameLocked=!1,this.persistentAnimations=new Map,this.lastGameState=null,this.gameState=null,console.log("\ud83c\udfacANIM [Init] AnimationManager initialized")}setGameState(e){console.log("[DEBUG] AnimationManager.setGameState called."),console.log("[DEBUG] AnimationManager.setGameState received gameState:",e),this.gameState=e,console.log("[DEBUG] AnimationManager.setGameState - this.gameState after set:",this.gameState)}isSystemAnimation(e){return["TURN_ORDER_DECISION","TURN_START","TURN_END","GAME_RESULT"].includes(e)}lockGame(){this.isGameLocked=!0,console.log("\ud83c\udfaeGAME_ANIM [Lock] Game locked - operations disabled")}unlockGame(){this.isGameLocked=!1,console.log("\ud83c\udfaeGAME_ANIM [Lock] Game unlocked - operations enabled")}async triggerTransientEffect(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};console.log("\ud83c\udfaeGAME_ANIM [AnimationManager] *** ANIMATION TRIGGERED ***"),console.log("\ud83c\udfaeGAME_ANIM [AnimationManager] Effect type:",e),console.log("\ud83c\udfaeGAME_ANIM [AnimationManager] Target:",!!t),console.log("\ud83c\udfaeGAME_ANIM [AnimationManager] Params:",n),"CARD_DRAW"===e&&console.log("\ud83d\udd25ANIM_DEBUG [CARD_DRAW_CALL] *** CARD_DRAW ANIMATION CALLED ***"),"CARD_DAMAGE"===e&&console.log("\ud83d\udd25ANIM_DEBUG [CARD_DAMAGE_CALL] *** CARD_DAMAGE ANIMATION CALLED ***"),"CARD_PLAY"===e&&console.log("\ud83d\udd25ANIM_DEBUG [CARD_PLAY_CALL] *** CARD_PLAY ANIMATION CALLED ***");if(!t&&!["CARD_DRAW","TURN_START","TURN_END","GAME_RESULT","TURN_ORDER_DECISION","EVENT_CARD_PLAYED","CARD_REVEALED"].includes(e))return console.warn("\ud83c\udfacANIM [Warning] Target element not found for:",e),{success:!1,error:"Target not found"};const a={id:Date.now()+Math.random(),type:"transient",effectType:e,target:t,params:n,timestamp:Date.now()};return console.log("\ud83c\udfaeGAME_ANIM [AnimationManager] Creating animation object:",a),this.isSystemAnimation(e)?(console.log("\ud83c\udfaeGAME_ANIM [AnimationManager] System animation detected:",e),this.queueSystemAnimation(a)):this.queueTransientAnimation(a)}async queueSystemAnimation(e){return new Promise(t=>{this.systemAnimationQueue.push({animation:e,resolve:t}),console.log("\ud83c\udfaeGAME_ANIM [SystemQueue] System animation queued:",e.effectType,"Queue length:",this.systemAnimationQueue.length),this.processSystemAnimationQueue()})}async queueTransientAnimation(e){return new Promise(t=>{this.animationQueue.push({animation:e,resolve:t}),this.processTransientAnimationQueue()})}async processTransientAnimationQueue(){if(!this.isProcessingTransientAnimation&&0!==this.animationQueue.length){for(this.isProcessingTransientAnimation=!0;this.animationQueue.length>0;){const{animation:n,resolve:a}=this.animationQueue.shift();try{var e;this.executeAnimation(n).then(a);const t=(null===(e=n.params)||void 0===e?void 0:e.delay)>0?n.params.delay:0;t>0&&await new Promise(e=>setTimeout(e,t)),console.log("\ud83c\udfaeGAME_ANIM [AnimationManager] Processing transient animation:",n.effectType,"Remaining in queue:",this.animationQueue.length,"delay:",t)}catch(t){console.error("Error processing transient animation:",t),a({success:!1,error:t.message})}}this.isProcessingTransientAnimation=!1}}async processSystemAnimationQueue(){if(this.isProcessingSystemAnimation)console.log("\ud83c\udfaeGAME_ANIM [SystemQueue] Already processing system animation queue");else if(0!==this.systemAnimationQueue.length){for(this.isProcessingSystemAnimation=!0,console.log("\ud83c\udfaeGAME_ANIM [SystemQueue] Starting to process system animation queue"),this.lockGame();this.systemAnimationQueue.length>0;){const{animation:n,resolve:a}=this.systemAnimationQueue.shift();console.log("\ud83c\udfaeGAME_ANIM [SystemQueue] Processing system animation:",n.effectType,"Remaining in queue:",this.systemAnimationQueue.length);try{var e;this.executeAnimation(n).then(a);const t=(null===(e=n.params)||void 0===e?void 0:e.delay)>0?n.params.delay:0;t>0&&await new Promise(e=>setTimeout(e,t))}catch(t){console.error("\ud83c\udfaeGAME_ANIM [SystemQueue] Error processing system animation:",t),a({success:!1,error:t.message})}}this.isProcessingSystemAnimation=!1,console.log("\ud83c\udfaeGAME_ANIM [SystemQueue] Finished processing system animation queue"),this.unlockGame(),console.log("\ud83c\udfaeGAME_ANIM [SystemQueue] Triggering state update for NPC action"),window.dispatchEvent(new CustomEvent("systemAnimationComplete",{detail:{isGameLocked:this.isGameLocked,lastUpdate:Date.now()}}))}else console.log("\ud83c\udfaeGAME_ANIM [SystemQueue] System animation queue is empty")}async executeAnimation(e){console.log("\ud83c\udfaeGAME_ANIM [AnimationManager] executeAnimation method entered"),console.log("\ud83c\udfaeGAME_ANIM [AnimationManager] Animation object:",e);const{effectType:t,target:n,params:a}=e;let r;console.log("\ud83c\udfaeGAME_ANIM [AnimationManager] executeAnimation called with:",t),console.log("\ud83c\udfaeGAME_ANIM [AnimationManager] Animation params:",a),this.activeAnimations.add(e.id),console.log("\ud83d\udd25ANIM_DEBUG [Execute] Starting animation:",t);try{switch(t){case"CARD_PLAY":console.log("\ud83d\udd25ANIM_DEBUG [Execute] *** EXECUTING CARD_PLAY ANIMATION ***"),r=await this.queueCardPlayAnimation(n,a),console.log("\ud83d\udd25ANIM_DEBUG [Execute] *** CARD_PLAY ANIMATION RESULT ***",r);break;case"EVENT_CARD_PLAYED":r=await this.animateEventCardPlay(n,a);break;case"CARD_REVEALED":r=await this.animateCardReveal(n,a);break;case"CARD_DRAW":console.log("\ud83c\udfacANIM [Execute] CARD_DRAW case reached in executeAnimation!"),r=await this.queueCardDrawAnimation(n,a);break;case"CARD_MOVE":r=await this.animateCardMove(n,a);break;case"TURN_START":console.log("\ud83c\udfaeGAME_ANIM [AnimationManager] Executing TURN_START case"),r=await this.animateTurnStart(a.playerName,a.turnNumber);break;case"TURN_END":console.log("\ud83c\udfaeGAME_ANIM [AnimationManager] Executing TURN_END case"),r=await this.animateTurnEnd(a.playerName);break;case"GAME_RESULT":console.log("\ud83c\udfaeGAME_ANIM [AnimationManager] Executing GAME_RESULT case"),r=await this.animateGameResult(a.isVictory,a.message);break;case"TURN_ORDER_DECISION":console.log("\ud83c\udfaeGAME_ANIM [AnimationManager] Executing TURN_ORDER_DECISION case"),console.log("\ud83c\udfaeGAME_ANIM [AnimationManager] Params:",a),r=await this.animateTurnOrderDecision(a.firstPlayer,a.secondPlayer);break;case"CARD_DAMAGE":const e=this.getCardDamageAmount(a);console.log("\ud83c\udfacANIM [Execute] *** CARD DAMAGE/HEAL DECISION ***"),console.log("\ud83c\udfacANIM [Execute] Durability change amount:",e),console.log("\ud83c\udfacANIM [Execute] Is heal (positive change)?",e>0),console.log("\ud83c\udfacANIM [Execute] Is damage (negative change)?",e<0),e>0?(console.log("\ud83c\udfacANIM [Execute] Executing HEAL animation (durability increased)"),r=await this.animateCardHeal(n,a)):e<0?(console.log("\ud83c\udfacANIM [Execute] Executing DAMAGE animation (durability decreased)"),r=await this.animateCardDamage(n,a)):(console.log("\ud83c\udfacANIM [Execute] Durability change is 0, skipping animation"),r={success:!1,reason:"No durability change"});break;case"CARD_DESTROY":case"CARD_DISCARD":r=await this.animateCardDestroy(n,a);break;case"CARD_HEAL":r=await this.animateCardHeal(n,a);break;case"CONSCIOUSNESS_CHANGE_RESULT":case"SCALE_CHANGE_RESULT":console.log("\ud83d\udd25ANIM_DEBUG [Execute] *** EXECUTING RESOURCE CHANGE ANIMATION ***"),r=await this.animateResourceChange(n,a,t),console.log("\ud83d\udd25ANIM_DEBUG [Execute] *** RESOURCE CHANGE ANIMATION RESULT ***",r);break;case"LIMIT_WARNING":console.log("\ud83c\udfaeGAME_ANIM [AnimationManager] Executing LIMIT_WARNING case"),r=await this.animateLimitWarning(n,a.limitType);break;case"EFFECT_NULLIFIED":console.log("\ud83c\udfaeGAME_ANIM [AnimationManager] Executing EFFECT_NULLIFIED case"),r=await this.animateEffectNullified(n);break;default:console.warn("\ud83c\udfacANIM [Warning] Unknown effect type:",t),r={success:!1,error:"Unknown effect type"}}}catch(i){console.error("\ud83c\udfacANIM [Error] Animation execution failed:",t,i),r={success:!1,error:i.message}}return this.activeAnimations.delete(e.id),this.completedCount++,console.log("\ud83c\udfacANIM [Complete] Animation completed:",t,"Total completed:",this.completedCount),r}async testAnimation(e){return console.log("\ud83c\udfacANIM [Test] Running test animation"),e?new Promise(t=>{const n=e.style.backgroundColor;e.style.backgroundColor="#ff0000",e.style.transition="background-color 0.5s",setTimeout(()=>{e.style.backgroundColor=n,t({success:!0,message:"Test animation completed"})},1e3)}):{success:!1,error:"No target element"}}async queueCardDrawAnimation(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return new Promise(n=>{this.cardDrawQueue.push({target:e,params:t,resolve:n,timestamp:Date.now()}),console.log("\ud83c\udfacANIM [Queue] Card draw animation queued. Queue length:",this.cardDrawQueue.length),this.processCardDrawQueue()})}async queueCardPlayAnimation(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return new Promise(n=>{this.cardPlayQueue.push({target:e,params:t,resolve:n,timestamp:Date.now()}),console.log("\ud83c\udfacANIM [Queue] Card play animation queued. Queue length:",this.cardPlayQueue.length),this.processCardPlayQueue()})}async processCardDrawQueue(){if(console.log("\ud83c\udfacANIM [Queue] processCardDrawQueue called!"),this.isProcessingCardDraw)return void console.log("\ud83c\udfacANIM [Queue] Already processing card draw queue");if(0===this.cardDrawQueue.length)return void console.log("\ud83c\udfacANIM [Queue] Card draw queue is empty");this.isProcessingCardDraw=!0,console.log("\ud83c\udfacANIM [Queue] Starting to process card draw queue");let e=0;for(;this.cardDrawQueue.length>0;){const a=this.cardDrawQueue.shift();console.log("\ud83c\udfacANIM [Queue] Processing draw animation. Remaining in queue:",this.cardDrawQueue.length),e>0&&(console.log("\ud83c\udfacANIM [Queue] Delaying draw animation by",100*e,"ms"),await new Promise(t=>setTimeout(t,100*e)));try{var t;const e=await this.animateCardDraw(a.target,a.params),n=(null===(t=a.params)||void 0===t?void 0:t.delay)>0?a.params.delay:0;n>0&&await new Promise(e=>setTimeout(e,n)),a.resolve(e)}catch(n){console.error("\ud83c\udfacANIM [Queue] Error processing draw animation:",n),a.resolve({success:!1,error:n.message})}e++}this.isProcessingCardDraw=!1,console.log("\ud83c\udfacANIM [Queue] Finished processing card draw queue")}async processCardPlayQueue(){if(this.isProcessingCardPlay)console.log("\ud83c\udfacANIM [Queue] Already processing card play queue");else if(0!==this.cardPlayQueue.length){for(this.isProcessingCardPlay=!0,console.log("\ud83c\udfacANIM [Queue] Starting to process card play queue");this.cardPlayQueue.length>0;){const n=this.cardPlayQueue.shift();console.log("\ud83c\udfacANIM [Queue] Processing animation. Remaining in queue:",this.cardPlayQueue.length);try{var e;const t=await this.animateCardPlay(n.target,n.params),a=(null===(e=n.params)||void 0===e?void 0:e.delay)>0?n.params.delay:0;a>0&&await new Promise(e=>setTimeout(e,a)),n.resolve(t)}catch(t){console.error("\ud83c\udfacANIM [Queue] Error processing animation:",t),n.resolve({success:!1,error:t.message})}}this.isProcessingCardPlay=!1,console.log("\ud83c\udfacANIM [Queue] Finished processing card play queue")}else console.log("\ud83c\udfacANIM [Queue] Card play queue is empty")}async animateCardPlay(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return console.log("\ud83d\udd25ANIM_DEBUG [CardPlay] Target element:",e),new Promise(n=>{var a,r,i,l,o,s,c;if(!e)return console.warn("\ud83c\udfacANIM [CardPlay] Target element not found, skipping animation"),console.warn("\ud83c\udfacANIM [CardPlay] Effect args:",null===(i=t.effect)||void 0===i?void 0:i.args),console.warn("\ud83c\udfacANIM [CardPlay] Player ID:",null===(l=t.effect)||void 0===l||null===(o=l.args)||void 0===o?void 0:o.player_id),console.warn("\ud83c\udfacANIM [CardPlay] Card ID:",null===(s=t.effect)||void 0===s||null===(c=s.args)||void 0===c?void 0:c.card_id),void n({success:!1,reason:"Element not found"});if(!e.offsetParent&&"fixed"!==e.style.position)return console.warn("\ud83c\udfacANIM [CardPlay] Target element not visible and not in animation, skipping animation"),void n({success:!1,reason:"Element not visible"});const u=(null===(a=t.effect)||void 0===a||null===(r=a.args)||void 0===r?void 0:r.player_id)||null;console.log("\ud83c\udfacANIM [CardPlay] Player ID from params:",u),console.log("\ud83c\udfacANIM [CardPlay] Full params:",t);const d=this.getFieldCenter(e,u||null);let f=d.x,p=d.y+100;console.log("\ud83d\udd25ANIM_DEBUG [CardPlay] Initial final position:",{x:f,y:p}),console.log("\ud83d\udd25ANIM_DEBUG [CardPlay] Field center:",d),e.classList.add("card-animation-hidden"),e.style.visibility="hidden",e.offsetHeight;const m=e.cloneNode(!0);m.id="animation-card-"+Date.now(),console.log("\ud83d\udd25ANIM_DEBUG [CardPlay] Creating clone element"),console.log("\ud83d\udd25ANIM_DEBUG [CardPlay] Field center:",d),console.log("\ud83d\udd25ANIM_DEBUG [CardPlay] Clone ID:",m.id),m.classList.remove("card-animation-hidden"),m.classList.add("card-animation-clone"),m.style.position="fixed",m.style.top=d.y+"px",m.style.left=d.x+"px",m.style.transform="translate(-50%, -50%) scale(2.0)",m.style.transition="all 0.15s cubic-bezier(0.25, 0.46, 0.45, 0.94)",m.style.zIndex="9999",m.style.visibility="visible",m.style.opacity="1",console.log("\ud83d\udd25ANIM_DEBUG [CardPlay] Clone styles set:",m.style.cssText),document.body.appendChild(m),console.log("\ud83d\udd25ANIM_DEBUG [CardPlay] Clone added to DOM"),console.log("\ud83c\udfacANIM [CardPlay] Clone created and added to DOM:",m),console.log("\ud83c\udfacANIM [CardPlay] Clone styles:",m.style.cssText),console.log("\ud83c\udfacANIM [CardPlay] Phase 1: Animation with cloned card"),setTimeout(()=>{console.log("\ud83c\udfacANIM [CardPlay] Phase 1.5: Wait at field center"),setTimeout(()=>{const t=e.getBoundingClientRect();let a=t.left+t.width/2,r=t.top+t.height/2;(a<=0||r<=0||!isFinite(a)||!isFinite(r))&&(console.warn("\ud83d\udd25ANIM_DEBUG [CardPlay] Invalid coordinates detected, using field center"),a=d.x,r=d.y+50),console.log("\ud83d\udd25ANIM_DEBUG [CardPlay] Phase 2: Move to accurate final position"),console.log("\ud83d\udd25ANIM_DEBUG [CardPlay] Updated rect:",t),console.log("\ud83d\udd25ANIM_DEBUG [CardPlay] Accurate coordinates:",{x:a,y:r}),m.style.transition="all 0.4s cubic-bezier(0.25, 0.46, 0.45, 0.94)",m.style.transform="translate(-50%, -50%) scale(1.0)",m.style.top=r+"px",m.style.left=a+"px",setTimeout(()=>{console.log("\ud83c\udfacANIM [CardPlay] Phase 3: Fine vibration effect"),m.style.transition="transform 0.05s ease-in-out";let t=0;const a=1.5,r=()=>{if(t>=6){console.log("\ud83c\udfacANIM [CardPlay] Phase 4: Remove clone and show original"),document.body.removeChild(m);const t=e.style.transition;e.style.transition="none",e.classList.remove("card-animation-hidden"),e.style.visibility="",e.style.opacity="",e.style.transform="scale(1.0)",setTimeout(()=>{e.style.transition=t},50);const a=e.dataset.cardId;if(a){const e=document.getElementById("hide-".concat(a));e&&(e.remove(),console.log("\ud83d\udd25ANIM_DEBUG [CardPlay] Removed CSS hiding rule for:",a)),Rt.setAnimationCompleted(a)}return a&&Rt.setAnimationCompleted(a),console.log("\ud83d\udd25ANIM_DEBUG [CardPlay] Animation completed"),void n({success:!0,duration:1250})}const i=t%2===0?a:-1.5,l=t%2===0?a:-1.5;m.style.transform="translate(calc(-50% + ".concat(i,"px), calc(-50% + ").concat(l,"px)) scale(1.0)"),t++,setTimeout(r,35)};r()},400)},500)},150)})}async animateEventCardPlay(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return console.log("[DEBUG] animateEventCardPlay: Start"),new Promise(n=>{var a,r;let i;if(e)console.log("[DEBUG] animateEventCardPlay: Target found, cloning."),i=e.cloneNode(!0),i.classList.remove("card-animation-hidden");else{var l,o,s;console.log("[DEBUG] animateEventCardPlay: Target is null, creating virtual card.");const e=null===(l=t.effect)||void 0===l||null===(o=l.args)||void 0===o?void 0:o.card_id,a=null===(s=this.gameState)||void 0===s?void 0:s.all_card_instances[e];var c;if(!a||!a.name||!this.gameState||!this.gameState.cardDefs)return console.log("[DEBUG] animateEventCardPlay: Aborting virtual card creation due to missing data."),console.log("[DEBUG]   cardId: ".concat(e)),console.log("[DEBUG]   cardInstance: ".concat(a?JSON.stringify(a):"null/undefined")),console.log("[DEBUG]   cardInstance.name: ".concat(null===a||void 0===a?void 0:a.name)),console.log("[DEBUG]   this.gameState: ".concat(this.gameState?"exists":"null/undefined")),console.log("[DEBUG]   this.gameState.cardDefs: ".concat(null!==(c=this.gameState)&&void 0!==c&&c.cardDefs?"exists":"null/undefined")),void n({success:!1,reason:"Missing data for virtual card"});const r=this.gameState.cardDefs[a.name];if(!r)return console.log("[DEBUG] animateEventCardPlay: Card data not found for name: ".concat(a.name)),void n({success:!1,reason:"Card definition not found"});i=document.createElement("div"),i.className="card-game card-type-".concat(r.card_type),i.innerHTML='\n                    <div class="card-header">\n                      <div class="card-name">'.concat(r.name,'</div>\n                    </div>\n                    <div class="card-center"></div>\n                    <div class="card-footer">\n                      <div class="card-cost">\u898f\u6a21: ').concat(r.required_scale,"</div>\n                    </div>\n                "),console.log("[DEBUG] animateEventCardPlay: Virtual card created for ".concat(r.name))}const u=(null===(a=t.effect)||void 0===a||null===(r=a.args)||void 0===r?void 0:r.player_id)||null,d=this.getFieldCenter(e,u);console.log("[DEBUG] animateEventCardPlay: Field center calculated:",d),i.classList.add("card-animation-clone"),i.style.position="fixed",i.style.top="".concat(d.y,"px"),i.style.left="".concat(d.x+150,"px"),i.style.transform="translate(-50%, -50%) scale(1.5)",i.style.transition="all 0.3s ease-out",i.style.zIndex="9999",document.body.appendChild(i),console.log("[DEBUG] animateEventCardPlay: Cloned/virtual card appended to body."),setTimeout(()=>{console.log("[DEBUG] animateEventCardPlay: Creating particle explosion."),this.createParticleExplosion(i,"\u4e8b\u8c61"),setTimeout(()=>{console.log("[DEBUG] animateEventCardPlay: Fading out card."),i.style.transition="opacity 0.5s ease-out",i.style.opacity="0",setTimeout(()=>{console.log("[DEBUG] animateEventCardPlay: Removing card from DOM."),i.parentNode&&document.body.removeChild(i),n({success:!0,duration:800})},500)},300)},100)})}async animateCardReveal(e){var t,n,a,r;let i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const l=null===(t=i.effect)||void 0===t||null===(n=t.args)||void 0===n?void 0:n.card_id,o=null===(a=this.gameState)||void 0===a?void 0:a.all_card_instances[l],s=o?null===(r=this.gameState)||void 0===r?void 0:r.cardDefs[o.name]:null;return new Promise(e=>{var t,n;if(!o||!o.name||!this.gameState||!this.gameState.cardDefs||!s)return void e({success:!1,reason:"Missing data for virtual card"});const a=document.createElement("div");a.className="card-game card-type-".concat(s.card_type),a.innerHTML='\n                <div class="card-header">\n                  <div class="card-name">'.concat(s.name,'</div>\n                </div>\n                <div class="card-center"></div>\n                <div class="card-footer">\n                  <div class="card-cost">\u898f\u6a21: ').concat(s.required_scale,"</div>\n                </div>\n            ");const r=(null===(t=i.effect)||void 0===t||null===(n=t.args)||void 0===n?void 0:n.player_id)||null,l=this.getFieldCenter(null,r),c="".concat("PLAYER1"===r?l.y+100:l.y-100,"px");a.classList.add("card-animation-clone"),a.style.position="fixed",a.style.top=c,a.style.left="".concat(l.x,"px"),a.style.transform="translate(-50%, -50%) scale(1.5)",a.style.zIndex="9999",a.style.opacity="0",a.style.transition="all 0.8s ease-in-out",document.body.appendChild(a),setTimeout(()=>{a.style.top="".concat(l.y,"px"),a.style.opacity="1"},100),setTimeout(()=>{this.createParticleExplosion(a,s.card_type),setTimeout(()=>{const t="PLAYER1"===r?"150%":"-150%";a.style.transition="opacity 0.8s ease-in-out, top 0.8s ease-in-out",a.style.opacity="0",a.style.top=t,setTimeout(()=>{a.parentNode&&document.body.removeChild(a),e({success:!0,duration:2600})},800)},1e3)},800)})}getFieldCenter(e,t){let n=null;if(t){e&&(e.closest(".ideology-area")||e.classList.contains("card-type-\u30a4\u30c7\u30aa\u30ed\u30ae\u30fc"))?"PLAYER1"===t?n=document.querySelector(".player-ideology-area")||document.querySelector(".player-field-area"):"PLAYER2"===t&&(n=document.querySelector(".opponent-ideology-area")||document.querySelector(".opponent-field-area")):"PLAYER1"===t?n=document.querySelector(".player-field-area .wealth-cards-scrollable"):"PLAYER2"===t&&(n=document.querySelector(".opponent-field-area .wealth-cards-scrollable"))}if(!n&&e&&(n=e.closest(".player-field-area, .opponent-field-area"),n&&(n=n.querySelector(".wealth-cards-scrollable"))),!n&&e&&(n=e.closest(".wealth-cards-scrollable")),!n)return console.warn("\ud83c\udfacANIM [CardPlay] Could not find field element, using screen center"),{x:window.innerWidth/2,y:window.innerHeight/2};const a=n.getBoundingClientRect(),r=a.left+a.width/2,i=a.top+a.height/2;return console.log("\ud83c\udfacANIM [CardPlay] Field element:",n),console.log("\ud83c\udfacANIM [CardPlay] Field rect:",a),console.log("\ud83c\udfacANIM [CardPlay] Player ID:",t),{x:r,y:i}}async animateCardDraw(e){var t;let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return console.log("\ud83c\udfacANIM [CardDraw] animateCardDraw called!"),console.log("\ud83c\udfacANIM [CardDraw] *** STARTING CARD DRAW ANIMATION ***"),console.log("\ud83c\udfacANIM [CardDraw] Target element:",e),console.log("\ud83c\udfacANIM [CardDraw] Effect type from params:",null===(t=n.effect)||void 0===t?void 0:t.effect_type),new Promise(t=>{if(!e)return console.log("\ud83c\udfacANIM [CardDraw] *** EXECUTING VIRTUAL CARD DRAW ANIMATION ***"),console.log("\ud83c\udfacANIM [CardDraw] Virtual animation params:",n),void this.executeVirtualCardDraw(n,t);e.classList.add("card-animation-hidden"),e.offsetHeight;const a=e.getBoundingClientRect(),r=a.left+a.width/2,i=a.top+a.height/2;console.log("\ud83c\udfacANIM [CardDraw] Final position:",{x:r,y:i});const l=e.cloneNode(!0);l.id="animation-card-draw-"+Date.now(),l.classList.remove("card-animation-hidden"),l.classList.add("card-animation-clone"),l.style.position="fixed",l.style.top=i+"px",l.style.left=window.innerWidth+100+"px",l.style.transform="translate(-50%, -50%)",l.style.transition="all 0.5s cubic-bezier(0.25, 0.46, 0.45, 0.94)",l.style.zIndex="9999",document.body.appendChild(l),console.log("\ud83c\udfacANIM [CardDraw] Clone created and positioned at screen right"),setTimeout(()=>{console.log("\ud83c\udfacANIM [CardDraw] Starting slide-in animation"),l.style.left=r+"px",setTimeout(()=>{document.body.removeChild(l),e.classList.remove("card-animation-hidden");const n=e.dataset.cardId;n&&Rt.setAnimationCompleted(n),this.restoreAllCardVisibility(),console.log("\ud83c\udfacANIM [CardDraw] Animation completed"),t({success:!0,duration:550})},500)},50)})}executeVirtualCardDraw(e,t){var n,a,r;console.log("executeVirtualCardDraw called!"),console.log("\ud83c\udfacANIM [CardDraw] Executing virtual draw animation");const i=null===(n=e.effect)||void 0===n||null===(a=n.args)||void 0===a?void 0:a.player_id;let l,o,s;if(console.log("\ud83c\udfacANIM [CardDraw] *** Player ID for draw:",i,"***"),console.log("\ud83c\udfacANIM [CardDraw] Full effect args:",null===(r=e.effect)||void 0===r?void 0:r.args),"PLAYER2"===i){console.log("\ud83c\udfacANIM [CardDraw] *** NPC DRAW DETECTED ***");const e=document.querySelector(".opponent-info");if(e){const t=e.getBoundingClientRect();o=window.innerWidth-100,s=t.bottom+30,console.log("\ud83c\udfacANIM [CardDraw] *** NPC finalX:",o,"window.innerWidth:",window.innerWidth,"***")}else console.warn("\ud83c\udfacANIM [CardDraw] NPC info area not found, using screen top"),o=window.innerWidth-100,s=100,console.log("\ud83c\udfacANIM [CardDraw] NPC finalX (fallback):",o,"window.innerWidth:",window.innerWidth)}else{if(l=document.querySelector(".player-hand-area"),console.log("\ud83c\udfacANIM [CardDraw] Player hand area element:",l),!l)return console.warn("\ud83c\udfacANIM [CardDraw] Player hand area not found"),void t({success:!1,reason:"Player hand area not found"});const e=l.getBoundingClientRect();console.log("\ud83c\udfacANIM [CardDraw] Player hand area rect:",e),o=window.innerWidth-100,s=e.top+e.height/2,console.log("\ud83c\udfacANIM [CardDraw] Player finalX:",o,"window.innerWidth:",window.innerWidth),console.log("\ud83c\udfacANIM [CardDraw] Player finalY:",s)}const c=document.createElement("div");c.className="card-game card-type-\u8ca1 card-animation-clone",c.style.position="fixed",c.style.backgroundColor="#f0f0f0",c.style.border="2px solid #ccc",c.style.borderRadius="8px",c.style.display="flex",c.style.alignItems="center",c.style.justifyContent="center",c.style.fontSize="12px",c.style.color="#666",c.textContent="\u30c9\u30ed\u30fc";const u=window.innerWidth+100;c.style.top=s+"px",c.style.left=u+"px",c.style.transform="translate(-50%, -50%)",c.style.transition="all 0.3s cubic-bezier(0.25, 0.46, 0.45, 0.94)",c.style.zIndex="9999",document.body.appendChild(c),console.log("\ud83c\udfacANIM [CardDraw] Virtual card element created and appended to body:",c),console.log("\ud83c\udfacANIM [CardDraw] Virtual card initial style:",c.style.cssText),setTimeout(()=>{console.log("\ud83c\udfacANIM [CardDraw] Starting virtual slide-in animation"),c.style.left=o+"px",setTimeout(()=>{document.body.removeChild(c),this.restoreAllCardVisibility(),console.log("\ud83c\udfacANIM [CardDraw] Virtual animation completed"),t({success:!0,duration:350})},300)},50)}async animateCardMove(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return console.log("\ud83c\udfacANIM [CardMove] Starting card move animation"),await this.animateCardPlay(e,t)}async animateCardDestroy(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return console.log("\ud83c\udfacANIM [CardDestroy] Starting card destroy animation"),console.log("\ud83c\udfacANIM [CardDestroy] Target element:",e),console.log("\ud83c\udfacANIM [CardDestroy] Params:",t),new Promise(n=>{if(!e)return console.warn("\ud83c\udfacANIM [CardDestroy] Target element not found"),void n({success:!1,reason:"Element not found"});const a=this.getCardTypeFromElement(e,t);console.log("\ud83c\udfacANIM [CardDestroy] Card type:",a),e.classList.add("card-destroy-animation"),"\u4e8b\u8c61"!==a&&this.createParticleExplosion(e,a),setTimeout(()=>{e.classList.remove("card-destroy-animation"),e.style.visibility="hidden",e.style.opacity="0";e.dataset.cardId;console.log("\ud83c\udfacANIM [CardDestroy] Animation completed, card hidden"),n({success:!0,duration:600})},600)})}async animateCardHeal(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return console.log("\ud83c\udfacANIM [CardHeal] Starting card heal animation"),console.log("\ud83c\udfacANIM [CardHeal] Target:",e),console.log("\ud83c\udfacANIM [CardHeal] Params:",t),new Promise(t=>{if(!e)return console.warn("\ud83c\udfacANIM [CardHeal] Target element not found"),void t({success:!1,reason:"Element not found"});const n=e.dataset.cardId,a="card-".concat(n);if(this.activeElementAnimations.has(a)){console.log("\ud83c\udfacANIM [CardHeal] Animation already running for card, extending duration:",n);const e=this.activeElementAnimations.get(a);if(e&&"heal"===e.type)return void t({success:!0,reason:"Extended existing animation"})}this.activeElementAnimations.set(a,{type:"heal"}),e.classList.remove("card-damage-animation","card-heal-animation"),console.log("\ud83c\udfacANIM [CardHeal] *** EXECUTING HEAL ANIMATION ***"),e.classList.add("card-heal-animation"),setTimeout(()=>{e.classList.remove("card-heal-animation"),this.activeElementAnimations.delete(a),this.restoreAllCardVisibility(),console.log("\ud83c\udfacANIM [CardHeal] Animation completed"),t({success:!0,duration:800})},800)})}async animateCardDamage(e){return new Promise(t=>{if(!e)return void t({success:!1,reason:"Element not found"});const n=e.dataset.cardId,a="card-".concat(n);if(this.activeElementAnimations.has(a)){const e=this.activeElementAnimations.get(a);if(e&&"damage"===e.type)return void t({success:!0,reason:"Extended existing animation"})}this.activeElementAnimations.set(a,{type:"damage"}),e.classList.remove("card-damage-animation","card-heal-animation"),e.classList.add("card-damage-animation"),setTimeout(()=>{var n;e.classList.remove("card-damage-animation"),this.activeElementAnimations.delete(a);const r=null===(n=e.dataset)||void 0===n?void 0:n.cardId;r&&this.markCardAnimationCompleted(r,"CARD_DAMAGE"),this.restoreAllCardVisibility(),t({success:!0,duration:800})},800)})}getCardDamageAmount(e){var t,n,a,r,i,l,o,s;return void 0!==(null===(t=e.effect)||void 0===t||null===(n=t.args)||void 0===n?void 0:n.amount)?e.effect.args.amount:void 0!==(null===(a=e.effect)||void 0===a||null===(r=a.args)||void 0===r?void 0:r.durability_change)?e.effect.args.durability_change:void 0!==(null===(i=e.effect)||void 0===i||null===(l=i.args)||void 0===l?void 0:l.original_amount)?e.effect.args.original_amount:void 0!==(null===(o=e.effect)||void 0===o||null===(s=o.args)||void 0===s?void 0:s.actual_amount)?e.effect.args.actual_amount:-1}getCardTypeFromElement(e,t){var n,a;if(e.classList.contains("card-type-\u8ca1"))return"\u8ca1";if(e.classList.contains("card-type-\u30a4\u30c7\u30aa\u30ed\u30ae\u30fc"))return"\u30a4\u30c7\u30aa\u30ed\u30ae\u30fc";if(e.classList.contains("card-type-\u4e8b\u8c61"))return"\u4e8b\u8c61";const r=e.dataset.cardType;if(r)return r;if(null!==(n=t.effect)&&void 0!==n&&null!==(a=n.args)&&void 0!==a&&a.card_type)return t.effect.args.card_type;const i=e.querySelector(".card-name");if(i){const e=i.textContent;if(e.includes("\u8ca1")||e.includes("\u8cc7\u6e90"))return"\u8ca1";if(e.includes("\u4e3b\u7fa9")||e.includes("\u601d\u60f3"))return"\u30a4\u30c7\u30aa\u30ed\u30ae\u30fc"}return console.warn("\ud83c\udfacANIM [CardDestroy] Could not determine card type, defaulting to \u8ca1"),"\u8ca1"}createParticleExplosion(e,t){console.log("\ud83c\udfacANIM [Particle] Creating particle explosion for card type:",t);const n=e.getBoundingClientRect(),a=n.left+n.width/2,r=n.top+n.height/2,i="\u8ca1"===t?"particle-wealth":"\u4e8b\u8c61"===t?"particle-event":"particle-ideology";for(let l=0;l<12;l++){const e=document.createElement("div");e.className="particle ".concat(i);const t=l/12*2*Math.PI,n=60+40*Math.random(),o=.8+.4*Math.random();e.style.left=a+"px",e.style.top=r+"px",e.style.position="fixed",e.style.pointerEvents="none",e.style.zIndex="9999",e.style.transform="translate(-50%, -50%) scale(0.2)",e.style.opacity="0.9",e.style.transition="all 0.8s cubic-bezier(0.25, 0.46, 0.45, 0.94)",e.style.animation="none",document.body.appendChild(e),setTimeout(()=>{const i=a+Math.cos(t)*n,l=r+Math.sin(t)*n;e.style.left=i+"px",e.style.top=l+"px",e.style.transform="translate(-50%, -50%) scale(".concat(o,")"),e.style.opacity="0"},50),setTimeout(()=>{e.parentNode&&document.body.removeChild(e)},900)}console.log("\ud83c\udfacANIM [Particle] Created",12,"particles")}async animateResourceChange(e,t,n){return console.log("\ud83d\udd25ANIM_DEBUG [ResourceChange] Starting resource change animation:",n),console.log("\ud83d\udd25ANIM_DEBUG [ResourceChange] Target element:",e),console.log("\ud83d\udd25ANIM_DEBUG [ResourceChange] Params:",t),new Promise(a=>{if(!e)return console.warn("\ud83c\udfacANIM [ResourceChange] Target element not found"),void a({success:!1,reason:"Element not found"});const r=this.getElementKey(e);if(this.activeElementAnimations.has(r))return console.log("\ud83c\udfacANIM [ResourceChange] Animation already running for element, skipping:",r),void a({success:!1,reason:"Animation already running"});const i=this.getResourceChangeAmount(t,n);if(0===i)return console.log("\ud83c\udfacANIM [ResourceChange] Change amount is 0, skipping animation"),void a({success:!1,reason:"No change"});const l=i>0;console.log("\ud83c\udfacANIM [ResourceChange] *** RESOURCE CHANGE ANIMATION ***"),console.log("\ud83c\udfacANIM [ResourceChange] Effect type:",n),console.log("\ud83c\udfacANIM [ResourceChange] Change amount:",i),console.log("\ud83c\udfacANIM [ResourceChange] Is increase?",l),console.log("\ud83c\udfacANIM [ResourceChange] Will use animation class:",l?"resource-increase-animation":"resource-decrease-animation"),this.activeElementAnimations.set(r,{effectType:n,changeAmount:i,isIncrease:l}),e.classList.remove("resource-increase-animation","resource-decrease-animation");const o=l?"resource-increase-animation":"resource-decrease-animation";e.classList.add(o),this.showResourceChangeIndicator(e,i,l),setTimeout(()=>{e.classList.remove(o),this.activeElementAnimations.delete(r),this.restoreAllCardVisibility(),console.log("\ud83c\udfacANIM [ResourceChange] Animation completed"),a({success:!0,duration:800})},800)})}getElementKey(e){const t=e.closest("[data-player-id]"),n=t?t.dataset.playerId:"unknown",a=e.closest(".consciousness")?"consciousness":e.closest(".scale")?"scale":"unknown";return"".concat(n,"-").concat(a)}getResourceChangeAmount(e,t){var n;const a=(null===(n=e.effect)||void 0===n?void 0:n.args)||{};return console.log("\ud83d\udd25ANIM_DEBUG [ResourceChange] Getting change amount from args:",a),void 0!==a.amount?(console.log("\ud83d\udd25ANIM_DEBUG [ResourceChange] Using amount:",a.amount),a.amount):void 0!==a.actual_amount?(console.log("\ud83d\udd25ANIM_DEBUG [ResourceChange] Using actual_amount:",a.actual_amount),a.actual_amount):void 0!==a.original_amount?(console.log("\ud83d\udd25ANIM_DEBUG [ResourceChange] Using original_amount:",a.original_amount),a.original_amount):t.includes("INCREASE")?(console.log("\ud83d\udd25ANIM_DEBUG [ResourceChange] Using default increase: 1"),1):t.includes("DECREASE")?(console.log("\ud83d\udd25ANIM_DEBUG [ResourceChange] Using default decrease: -1"),-1):(console.log("\ud83d\udd25ANIM_DEBUG [ResourceChange] No change amount found, returning 0"),0)}showResourceChangeIndicator(e,t,n){console.log("\ud83c\udfacANIM [ResourceChange] Showing change indicator:",t);const a=document.createElement("div");a.className="resource-change-indicator ".concat(n?"resource-change-increase":"resource-change-decrease"),a.textContent=n?"+".concat(t):"".concat(t);const r=e.getBoundingClientRect(),i=r.left+r.width/2,l=r.top+r.height/2;a.style.position="fixed",a.style.left=i+"px",a.style.top=l-20+"px",a.style.transform="translateX(-50%)",a.style.zIndex="10001",document.body.appendChild(a),setTimeout(()=>{a.parentNode&&document.body.removeChild(a)},1500),console.log("\ud83c\udfacANIM [ResourceChange] Change indicator created and will be removed in 1.5s")}updatePersistentEffect(e,t,n){const a="".concat(e,"_").concat(t.dataset.cardId||"unknown");n?(this.persistentStates.set(a,{effectType:e,target:t,timestamp:Date.now()}),console.log("\ud83c\udfacANIM [Persistent] Effect activated:",e)):(this.persistentStates.delete(a),console.log("\ud83c\udfacANIM [Persistent] Effect deactivated:",e))}clearAllAnimations(){console.log("\ud83c\udfacANIM [Clear] Clearing all animations"),this.animationQueue=[],this.activeAnimations.clear(),this.persistentStates.clear(),this.activeElementAnimations.clear(),this.cardPlayQueue=[],this.isProcessingCardPlay=!1,this.cardDrawQueue=[],this.isProcessingCardDraw=!1}clearErrors(){console.log("\ud83c\udfacANIM [Clear] Clearing errors"),this.errors=[]}resetAnimationFlags(){console.log("\ud83c\udfacANIM [Reset] Resetting animation flags"),this.isProcessingCardPlay=!1,this.cardPlayQueue=[],this.isProcessingCardDraw=!1,this.cardDrawQueue=[]}getStatus(){return{queueLength:this.animationQueue.length,activeCount:this.activeAnimations.size,persistentCount:this.persistentStates.size,completedCount:this.completedCount,errorCount:this.errors.length,errors:this.errors,cardPlayQueueLength:this.cardPlayQueue.length,isProcessingCardPlay:this.isProcessingCardPlay,cardDrawQueueLength:this.cardDrawQueue.length,isProcessingCardDraw:this.isProcessingCardDraw}}registerPendingDestroyAnimation(e,t,n,a){console.log("\ud83c\udfacANIM [Destroy] Registering pending destroy animation for card:",e),this.pendingDestroyAnimations.set(e,{effectType:t,target:n,params:a,timestamp:Date.now()})}scheduleCardRemovalAfterAnimation(e){console.log("\ud83c\udfacANIM [Schedule] Scheduling card removal after animation for card:",e);const t=document.querySelector('[data-card-id="'.concat(e,'"]'));if(t){const n=t.cloneNode(!0);n.classList.add("card-animation-clone"),n.style.position="absolute",n.style.zIndex="1000";const a=t.getBoundingClientRect();n.style.left=a.left+"px",n.style.top=a.top+"px",n.style.width=a.width+"px",n.style.height=a.height+"px",document.body.appendChild(n),t.style.visibility="hidden",this.scheduledCardRemovals.set(e,{originalElement:t,cloneElement:n,timestamp:Date.now()}),console.log("\ud83c\udfacANIM [Schedule] Card clone created and original hidden for card:",e)}else console.warn("\ud83c\udfacANIM [Schedule] Card element not found for scheduling removal:",e)}async executePendingDestroyAnimation(e){const t=this.pendingDestroyAnimations.get(e);if(t){console.log("\ud83c\udfacANIM [Destroy] Executing pending destroy animation for card:",e);try{const n=await this.triggerTransientEffect(t.effectType,t.target,t.params);console.log("\ud83c\udfacANIM [Destroy] Destroy animation completed for card:",e,n),await this.executeScheduledCardRemoval(e)}catch(n){console.error("\ud83c\udfacANIM [Destroy] Error executing destroy animation for card:",e,n)}finally{this.pendingDestroyAnimations.delete(e)}}}initializeCardAnimationDependency(e){this.animationDependencies.has(e)||this.animationDependencies.set(e,{pendingAnimations:new Set,completedAnimations:new Set})}async animateTurnStart(e,t){return console.log("\ud83c\udfaeGAME_ANIM [AnimationManager] Starting turn start animation for:",e,"turn:",t),new Promise(n=>{const a=document.createElement("div");a.className="game-progress-overlay";const r=document.createElement("div");r.className="game-progress-message turn-start turn-start-animation",r.innerHTML="\n                <div>\u30bf\u30fc\u30f3 ".concat(t,'</div>\n                <div style="font-size: 0.8em; margin-top: 8px;">').concat(e,"\u306e\u30bf\u30fc\u30f3</div>\n            "),a.appendChild(r),document.body.appendChild(a),setTimeout(()=>{document.body.removeChild(a),console.log("\ud83c\udfacANIM [TurnStart] Turn start animation completed"),n({success:!0,duration:800})},800)})}async animateTurnEnd(e){return console.log("\ud83c\udfaeGAME_ANIM [AnimationManager] Starting turn end animation for:",e),new Promise(t=>{const n=document.createElement("div");n.className="game-progress-overlay";const a=document.createElement("div");a.className="game-progress-message turn-end turn-end-animation",a.innerHTML="\n                <div>".concat(e,"\u306e\u30bf\u30fc\u30f3\u7d42\u4e86</div>\n            "),n.appendChild(a),document.body.appendChild(n),setTimeout(()=>{document.body.removeChild(n),this.restoreAllCardVisibility(),console.log("\ud83c\udfacANIM [TurnEnd] Turn end animation completed"),t({success:!0,duration:1200})},1200)})}async animateGameResult(e,t){return console.log("[GAME_END_DEBUG] AnimationManager: animateGameResult called with isVictory: ".concat(e,', message: "').concat(t,'"')),new Promise(n=>{const a=document.createElement("div");a.className="game-progress-overlay";const r=document.createElement("div");r.className="game-progress-message ".concat(e?"victory victory-animation":"defeat defeat-animation"),r.innerHTML='\n                <div style="font-size: 1.2em; margin-bottom: 10px;">'.concat(e?"\ud83c\udf89 \u52dd\u5229\uff01":"\ud83d\udc80 \u6557\u5317...",'</div>\n                <div style="font-size: 0.9em;">').concat(t,"</div>\n            "),a.appendChild(r),document.body.appendChild(a),setTimeout(()=>{document.body.removeChild(a),console.log("\ud83c\udfacANIM [GameResult] Game result animation completed"),console.log("[GAME_END_DEBUG] AnimationManager: Dispatching gameResultAnimationComplete event."),window.dispatchEvent(new CustomEvent("gameResultAnimationComplete")),n({success:!0,duration:2e3})},2e3)})}async animateLimitWarning(e,t){return console.log("\ud83c\udfaeGAME_ANIM [AnimationManager] Starting limit warning animation:",t),e?new Promise(n=>{e.classList.add("limit-warning-flash"),console.log("\ud83c\udfaeGAME_ANIM [AnimationManager] Limit warning animation started for:",t),setTimeout(()=>{e.classList.remove("limit-warning-flash"),console.log("\ud83c\udfaeGAME_ANIM [AnimationManager] Limit warning animation completed"),n({success:!0,duration:1800})},1800)}):(console.warn("\ud83c\udfaeGAME_ANIM [AnimationManager] Target element not found for limit warning"),{success:!1,error:"Target not found"})}async animateEffectNullified(e){return console.log("\ud83c\udfaeGAME_ANIM [AnimationManager] Starting effect nullified animation"),e?new Promise(t=>{e.classList.add("effect-nullified"),this.createNullifiedParticles(e),console.log("\ud83c\udfaeGAME_ANIM [AnimationManager] Effect nullified animation started"),setTimeout(()=>{e.classList.remove("effect-nullified"),console.log("\ud83c\udfaeGAME_ANIM [AnimationManager] Effect nullified animation completed"),t({success:!0,duration:600})},600)}):(console.warn("\ud83c\udfaeGAME_ANIM [AnimationManager] Target element not found for effect nullified"),{success:!1,error:"Target not found"})}createNullifiedParticles(e){const t=e.getBoundingClientRect(),n=t.left+t.width/2,a=t.top+t.height/2,r=[];for(let i=0;i<12;i++){const e=document.createElement("div");e.className="nullified-particle",e.style.left=n+"px",e.style.top=a+"px";const t=i/12*2*Math.PI+.5*(Math.random()-.5),l=50+30*Math.random(),o=n+Math.cos(t)*l,s=a+Math.sin(t)*l;document.body.appendChild(e),r.push(e),e.style.transition="all 0.6s cubic-bezier(0.25, 0.46, 0.45, 0.94)",setTimeout(()=>{e.style.left=o+"px",e.style.top=s+"px",e.style.opacity="0",e.style.transform="scale(2) rotate(360deg)"},50)}setTimeout(()=>{r.forEach(e=>{e.parentNode&&document.body.removeChild(e)})},700),console.log("\ud83c\udfaeGAME_ANIM [AnimationManager] Created",12,"nullified particles")}updatePersistentAnimations(e){if(console.log("[GrayOutDebug] AnimationManager.updatePersistentAnimations called."),!e||!e.players||!e.all_card_instances)return void console.log("[GrayOutDebug] updatePersistentAnimations: currentGameState or players/cards missing. Skipping.");const t=e.players[ge],n=this.getEffectiveScale(t);console.log("[GrayOutDebug] Current Human Player Effective Scale: ".concat(n)),t.hand.forEach(t=>{console.log("[GrayOutDebug] Processing card: ".concat(t.name," (ID: ").concat(t.instance_id,")"));const a=document.querySelector('[data-card-id="'.concat(t.instance_id,'"]'));if(!a)return void console.warn("[GrayOutDebug] updatePersistentAnimations: Card DOM element not found for card: ".concat(t.name," (ID: ").concat(t.instance_id,"). This card might not be rendered yet or data-card-id is missing."));console.log("[GrayOutDebug] Found DOM element for card: ".concat(t.name," (ID: ").concat(t.instance_id,")"));const r=e.cardDefs[t.name],i=void 0!==t.required_scale?t.required_scale:r?r.required_scale:0;console.log("[GrayOutDebug] Card: ".concat(t.name,", Required Scale: ").concat(i));const l=n<i;console.log("[GrayOutDebug] Card: ".concat(t.name,", Is Insufficient Scale? ").concat(l," (Player Scale: ").concat(n,", Required Scale: ").concat(i,")")),l?a.classList.contains("card-insufficient-scale")?console.log("[GrayOutDebug] Card already has 'card-insufficient-scale': ".concat(t.name)):(a.classList.add("card-insufficient-scale"),console.log("[GrayOutDebug] ADDED 'card-insufficient-scale' to card: ".concat(t.name))):a.classList.contains("card-insufficient-scale")?(a.classList.remove("card-insufficient-scale"),console.log("[GrayOutDebug] REMOVED 'card-insufficient-scale' from card: ".concat(t.name))):console.log("[GrayOutDebug] Card does not have 'card-insufficient-scale' and is sufficient: ".concat(t.name))}),this.lastGameState=e}getEffectiveScale(e){if(!e)return 0;let t=e.scale;if(e.field){t+=e.field.filter(e=>"\u30de\u30cd\u30fc"===e.name).reduce((e,t)=>e+(t.current_durability||0),0)}return e.ideology&&e.ideology.scale_modifier&&(t+=e.ideology.scale_modifier),Math.max(0,t)}clearPersistentAnimations(){console.log("\ud83c\udfaeGAME_ANIM [Persistent] Clearing all persistent animations"),this.persistentAnimations.forEach((e,t)=>{const n=document.querySelector('[data-card-id="'.concat(t,'"]'));n&&"insufficient-scale"===e&&n.classList.remove("card-insufficient-scale")}),this.persistentAnimations.clear()}restoreAllCardVisibility(){console.log("\ud83c\udfacANIM [Restore] Restoring visibility for all cards on screen");const e=document.querySelectorAll(".card-game, .card-library");let t=0;return e.forEach(e=>{let n=!1;e.classList.contains("card-animation-hidden")&&(e.classList.remove("card-animation-hidden"),n=!0);const a=e.dataset.cardId;if(a){const e=document.getElementById("hide-".concat(a));e&&(e.remove(),n=!0)}n&&(t++,console.log("\ud83c\udfacANIM [Restore] Restored visibility for card:",a||"unknown"))}),console.log("\ud83c\udfacANIM [Restore] Restored visibility for ".concat(t," cards")),this.activeElementAnimations.clear(),t}async animateTurnOrderDecision(e,t){return console.log("\ud83c\udfaeGAME_ANIM [AnimationManager] Starting turn order decision animation"),console.log("\ud83c\udfaeGAME_ANIM [AnimationManager] First player:",e),console.log("\ud83c\udfaeGAME_ANIM [AnimationManager] Second player:",t),new Promise(n=>{console.log("\ud83c\udfaeGAME_ANIM [AnimationManager] Creating overlay elements...");const a=document.createElement("div");a.className="game-progress-overlay",console.log("\ud83c\udfaeGAME_ANIM [AnimationManager] Overlay created with class:",a.className);const r=document.createElement("div");r.className="game-progress-message turn-order",r.innerHTML='\n                <div style="margin-bottom: 15px;">\u30bf\u30fc\u30f3\u9806\u6c7a\u5b9a</div>\n                <div id="turn-order-content" style="font-size: 0.8em;">\n                    <div>\u6c7a\u5b9a\u4e2d...</div>\n                </div>\n            ',console.log("\ud83c\udfaeGAME_ANIM [AnimationManager] Message created with class:",r.className),a.appendChild(r),console.log("\ud83c\udfaeGAME_ANIM [AnimationManager] Message appended to overlay"),document.body.appendChild(a),console.log("\ud83c\udfaeGAME_ANIM [AnimationManager] Overlay appended to document.body"),console.log("\ud83c\udfaeGAME_ANIM [AnimationManager] Document body children count:",document.body.children.length),setTimeout(()=>{const n=document.getElementById("turn-order-content");n&&(n.innerHTML='\n                        <div style="margin-bottom: 8px;">\ud83e\udd47 \u5148\u653b: '.concat(e,"</div>\n                        <div>\ud83e\udd48 \u5f8c\u653b: ").concat(t,"</div>\n                    "),n.classList.add("turn-order-animation"))},500),setTimeout(()=>{document.body.removeChild(a),console.log("\ud83c\udfacANIM [TurnOrder] Turn order decision animation completed"),n({success:!0,duration:1500})},1500)})}async markCardAnimationCompleted(e,t){if(!e)return;console.log("\ud83c\udfacANIM [Dependency] Animation completed for card:",e,"type:",t),this.initializeCardAnimationDependency(e);const n=this.animationDependencies.get(e);n.completedAnimations.add(t),n.pendingAnimations.delete(t),"CARD_DAMAGE"===t&&this.pendingDestroyAnimations.has(e)&&(console.log("\ud83c\udfacANIM [Dependency] \u2705 Damage animation completed, executing pending destroy animation for card:",e),setTimeout(async()=>{await this.executePendingDestroyAnimation(e)},100)),Rt.setAnimationCompleted(e)}async executeScheduledCardRemoval(e){const t=this.scheduledCardRemovals.get(e);if(t){console.log("\ud83c\udfacANIM [Removal] Executing scheduled card removal for card:",e);try{const{originalElement:n,cloneElement:a}=t;a&&a.parentNode&&(a.style.transition="opacity 0.3s ease-out",a.style.opacity="0",setTimeout(()=>{a.parentNode&&(a.parentNode.removeChild(a),console.log("\ud83c\udfacANIM [Removal] Card clone removed from DOM:",e))},300)),n&&(n.style.visibility="")}catch(n){console.error("\ud83c\udfacANIM [Removal] Error removing card elements:",e,n)}finally{this.scheduledCardRemovals.delete(e)}}}};const kt=class{constructor(){this.animationQueue=[],this.currentAnimation=null,this.gameLogicPaused=!1,this.resumeGameLogicCallback=null,this.visualState={cards:new Map,players:new Map},this.animationManager=new wt}setGameState(e){const t=_(e)?X(e):e;this.gameState=t,this.animationManager&&this.animationManager.setGameState(t)}pauseGameLogic(e){this.gameLogicPaused=!0,this.resumeGameLogicCallback=e}resumeGameLogic(){if(this.gameLogicPaused&&this.resumeGameLogicCallback){this.gameLogicPaused=!1;const e=this.resumeGameLogicCallback;this.resumeGameLogicCallback=null,e()}}enqueueAnimation(e){this.animationQueue.push(c(c({},e),{},{id:Date.now()+Math.random(),timestamp:Date.now()})),this.processAnimationQueue()}async processAnimationQueue(){if(this.currentAnimation)return;if(0===this.animationQueue.length)return void(this.gameLogicPaused&&this.resumeGameLogic());const e=this.animationQueue.shift();this.currentAnimation=e;try{await this.executeAnimation(e)}catch(t){console.error("\ud83c\udfad [Presentation] Animation execution error:",t)}finally{this.currentAnimation=null,setTimeout(()=>{this.processAnimationQueue()},50)}}async executeAnimation(e){switch(e.type){case"CARD_DAMAGE":await this.executeCardDamageAnimation(e);break;case"CARD_DESTROY":await this.executeCardDestroyAnimation(e);break;case"CARD_MOVE":await this.executeCardMoveAnimation(e);break;case"RESOURCE_CHANGE":await this.executeResourceChangeAnimation(e);break;default:console.warn("\ud83c\udfad [Presentation] Unknown animation type:",e.type)}}async executeCardDamageAnimation(e){const{cardId:t,amount:n}=e.data,a=document.querySelector('[data-card-id="'.concat(t,'"]'));if(a)return new Promise(e=>{a.classList.add("card-damage-animation"),setTimeout(()=>{a.classList.remove("card-damage-animation"),e()},800)});console.warn("\ud83c\udfad [Presentation] Card element not found for damage animation:",t)}async executeCardDestroyAnimation(e){const{cardId:t}=e.data,n=document.querySelector('[data-card-id="'.concat(t,'"]'));if(n)return new Promise(e=>{n.classList.add("card-destroy-animation"),setTimeout(()=>{n.classList.remove("card-destroy-animation"),n.style.display="none",e()},600)});console.warn("\ud83c\udfad [Presentation] Card element not found for destroy animation:",t)}async executeCardMoveAnimation(e){const{cardId:t,from:n,to:a}=e.data;return new Promise(e=>{setTimeout(e,300)})}async executeResourceChangeAnimation(e){const{playerId:t,resourceType:n,amount:a}=e.data;return new Promise(e=>{setTimeout(e,800)})}async onGameEffect(e,t,n){console.log("[DEBUG] PresentationController.onGameEffect called with effect: ".concat(t.effect_type)),t&&t.effect_type?(!n&&t&&t.args&&t.args.card_id&&this.gameState&&(n=this.gameState.all_card_instances[t.args.card_id],console.log("[DEBUG] PresentationController: sourceCard was undefined. Found from gameState: ".concat(n?n.name:"Not Found"))),this.setGameState(e),["TURN_START","TURN_END","GAME_RESULT","TURN_ORDER_DECISION"].includes(t.effect_type),t.effect_type.includes("DURABILITY")||t.effect_type.includes("DAMAGE"),await this.delegateToAnimationManager(t,n)):console.warn("[GAME_END_DEBUG] PresentationController: onGameEffect received null or invalid effect. Skipping.")}async delegateToAnimationManager(e,t){if(console.log("[DEBUG] delegateToAnimationManager called with effect: ".concat(e.effect_type)),!this.animationManager)return void console.warn("\ud83c\udfaeGAME_ANIM [Presentation] AnimationManager not available");try{switch(e.effect_type){case"MOVE_CARD":await this.handleCardMove(e,t);break;case"DAMAGE_THIS":case"BOOST_THIS":await this.handleCardDurabilityChange(e,t);break;case"MODIFY_CARD_DURABILITY":break;case"WEALTH_DURABILITY_ZERO_THIS":case"CARD_DESTROYED":await this.handleCardDestroy(e,t);break;case"CONSCIOUSNESS_CHANGED":case"SCALE_CHANGED":case"MODIFY_CONSCIOUSNESS_RESERVE":case"MODIFY_SCALE_RESERVE":await this.handleResourceChange(e,t);break;case"TURN_START":await this.handleTurnStart(e,t);break;case"TURN_END":await this.handleTurnEnd(e,t);break;case"GAME_RESULT":await this.handleGameResult(e,t);break;case"TURN_ORDER_DECISION":await this.handleTurnOrderDecision(e,t);break;case"LIMIT_WARNING":await this.handleLimitWarning(e,t);break;case"EFFECT_NULLIFIED":await this.handleEffectNullified(e,t);break;case"EVENT_CARD_PLAYED":await this.handleEventCardPlayed(e,t);break;case"CARD_REVEALED":console.log("[REVEAL_DEBUG] 3. PresentationController: Handling CARD_REVEALED, delegating to AnimationManager."),await this.handleCardRevealed(e,t);break;default:console.log("\ud83c\udfad [Presentation] No animation mapping for effect:",e.effect_type)}}catch(n){console.error("\ud83c\udfad [Presentation] Error delegating to AnimationManager:",n)}["MOVE_CARD","CARD_DURABILITY_CHANGED","SCALE_CHANGED","MODIFY_SCALE_RESERVE","TURN_START","WEALTH_DURABILITY_ZERO_THIS","CARD_DESTROYED",Qe].includes(e.effect_type)&&this.animationManager&&setTimeout(()=>{this.animationManager.updatePersistentAnimations(this.gameState)},50)}async handleCardPlacement(e,t){const n=e.args.card_id,a=document.querySelector('[data-card-id="'.concat(n,'"]'));a?await this.animationManager.triggerTransientEffect("CARD_PLAY",a,{effect:e,sourceCard:t}):console.warn("\ud83d\udd25ANIM_DEBUG [Presentation] Card element not found for placement:",n)}async handleEventCardPlayed(e,t){console.log("[DEBUG] PresentationController.handleEventCardPlayed entered."),console.log("[DEBUG] PresentationController.handleEventCardPlayed - this.animationManager:",this.animationManager),await this.animationManager.triggerTransientEffect("EVENT_CARD_PLAYED",null,{effect:e,sourceCard:t})}async handleCardRevealed(e,t){console.log("[REVEAL_DEBUG] 3. PresentationController: Handling CARD_REVEALED, delegating to AnimationManager with null target."),await this.animationManager.triggerTransientEffect("CARD_REVEALED",null,{effect:e,sourceCard:t})}async handleCardMove(e,t){const n=e.args.card_id,a=e.args.source_pile,r=e.args.destination_pile;if("deck"===a&&"hand"===r)setTimeout(async()=>{const a=document.querySelector('[data-card-id="'.concat(n,'"]'));await this.animationManager.triggerTransientEffect("CARD_DRAW",a,{effect:e,sourceCard:t})},50);else if("hand"===a&&"field"===r){this.hideCardImmediately(n);e.args.player_id;setTimeout(async()=>{const a=document.querySelector('[data-card-id="'.concat(n,'"]'));a&&await this.animationManager.triggerTransientEffect("CARD_PLAY",a,{effect:e,sourceCard:t,delay:500})},50)}else if("hand"===a&&"ideology"===r){this.hideCardImmediately(n);e.args.player_id;setTimeout(async()=>{const a=document.querySelector('[data-card-id="'.concat(n,'"]'));a&&await this.animationManager.triggerTransientEffect("CARD_PLAY",a,{effect:e,sourceCard:t,delay:500})},50)}else"game_source"===a&&"field"===r&&(this.hideCardImmediately(n),setTimeout(async()=>{const a=document.querySelector('[data-card-id="'.concat(n,'"]'));a&&await this.animationManager.triggerTransientEffect("CARD_PLAY",a,{effect:e,sourceCard:t,delay:500})},50))}async handleCardDurabilityChange(e,t){try{const n=e.args.damaged_card_id||e.args.boosted_card_id,a=document.querySelector('[data-card-id="'.concat(n,'"]')),r=e.args.damage_amount||e.args.boost_amount||0;if(a){await this.animationManager.triggerTransientEffect("CARD_DAMAGE",a,{effect:c(c({},e),{},{args:c(c({},e.args),{},{amount:r})}),sourceCard:t,delay:500});this.gameLogicPaused&&this.resumeGameLogic()}else console.warn("\ud83d\udd25ANIM_DEBUG [Presentation] Card element not found for durability change:",n),console.warn("\ud83d\udd25ANIM_DEBUG [Presentation] Available card elements:",Array.from(document.querySelectorAll("[data-card-id]")).map(e=>e.getAttribute("data-card-id")))}catch(n){}}async handleCardDestroy(e,t){const n=e.args.card_id,a=document.querySelector('[data-card-id="'.concat(n,'"]'));a?await this.animationManager.triggerTransientEffect("CARD_DESTROY",a,{effect:e,sourceCard:t,delay:500}):console.warn("\ud83c\udfad [Presentation] Card element not found for destroy:",n)}async handleResourceChange(e,t){const n=e.args.player_id,a=e.effect_type.includes("CONSCIOUSNESS")?"consciousness":"scale",r=(e.args.amount||e.args.actual_amount||e.args.original_amount,document.querySelector('[data-player-id="'.concat(n,'"]')));if(r){const n=[".".concat(a),".player-".concat(a),'[data-resource="'.concat(a,'"]'),".resource-".concat(a),".stat-".concat(a)];let i=null;for(const e of n)if(i=r.querySelector(e),i)break;if(i){const n=e.effect_type.includes("CONSCIOUSNESS")?"CONSCIOUSNESS_CHANGE_RESULT":"SCALE_CHANGE_RESULT";await this.animationManager.triggerTransientEffect(n,i,{effect:e,sourceCard:t})}else console.warn("\ud83d\udd25ANIM_DEBUG [Presentation] Resource element not found with any selector")}else console.warn("\ud83d\udd25ANIM_DEBUG [Presentation] Player element not found:",n)}hideCardImmediately(e){const t=['[data-card-id="'.concat(e,'"]'),"#".concat(e)];for(const n of t){document.querySelectorAll(n).forEach(e=>{e.style.setProperty("visibility","hidden","important"),e.style.setProperty("opacity","0","important"),e.style.setProperty("transform","scale(0)","important"),e.classList.add("card-animation-hidden");const t=e.parentElement;t&&t.classList.contains("card-container")&&t.style.setProperty("visibility","hidden","important")})}this.addHidingCSSRule(e)}addHidingCSSRule(e){const t="hide-".concat(e),n=document.getElementById(t);n&&n.remove();const a=document.createElement("style");a.id=t,a.textContent='\n                [data-card-id="'.concat(e,'"]:not(.card-animation-clone) {\n                    visibility: hidden !important;\n                    opacity: 0 !important;\n                    transform: scale(0) !important;\n                }\n            '),document.head.appendChild(a)}async handleTurnStart(e,t){const n=e.args.player_name||"\u30d7\u30ec\u30a4\u30e4\u30fc",a=e.args.turn_number||1;this.animationManager?await this.animationManager.triggerTransientEffect("TURN_START",null,{playerName:n,turnNumber:a,delay:750}):console.warn("\ud83c\udfaeGAME_ANIM [Presentation] AnimationManager not available for TURN_START")}async handleTurnEnd(e,t){const n=e.args.player_name||"\u30d7\u30ec\u30a4\u30e4\u30fc";this.animationManager?await this.animationManager.triggerTransientEffect("TURN_END",null,{playerName:n,delay:750}):console.warn("\ud83c\udfaeGAME_ANIM [Presentation] AnimationManager not available for TURN_END")}async handleGameResult(e,t){const n=e.args.is_victory||!1,a=e.args.message||"";this.animationManager?await this.animationManager.triggerTransientEffect("GAME_RESULT",null,{isVictory:n,message:a}):console.warn("\ud83c\udfaeGAME_ANIM [Presentation] AnimationManager not available for GAME_RESULT")}async handleLimitWarning(e,t){const{player_id:n,limit_type:a,message:r}=e.args;let i="";"hand"===a?i="PLAYER1"===n?".player-hand-area":".opponent-hand-area":"field"===a&&(i="PLAYER1"===n?".player-field-area":".opponent-field-area");const l=document.querySelector(i);l&&this.animationManager?await this.animationManager.triggerTransientEffect("LIMIT_WARNING",l,{limitType:a,message:r}):console.warn("\ud83c\udfaeGAME_ANIM [Presentation] Target element or AnimationManager not found for limit warning")}async handleEffectNullified(e,t){const{target_card_id:n}=e.args,a=document.querySelector('[data-card-id="'.concat(n,'"]'));a&&this.animationManager?await this.animationManager.triggerTransientEffect("EFFECT_NULLIFIED",a,{}):console.warn("\ud83c\udfaeGAME_ANIM [Presentation] Target element or AnimationManager not found for effect nullified")}async handleTurnOrderDecision(e,t){const n=e.args.first_player||"\u5148\u653b\u30d7\u30ec\u30a4\u30e4\u30fc",a=e.args.second_player||"\u5f8c\u653b\u30d7\u30ec\u30a4\u30e4\u30fc";this.animationManager?await this.animationManager.triggerTransientEffect("TURN_ORDER_DECISION",null,{firstPlayer:n,secondPlayer:a,delay:1e3}):console.warn("\ud83c\udfaeGAME_ANIM [Presentation] AnimationManager not available for TURN_ORDER_DECISION")}getStatus(){var e;return{queueLength:this.animationQueue.length,currentAnimation:(null===(e=this.currentAnimation)||void 0===e?void 0:e.type)||null,gameLogicPaused:this.gameLogicPaused}}clear(){console.log("[GAME_END_DEBUG] PresentationController: Clearing animation system."),this.animationQueue=[],this.currentAnimation=null,this.gameLogicPaused&&this.resumeGameLogic()}},Ot=(e,t)=>{const n=(0,a.useRef)(null),r=(0,a.useRef)(null);(0,a.useEffect)(()=>(n.current?(r.current||(r.current=n.current.onGameEffect.bind(n.current)),t&&!t.isCallbackRegistered(r.current)&&t.registerAnimationCallback(r.current)):(n.current=new kt,r.current=n.current.onGameEffect.bind(n.current),t&&(t.isCallbackRegistered(r.current)||t.registerAnimationCallback(r.current))),()=>{n.current&&(n.current.clear(),t&&r.current&&t.removeAnimationCallback(r.current))}),[t]),(0,a.useEffect)(()=>{n.current&&e&&n.current.setGameState(e)},[e]);const i=(0,a.useCallback)((e,t,a)=>{n.current&&n.current.onGameEffect(e,t,a)},[]),l=(0,a.useCallback)(e=>{n.current&&n.current.pauseGameLogic(e)},[]),o=(0,a.useCallback)(()=>n.current?n.current.getStatus():{queueLength:0,currentAnimation:null,gameLogicPaused:!1},[]);return{controller:n.current,handleGameEffect:i,pauseGameLogic:l,getStatus:o}},xt=(e,t)=>{const[n,r]=(0,a.useState)({isReady:!1,activeCount:0,completedCount:0,errorCount:0,lastError:null}),i=(0,a.useRef)(e);(0,a.useEffect)(()=>{i.current=e},[e]);const{controller:l,handleGameEffect:o,pauseGameLogic:s,getStatus:u}=Ot(e,t);(0,a.useEffect)(()=>{r(l?e=>c(c({},e),{},{isReady:!0}):e=>c(c({},e),{},{isReady:!1}))},[l]),(0,a.useEffect)(()=>{if(!l)return;const e=()=>{const e=u();r(t=>c(c({},t),{},{activeCount:e.currentAnimation?1:0,queueLength:e.queueLength,gameLogicPaused:e.gameLogicPaused}))};e();const t=setInterval(e,1e3);return()=>clearInterval(t)},[l,u]);const d=a.useCallback(async(e,t)=>{if(l)try{o(i.current,e,t)}catch(n){r(t=>c(c({},t),{},{errorCount:t.errorCount+1,lastError:{effectType:e.effect_type,error:n,timestamp:Date.now()}}))}},[l,o]);return{controller:l,handleEffectForAnimation:d,pauseGameLogic:s,testAnimation:async e=>{var t;l&&l.enqueueAnimation({type:"CARD_DAMAGE",data:{cardId:(null===(t=e.dataset)||void 0===t?void 0:t.cardId)||"test-card",amount:-1}})},animationState:n,isReady:n.isReady}};var Tt=n(579);const It=e=>{let{player:t,gameState:n,onEndTurn:r}=e;const[i,l]=(0,a.useState)(!1),{triggerEffect:o}=xt(n),s=(0,a.useRef)({consciousness:null,scale:null});if((0,a.useEffect)(()=>{if(!t||!o)return;const e=t.consciousness,n=fe(t),a=s.current;if(null!==a.consciousness&&a.consciousness!==e){const n=e-a.consciousness,r=document.querySelector('[data-player-id="'.concat(t.id,'"] .consciousness .stat-value'));if(r){o("CONSCIOUSNESS_CHANGE_RESULT",r,{effect:{args:{amount:n,player_id:t.id}}})}}if(null!==a.scale&&a.scale!==n){const e=n-a.scale,r=document.querySelector('[data-player-id="'.concat(t.id,'"] .scale .stat-value'));if(r){o("SCALE_CHANGE_RESULT",r,{effect:{args:{amount:e,player_id:t.id}}})}}s.current={consciousness:e,scale:n}},[null===t||void 0===t?void 0:t.consciousness,fe(t),null===t||void 0===t?void 0:t.id,o]),!t)return(0,Tt.jsx)("div",{className:"player-stats",children:"\u30d7\u30ec\u30a4\u30e4\u30fc\u8aad\u307f\u8fbc\u307f\u4e2d..."});const c=fe(t),u=c!==t.scale?"".concat(c," (").concat(t.scale,")"):t.scale,d=t.field.length,f=(null===n||void 0===n?void 0:n.first_player)===t.id,p=f?"\u5148\u653b":"\u5f8c\u653b",m=e=>e>=1e4?"".concat(Math.floor(e/1e3),"k"):e>=1e3?"".concat((e/1e3).toFixed(1),"k"):e.toString(),_=m(t.consciousness),h=(e=>{if("string"===typeof e&&e.includes("(")){const t=e.match(/^(\d+)\s*\((\d+)\)$/);if(t){const e=parseInt(t[1]),n=parseInt(t[2]);return"".concat(m(e)," (").concat(m(n),")")}}const t="number"===typeof e?e:parseInt(e);return m(t)})(u);return(0,Tt.jsxs)("div",{className:"player-stats","data-player-id":t.id,children:[(0,Tt.jsxs)("button",{className:"player-name-button",onClick:()=>l(!i),title:"\u30af\u30ea\u30c3\u30af\u3067\u8a73\u7d30\u8868\u793a",children:[(0,Tt.jsxs)("div",{className:"player-name-line",children:[(0,Tt.jsx)("span",{className:"player-name-text",children:t.name}),(0,Tt.jsxs)("span",{className:"turn-order ".concat(f?"first-player":"second-player"),children:["(",p,")"]})]}),(0,Tt.jsxs)("div",{className:"deck-count-line",children:["\u30c7\u30c3\u30ad",t.deck.length,"\u679a"]})]}),(0,Tt.jsxs)("div",{className:"main-stats",children:[(0,Tt.jsxs)("div",{className:"main-stat consciousness",children:[(0,Tt.jsx)("div",{className:"stat-label",children:"\u610f\u8b58"}),(0,Tt.jsx)("div",{className:"stat-value",title:"\u6b63\u78ba\u306a\u5024: ".concat(t.consciousness),children:_})]}),(0,Tt.jsxs)("div",{className:"main-stat scale",children:[(0,Tt.jsx)("div",{className:"stat-label",children:"\u898f\u6a21"}),(0,Tt.jsx)("div",{className:"stat-value",title:"\u6b63\u78ba\u306a\u5024: ".concat(u),children:h})]})]}),r&&(0,Tt.jsx)("button",{onClick:r,disabled:!(null===n||void 0===n||!n.awaiting_input)||(null===n||void 0===n?void 0:n.current_turn)!==ge,className:"end-turn-button",children:"\u30bf\u30fc\u30f3\u7d42\u4e86"}),i&&(0,Tt.jsx)("div",{className:"player-details-overlay",onClick:()=>l(!1),children:(0,Tt.jsxs)("div",{className:"player-details-modal",onClick:e=>e.stopPropagation(),children:[(0,Tt.jsxs)("div",{className:"player-details-header",children:[(0,Tt.jsxs)("h3",{children:[t.name," \u306e\u8a73\u7d30\u60c5\u5831"]}),(0,Tt.jsx)("button",{className:"close-button",onClick:()=>l(!1),children:"\xd7"})]}),(0,Tt.jsxs)("div",{className:"player-details-content",children:[(0,Tt.jsxs)("div",{className:"detail-section",children:[(0,Tt.jsx)("h4",{children:"\u57fa\u672c\u60c5\u5831"}),(0,Tt.jsxs)("div",{className:"detail-stat-line",children:[(0,Tt.jsx)("span",{className:"detail-label",children:"\u610f\u8b58:"}),(0,Tt.jsx)("span",{className:"detail-value",children:t.consciousness})]}),(0,Tt.jsxs)("div",{className:"detail-stat-line",children:[(0,Tt.jsx)("span",{className:"detail-label",children:"\u898f\u6a21:"}),(0,Tt.jsx)("span",{className:"detail-value",children:u})]}),(0,Tt.jsxs)("div",{className:"detail-stat-line",children:[(0,Tt.jsx)("span",{className:"detail-label",children:"\u5834\u306e\u5236\u9650:"}),(0,Tt.jsx)("span",{className:"detail-value",children:t.field_limit})]})]}),(0,Tt.jsxs)("div",{className:"detail-section",children:[(0,Tt.jsx)("h4",{children:"\u30ab\u30fc\u30c9\u679a\u6570"}),(0,Tt.jsxs)("div",{className:"detail-stat-line",children:[(0,Tt.jsx)("span",{className:"detail-label",children:"\u30c7\u30c3\u30ad:"}),(0,Tt.jsxs)("span",{className:"detail-value",children:[t.deck.length,"\u679a"]})]}),(0,Tt.jsxs)("div",{className:"detail-stat-line",children:[(0,Tt.jsx)("span",{className:"detail-label",children:"\u624b\u672d:"}),(0,Tt.jsxs)("span",{className:"detail-value",children:[t.hand.length,"\u679a"]})]}),(0,Tt.jsxs)("div",{className:"detail-stat-line",children:[(0,Tt.jsx)("span",{className:"detail-label",children:"\u6368\u3066\u672d:"}),(0,Tt.jsxs)("span",{className:"detail-value",children:[t.discard.length,"\u679a"]})]}),(0,Tt.jsxs)("div",{className:"detail-stat-line",children:[(0,Tt.jsx)("span",{className:"detail-label",children:"\u5834:"}),(0,Tt.jsxs)("span",{className:"detail-value",children:[d,"/",t.field_limit]})]})]})]})]})})]})},Pt=e=>{let{card:t,mode:n="library",onClick:a,onAnimationEnd:r}=e;const i="".concat("game"===n?"card-game":"card-library"," ").concat(a?"clickable":""," card-type-").concat(t.card_type," ").concat(t.animation||""),l=()=>{a&&a(t)},o=()=>{"destroying"===t.animation&&r&&r(t.instance_id)},s="\u8ca1"===t.card_type,c=void 0!==t.current_durability?t.current_durability:t.durability;return"game"===n?(0,Tt.jsxs)("div",{className:i,onClick:l,onAnimationEnd:o,"data-card-id":t.instance_id,children:[(0,Tt.jsx)("div",{className:"card-header",children:(0,Tt.jsx)("div",{className:"card-name",children:t.name})}),(0,Tt.jsx)("div",{className:"card-center",children:s&&(0,Tt.jsx)("div",{className:"card-durability",children:c})}),(0,Tt.jsx)("div",{className:"card-footer",children:(0,Tt.jsxs)("div",{className:"card-cost",children:["\u898f\u6a21: ",t.required_scale]})})]}):(0,Tt.jsxs)("div",{className:i,onClick:l,onAnimationEnd:o,"data-card-id":t.instance_id,children:[(0,Tt.jsxs)("div",{className:"card-header",children:[(0,Tt.jsx)("h3",{children:t.name}),(0,Tt.jsx)("span",{className:"card-type",children:t.card_type})]}),(0,Tt.jsxs)("div",{className:"card-info",children:[(0,Tt.jsxs)("div",{children:["\u5fc5\u8981\u898f\u6a21: ",t.required_scale]}),s&&(0,Tt.jsxs)("div",{children:["\u8010\u4e45\u5024: ",t.durability]})]}),(0,Tt.jsx)("div",{className:"card-description",children:t.description})]})},Mt=e=>{let{playerName:t,cards:n,fieldLimit:a,onProvideInput:r,awaiting_input:i,onCardClick:l,onAnimationEnd:o}=e;if(!t)return(0,Tt.jsx)("div",{className:"field",children:"Loading field..."});const s="CHOICE_CARD_FOR_EFFECT"===(null===i||void 0===i?void 0:i.type)?new Set(i.options.map(e=>e.instance_id)):new Set,c=e=>{l?l(e):s.has(e.instance_id)&&r(e)},u=n||[],d=u.find(e=>"\u30a4\u30c7\u30aa\u30ed\u30ae\u30fc"===e.card_type&&!e.animation),f=u.find(e=>"\u30a4\u30c7\u30aa\u30ed\u30ae\u30fc"===e.card_type&&"destroying"===e.animation),p=u.filter(e=>"\u8ca1"===e.card_type),m=p.filter(e=>!e.animation).length;return(0,Tt.jsxs)("div",{className:"field",children:[(0,Tt.jsxs)("h4",{children:[t,"'s Field"]}),(0,Tt.jsxs)("div",{className:"field-area",children:[(0,Tt.jsxs)("div",{className:"field-label",children:[(0,Tt.jsx)("span",{className:"ideology-indicator",children:"\u30a4\u30c7\u30aa\u30ed\u30ae\u30fc"}),(0,Tt.jsxs)("span",{className:"wealth-indicator",children:["\u8ca1\u30ab\u30fc\u30c9 (",m,"/",a,")",(0,Tt.jsx)("span",{className:"placement-order-hint",children:"\u2190 \u53e4\u3044\u9806"})]})]}),(0,Tt.jsxs)("div",{className:"field-cards-container",children:[(0,Tt.jsxs)("div",{className:"ideology-slot",children:[d&&(0,Tt.jsx)(Pt,{card:d,mode:"game",isSelectable:s.has(d.instance_id),onClick:()=>c(d),onAnimationEnd:o}),f&&(0,Tt.jsx)(Pt,{card:f,mode:"game",isSelectable:!1,onClick:()=>{},onAnimationEnd:o}),!d&&!f&&(0,Tt.jsx)("div",{className:"empty-ideology-slot",children:(0,Tt.jsx)("span",{children:"\u30a4\u30c7\u30aa\u30ed\u30ae\u30fc"})})]}),(0,Tt.jsxs)("div",{className:"wealth-cards-scrollable",children:[p.map(e=>(0,Tt.jsx)("div",{className:"wealth-card-slot",children:(0,Tt.jsx)(Pt,{card:e,mode:"game",isSelectable:s.has(e.instance_id),onClick:()=>c(e),onAnimationEnd:o})},e.instance_id)),Array.from({length:Math.max(0,a-p.length)}).map((e,t)=>(0,Tt.jsx)("div",{className:"wealth-card-slot",children:(0,Tt.jsx)("div",{className:"empty-wealth-slot",children:(0,Tt.jsx)("span",{className:"slot-number",children:p.length+t+1})})},"empty-".concat(t)))]})]})]})]})},Lt=e=>{let{player:t,onPlayCard:n,onProvideInput:a,awaiting_input:r,onCardClick:i}=e;if(!t)return(0,Tt.jsx)("div",{className:"hand",children:"Loading hand..."});const l=r&&"CHOOSE_CARD_FOR_EFFECT"===r.type,o=r&&"CHOICE_CARDS_FOR_OPERATION"===r.type;return(0,Tt.jsxs)("div",{className:"hand",children:[(0,Tt.jsxs)("h4",{children:[t.name,"'s Hand (",t.hand.length,"\u679a)"]}),(0,Tt.jsx)("div",{className:"hand-cards-scrollable",children:t.hand.map(e=>{const t=l&&r.valid_target_ids.includes(e.instance_id)||o&&r.options.some(t=>t.instance_id===e.instance_id);return(0,Tt.jsx)("div",{className:"hand-card-slot",onClick:()=>(e=>{i?i(e):l&&r.valid_target_ids.includes(e.instance_id)?a(e):o&&r.options.some(t=>t.instance_id===e.instance_id)?a([e]):l||o||n(e)})(e),children:(0,Tt.jsx)(Pt,{card:e,mode:"game",isSelectable:t})},e.instance_id)})})]})},jt=e=>{let{prompt:t,min:n,max:r,onConfirm:i}=e;const[l,o]=(0,a.useState)(n);return(0,Tt.jsx)("div",{className:"choice-prompt-overlay",children:(0,Tt.jsxs)("div",{className:"choice-prompt",children:[(0,Tt.jsx)("h3",{children:t}),(0,Tt.jsxs)("div",{className:"number-input-container",children:[(0,Tt.jsx)("button",{onClick:()=>{o(e=>Math.max(n,e-1))},children:"-"}),(0,Tt.jsx)("input",{type:"number",value:l,onChange:e=>{const t=parseInt(e.target.value,10);isNaN(t)?o(n):o(Math.max(n,Math.min(r,t)))},min:n,max:r}),(0,Tt.jsx)("button",{onClick:()=>{o(e=>Math.min(r,e+1))},children:"+"})]}),(0,Tt.jsx)("button",{onClick:()=>{i(l)},className:"confirm-button",children:"\u78ba\u5b9a"})]})})},Ut=e=>{let{card:t,onClose:n}=e;if(!t)return null;const a=void 0!==t.current_durability?t.current_durability:t.durability;return(0,Tt.jsx)("div",{className:"card-detail-overlay",onClick:e=>{e.target===e.currentTarget&&n()},children:(0,Tt.jsxs)("div",{className:"card-detail-modal",children:[(0,Tt.jsxs)("div",{className:"card-detail-header",children:[(0,Tt.jsx)("h2",{children:t.name}),(0,Tt.jsx)("button",{className:"close-button",onClick:n,children:"\xd7"})]}),(0,Tt.jsxs)("div",{className:"card-detail-content",children:[(0,Tt.jsxs)("div",{className:"card-detail-info",children:[(0,Tt.jsxs)("div",{className:"info-row",children:[(0,Tt.jsx)("span",{className:"info-label",children:"\u30bf\u30a4\u30d7:"}),(0,Tt.jsx)("span",{className:"info-value",children:t.card_type})]}),(0,Tt.jsxs)("div",{className:"info-row",children:[(0,Tt.jsx)("span",{className:"info-label",children:"\u5fc5\u8981\u898f\u6a21:"}),(0,Tt.jsx)("span",{className:"info-value",children:t.required_scale})]}),"\u8ca1"===t.card_type&&(0,Tt.jsxs)("div",{className:"info-row",children:[(0,Tt.jsx)("span",{className:"info-label",children:"\u8010\u4e45\u5024:"}),(0,Tt.jsxs)("span",{className:"info-value",children:[a,"/",t.durability]})]})]}),(0,Tt.jsxs)("div",{className:"card-detail-description",children:[(0,Tt.jsx)("h4",{children:"\u52b9\u679c:"}),(0,Tt.jsx)("p",{children:t.description})]})]})]})})},Ft=e=>{let{card:t,player:n,gameState:a,onPlay:r,onClose:i}=e;if(!t)return null;const l=(()=>{if(!n||a.awaiting_input)return!1;if(!(a.current_turn===t.owner))return!1;const e=fe(n)>=t.required_scale;if("\u8ca1"===t.card_type&&!(n.field.filter(e=>"\u30de\u30cd\u30fc"===e.name).length>0&&"\u30de\u30cd\u30fc"===t.name)){const t=n.field.length<n.field_limit;return e&&t}return e})(),o=void 0!==t.current_durability?t.current_durability:t.durability;return(0,Tt.jsx)("div",{className:"card-action-overlay",onClick:e=>{e.target===e.currentTarget&&i()},children:(0,Tt.jsxs)("div",{className:"card-detail-modal",children:[(0,Tt.jsxs)("div",{className:"card-detail-header",children:[(0,Tt.jsx)("h2",{children:t.name}),(0,Tt.jsx)("button",{className:"close-button",onClick:i,children:"\xd7"})]}),(0,Tt.jsxs)("div",{className:"card-detail-content",children:[(0,Tt.jsxs)("div",{className:"card-detail-info",children:[(0,Tt.jsxs)("div",{className:"info-row",children:[(0,Tt.jsx)("span",{className:"info-label",children:"\u30bf\u30a4\u30d7:"}),(0,Tt.jsx)("span",{className:"info-value",children:t.card_type})]}),(0,Tt.jsxs)("div",{className:"info-row",children:[(0,Tt.jsx)("span",{className:"info-label",children:"\u5fc5\u8981\u898f\u6a21:"}),(0,Tt.jsx)("span",{className:"info-value",children:t.required_scale})]}),"\u8ca1"===t.card_type&&(0,Tt.jsxs)("div",{className:"info-row",children:[(0,Tt.jsx)("span",{className:"info-label",children:"\u8010\u4e45\u5024:"}),(0,Tt.jsxs)("span",{className:"info-value",children:[o,"/",t.durability]})]})]}),(0,Tt.jsxs)("div",{className:"card-detail-description",children:[(0,Tt.jsx)("h4",{children:"\u52b9\u679c:"}),(0,Tt.jsx)("p",{children:t.description})]}),(0,Tt.jsx)("div",{className:"card-action-section",children:(0,Tt.jsx)("button",{className:"play-action-button ".concat(l?"":"disabled"),onClick:l?r:void 0,disabled:!l,children:l?"\u30d7\u30ec\u30a4":a.awaiting_input?"\u9078\u629e\u5f85\u3061\u4e2d":fe(n)<t.required_scale?"\u898f\u6a21\u4e0d\u8db3":"\u8ca1"===t.card_type&&"\u30de\u30cd\u30fc"!==t.name&&n.field.length>=n.field_limit?"\u5834\u304c\u6e80\u676f":a.current_turn!==t.owner?"\u76f8\u624b\u306e\u30bf\u30fc\u30f3\u4e2d":"\u30d7\u30ec\u30a4\u4e0d\u53ef"})})]})]})})},zt=e=>{let{gameState:t,enhancedLog:n,onShowLog:r,onShowRules:i}=e;const[l,o]=(0,a.useState)(!1),[s,c]=(0,a.useState)(null),[u,d]=(0,a.useState)(1),[f,p]=(0,a.useState)(null),m=(0,a.useRef)(null),_=(()=>{if(!t)return["\u30b2\u30fc\u30e0\u60c5\u5831\u8aad\u307f\u8fbc\u307f\u4e2d..."];const{game_log:e=[]}=t;if(n&&n.getFilteredEntries){const e=n.getFilteredEntries("all");if(0===e.length)return["\u30b2\u30fc\u30e0\u958b\u59cb"];return e.slice(-3).map(e=>"effect"===e.type&&e.playerName&&e.sourceCard?"[".concat(e.playerName,"][").concat(e.sourceCard,"] ").concat(e.description):e.description||e.message||e.toString())}if(0===e.length)return["\u30b2\u30fc\u30e0\u958b\u59cb"];return e.slice(-3).map(e=>e.message||e.toString())})(),h=(0,a.useCallback)(()=>{l||(o(!0),m.current&&clearTimeout(m.current),m.current=setTimeout(()=>{o(!1),m.current=null},600))},[l]),g=(0,a.useCallback)(()=>{if(!n||!t)return;const e=n.getFilteredEntries?n.getFilteredEntries("all"):[];if(0===e.length)return;const a=e[e.length-1],r=a.id||"".concat(e.length-1,"-").concat(a.description||a.message);if(r===s)return;const i=(a.description||a.message||a.toString()).toLowerCase();let l=!1;if(i.includes("\u30bf\u30fc\u30f3")&&i.includes("\u958b\u59cb")){const e=i.match(/\u30bf\u30fc\u30f3(\d+)/),t=i.match(/(\u5148\u653b|\u5f8c\u653b)/);if(e){const n=parseInt(e[1],10),a=t?t[1]:null;(n>u||a&&a!==f)&&(l=!0,d(n),p(a))}}(i.includes("\u30bf\u30fc\u30f3\u7d42\u4e86")||i.includes("\u30bf\u30fc\u30f3\u3092\u7d42\u4e86")||i.includes("\u306e\u30bf\u30fc\u30f3\u7d42\u4e86")||i.includes("turn end")||i.includes("end turn")||l)&&h(),c(r)},[n,t,s,u,f,h]);if((0,a.useEffect)(()=>{if(t&&t.round_number&&1===u&&1===t.round_number){d(t.round_number);const e=t.current_turn===t.first_player;p(e?"\u5148\u653b":"\u5f8c\u653b")}},[t,u]),(0,a.useEffect)(()=>{g()},[_,n,t,g]),(0,a.useEffect)(()=>()=>{m.current&&clearTimeout(m.current)},[]),!t)return(0,Tt.jsx)("div",{children:"\u30b2\u30fc\u30e0\u60c5\u5831\u8aad\u307f\u8fbc\u307f\u4e2d..."});const{current_turn:y,round_number:v=1,first_player:E}=t,b=y===E?"\u5148\u653b":"\u5f8c\u653b";return(0,Tt.jsxs)("div",{className:"game-info",children:[(0,Tt.jsxs)("div",{className:"game-info-header",children:[(0,Tt.jsx)("h3",{children:"h1$tor!0"}),i&&(0,Tt.jsx)("button",{className:"rules-button",onClick:i,title:"\u30eb\u30fc\u30eb\u3092\u8868\u793a",children:"\uff1f"})]}),(0,Tt.jsx)("div",{className:"turn-info-compact",children:(0,Tt.jsx)("div",{className:"turn-details",children:(0,Tt.jsxs)("span",{className:"turn-number",children:[b," \u30bf\u30fc\u30f3",v]})})}),(0,Tt.jsx)("div",{className:"log-section-full",children:(0,Tt.jsx)("div",{className:"latest-effects-compact clickable-log ".concat(l?"log-flash-turn":""),onClick:r,title:"\u30af\u30ea\u30c3\u30af\u3067\u30d7\u30ec\u30a4\u30ed\u30b0\u3092\u958b\u304f",children:(0,Tt.jsx)("div",{className:"effects-scroll",children:_.map((e,t)=>(0,Tt.jsx)("div",{className:"effect-line-compact",children:e},t))})})})]})},Gt=e=>{let{gameState:t,logEntries:n,getFilteredEntries:r,onClose:i}=e;const[l,o]=(0,a.useState)("all"),[s,c]=(0,a.useState)(null),u=(0,a.useRef)(null),[d,f]=(0,a.useState)(!0),[p,m]=(0,a.useState)(!1);if((0,a.useEffect)(()=>{const e=u.current;if(!e)return;const t=()=>{const t=e.scrollHeight-e.scrollTop-e.clientHeight<50;m(!t)};return e.addEventListener("scroll",t),()=>e.removeEventListener("scroll",t)},[]),(0,a.useEffect)(()=>{if(u.current&&n&&t){if(r(l)){const e=u.current;if(d)return e.scrollTop=e.scrollHeight,void f(!1);p||(e.scrollTop=e.scrollHeight)}}},[n,t,l,d,p,r]),(0,a.useEffect)(()=>{console.log("DEBUG: GameLogOverlay - logEntries changed:",n)},[n]),!n)return null;if(!t)return null;const _=r(l),h={total:n.length,effect:n.filter(e=>"effect_queue"===e.source).length,progress:n.filter(e=>"game_log"===e.source).length,isEnabled:!0},g=e=>{if(!e||!t)return null;if(e.details&&e.details.cardId&&t.all_card_instances){const n=t.all_card_instances[e.details.cardId];if(n)return n}if(e.sourceCardId&&t.all_card_instances){const n=t.all_card_instances[e.sourceCardId];if(n)return n}if(e.sourceCard){const r=e.sourceCard.includes(">")?e.sourceCard.split(">")[1]:e.sourceCard;if(t.cardDefs&&t.cardDefs[r]){return t.cardDefs[r]}if(t.all_card_instances){const e=Object.values(t.all_card_instances).find(e=>e&&e.name===r);if(e)return e}if(t.players)for(const e of Object.values(t.players)){var n,a;const t=null===(n=e.hand)||void 0===n?void 0:n.find(e=>e.name===r);if(t)return t;const i=null===(a=e.field)||void 0===a?void 0:a.find(e=>e.name===r);if(i)return i;if(e.ideology&&e.ideology.name===r)return e.ideology}}return null},y=(e,t)=>{if(("effect"===e.type||"effect_queue"===e.source)&&(e.playerName||e.sourceCard||e.sourceCardId)){const t=e.playerName||"\u30d7\u30ec\u30a4\u30e4\u30fc",n=e.sourceCard||"\u30ab\u30fc\u30c9",a=e.description||e.message||"\u52b9\u679c";return(0,Tt.jsxs)("div",{className:"enhanced-log-entry",children:[(0,Tt.jsxs)("span",{className:"log-player",children:["[",t,"]"]}),(0,Tt.jsxs)("span",{className:"log-source",children:["[",n,"]"]}),(0,Tt.jsx)("span",{className:"log-description",children:a})]})}return"string"===typeof e?e:e.message?e.message:e.description?e.description:"\u52b9\u679c ".concat(t+1)};return(0,Tt.jsxs)(Tt.Fragment,{children:[s&&(0,Tt.jsx)(Ut,{card:s,onClose:()=>c(null)}),(0,Tt.jsx)("div",{className:"game-log-overlay",onClick:e=>{e.target===e.currentTarget&&i()},children:(0,Tt.jsxs)("div",{className:"game-log-modal",children:[(0,Tt.jsxs)("div",{className:"game-log-header",children:[(0,Tt.jsx)("h2",{children:"\u30d7\u30ec\u30a4\u30ed\u30b0"}),(0,Tt.jsxs)("div",{className:"log-controls",children:[p&&(0,Tt.jsx)("button",{className:"scroll-to-bottom-button",onClick:()=>{u.current&&(u.current.scrollTop=u.current.scrollHeight,m(!1))},title:"\u6700\u65b0\u306e\u30ed\u30b0\u306b\u623b\u308b",children:"\u2193 \u6700\u65b0"}),(0,Tt.jsx)("button",{className:"close-button",onClick:i,children:"\xd7"})]})]}),(0,Tt.jsx)("div",{className:"log-filter-bar",children:[{value:"all",label:"\u3059\u3079\u3066"},{value:"card_play",label:"\u30ab\u30fc\u30c9\u30d7\u30ec\u30a4"},{value:"damage",label:"\u30c0\u30e1\u30fc\u30b8"},{value:"resource",label:"\u30ea\u30bd\u30fc\u30b9\u5909\u66f4"},{value:"card_move",label:"\u30ab\u30fc\u30c9\u79fb\u52d5"}].map(e=>(0,Tt.jsx)("button",{className:"filter-button ".concat(l===e.value?"active":""),onClick:()=>o(e.value),children:e.label},e.value))}),(0,Tt.jsx)("div",{className:"game-log-content",ref:u,children:0===_.length?(0,Tt.jsx)("div",{className:"no-log",children:"all"===l?"\u307e\u3060\u30ed\u30b0\u304c\u3042\u308a\u307e\u305b\u3093":"\u30d5\u30a3\u30eb\u30bf\u30fc\u6761\u4ef6\u306b\u4e00\u81f4\u3059\u308b\u30ed\u30b0\u304c\u3042\u308a\u307e\u305b\u3093"}):(0,Tt.jsx)("div",{className:"log-entries",children:_.map((e,t)=>{const n=!!g(e);return(0,Tt.jsxs)("div",{className:"log-entry ".concat("effect"===e.type?"enhanced-entry":"original-entry"," ").concat(n?"clickable-log-entry":""),onClick:n?t=>((e,t)=>{t.stopPropagation();const n=g(e);n&&c(n)})(e,t):void 0,title:n?"\u30ab\u30fc\u30c9\u8a73\u7d30\u3092\u898b\u308b":void 0,children:[(0,Tt.jsx)("div",{className:"log-index",children:t+1}),(0,Tt.jsx)("div",{className:"log-message",children:y(e,t)}),"effect"===e.type&&e.details&&(0,Tt.jsx)("div",{className:"log-timestamp",children:new Date(e.timestamp).toLocaleTimeString()}),n&&(0,Tt.jsx)("div",{className:"log-click-hint",children:"\ud83d\udccb \u30af\u30ea\u30c3\u30af\u3067\u8a73\u7d30"})]},e.id||t)})})}),(0,Tt.jsx)("div",{className:"game-log-footer",children:(0,Tt.jsxs)("div",{className:"log-stats",children:["\u7dcf\u30ed\u30b0\u6570: ",h.total,"\u4ef6 (\u52b9\u679c: ",h.effect,"\u4ef6, \u9032\u884c: ",h.progress,"\u4ef6)"]})})]})})]})},Ht={getPlayableCards:(e,t)=>{if(!e||!t)return[];const n=e.scale,a=e.ideology&&"\u539f\u59cb\u5171\u7523\u5236"===e.ideology.name;return e.hand.filter(t=>!(t.required_scale>n)&&((!a||"\u8ca1"!==t.card_type)&&("\u8ca1"!==t.card_type||e.field.length<e.field_limit)))},executeCardPlay:(e,t,n)=>{const a=Ht.getPlayableCards(e,t);if(a.length>0){const e=a[Math.floor(Math.random()*a.length)];return console.log("[NPCActions] Playing card:",e.name),n(e),!0}return!1},executeEndTurn:e=>{console.log("[NPCActions] Ending turn"),e()},shouldContinueTurn:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=.3;t+=.2*e;const n=Math.random()<t;return console.log("[NPCActions] Turn continuation check:",{cardsPlayed:e,endProbability:t,shouldEnd:n}),!n},makeRandomChoice:(e,t)=>{if(!e||0===e.length)return console.warn("[NPCActions] No options available for choice:",t),null;const n=e[Math.floor(Math.random()*e.length)];return console.log("[NPCActions] Random choice made:",{type:t,choice:n.name||n,totalOptions:e.length}),n},makeRandomNumber:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;const n=Math.floor(Math.random()*(t-e+1))+e;return console.log("[NPCActions] Random number chosen:",n,"(range: ".concat(e,"-").concat(t,")")),n},makeRandomCardSelection:(e,t)=>{if(!e||0===e.length)return[];const n=Math.min(t||1,e.length),a=[...e].sort(()=>Math.random()-.5).slice(0,n);return console.log("[NPCActions] Multiple cards selected:",{selected:a.map(e=>e.name),count:n,totalOptions:e.length}),a},decideMulligan:(e,t)=>{const n=[],a=e.scale+2;return e.hand.forEach(e=>{e.required_scale>a&&n.push(e)}),console.log("[NPCActions] NPC deciding mulligan. Player scale: ".concat(e.scale,", Threshold: ").concat(a,". Cards to mulligan:"),n.map(e=>e.name)),n}},Yt=Ht,Bt=e=>{let{gameState:t,onPlayCard:n,onEndTurn:r,onProvideInput:i,onPerformMulligan:l}=e;const o=(0,a.useRef)(t);(0,a.useEffect)(()=>{o.current=t},[t]),(0,a.useEffect)(()=>{const e=o.current;if(!e||e.game_over||e.phase===pe)return;const{current_turn:t,awaiting_input:n}=e,a=t===ye,r=n&&n.player_id===ye;if(a||r){const e=setTimeout(()=>{s()},2e3);return()=>clearTimeout(e)}},[n,r,i,o.current]),(0,a.useEffect)(()=>{const e=o.current;if((null===e||void 0===e?void 0:e.phase)===pe&&"undecided"===e.mulligan_state[ye].status){const t=e.players[ye],n=Yt.decideMulligan(t,e).map(e=>e.instance_id);l(n)}},[l,o.current]);const s=()=>{if(!o.current||o.current.game_over)return;const{current_turn:e,awaiting_input:t,players:n}=o.current,a=n[ye];t&&t.player_id===ye?c(t):e!==ye||u(a)},c=e=>{var t;let n=null;switch(e.type){case"CHOICE_CARD_TO_ADD":n=Yt.makeRandomChoice(e.options,"card_to_add");break;case"CHOICE_CARD_FROM_PILE":n=Yt.makeRandomChoice(e.options,"card_from_pile");break;case"CHOICE_CARD_FOR_EFFECT":n=Yt.makeRandomChoice(e.options,"card_for_effect");break;case"CHOICE_NUMBER":n=Yt.makeRandomNumber(e.min,e.max);break;case"CHOICE_CARDS_FOR_OPERATION":n=Yt.makeRandomCardSelection(e.options,e.count);break;default:console.warn("[NPCController] Unknown input type:",e.type),n=(null===(t=e.options)||void 0===t?void 0:t[0])||null}null!==n&&i(n)},u=e=>{Yt.executeCardPlay(e,o.current,n)||Yt.executeEndTurn(r)};return null},Wt=e=>{let{isOpen:t,onClose:n}=e;if(!t)return null;return(0,Tt.jsx)("div",{className:"overlay",onClick:e=>{e.target===e.currentTarget&&n()},children:(0,Tt.jsxs)("div",{className:"overlay-modal rules-overlay",children:[(0,Tt.jsxs)("div",{className:"overlay-header",children:[(0,Tt.jsx)("h2",{children:"\u3010\u4e16\u306e\u7406\u3011"}),(0,Tt.jsx)("button",{className:"close-button",onClick:n,children:"\xd7"})]}),(0,Tt.jsx)("div",{className:"overlay-content",children:(0,Tt.jsx)("pre",{className:"rules-text",children:'\n\u3088\u3046\u3053\u305d\u300eh1$tor!0\u300f\u3078\u2026\u2026\n\u3053\u306e\u30b2\u30fc\u30e0\u306f\u3001\u6c11\u610f\u306e\u5316\u8eab\u305f\u308b\u7686\u3055\u307e\u304c\u3001\u4e92\u3044\u304c\u7387\u3044\u308b\u6c11\u65cf\u306e\u300c\u610f\u8b58\u300d\u3092\u7af6\u3044\u5408\u3046\u30ab\u30fc\u30c9\u30b2\u30fc\u30e0\u3067\u3059\u3002\n\n\n\u25a0\u3010\u52dd\u5229\u30fb\u6557\u5317\u6761\u4ef6\u3011\n\u3044\u305a\u308c\u304b\u306e\u30d7\u30ec\u30a4\u30e4\u30fc\u306e\u300c\u610f\u8b58\u300d\u307e\u305f\u306f\u300c\u30c7\u30c3\u30ad\u306e\u679a\u6570\u300d\u304c0\u306b\u306a\u3063\u305f\u5834\u5408\u3001\u30b2\u30fc\u30e0\u306f\u7d42\u4e86\u3057\u307e\u3059\u3002\n\n* \u300c\u52dd\u5229\u6761\u4ef6\u300d:\n    * \u76f8\u624b\u306e\u300c\u610f\u8b58\u304c0\u4ee5\u4e0b\u306b\u306a\u3063\u305f\u3068\u304d\u300d\u3002\n    * \u81ea\u5206\u304b\u76f8\u624b\u306e\u30c7\u30c3\u30ad\u304c0\u679a\u306b\u306a\u308a\u3001\u305d\u306e\u3068\u304d\u306e\u300c\u610f\u8b58\u304c\u76f8\u624b\u3088\u308a\u9ad8\u3044\u3068\u304d\u300d\u3002\n\n* \u300c\u6557\u5317\u6761\u4ef6\u300d:\n    * \u81ea\u5206\u306e\u300c\u610f\u8b58\u304c0\u4ee5\u4e0b\u306b\u306a\u3063\u305f\u3068\u304d\u300d\u3002\n    * \u81ea\u5206\u304b\u76f8\u624b\u306e\u30c7\u30c3\u30ad\u304c0\u679a\u306b\u306a\u308a\u3001\u305d\u306e\u3068\u304d\u306e\u300c\u610f\u8b58\u304c\u76f8\u624b\u3088\u308a\u4f4e\u3044\u3068\u304d\u300d\u3002\n    \n* \u203b\u30c7\u30c3\u30ad\u304c0\u679a\u306b\u306a\u3063\u305f\u3068\u304d\u306e\u4e92\u3044\u306e\u610f\u8b58\u304c\u540c\u3058\u5834\u5408\u3001\u30bf\u30fc\u30f3\u4e2d\u306e\u30d7\u30ec\u30a4\u30e4\u30fc\u304c\u6557\u5317\u3057\u307e\u3059\u3002\n\n\n\u25a0 \u3010\u30b2\u30fc\u30e0\u9032\u884c\u3011\n\u300c\u5148\u653b/\u5f8c\u653b\u306e\u6c7a\u5b9a\u300d:\n  * \u30b2\u30fc\u30e0\u958b\u59cb\u6642\u306b\u30e9\u30f3\u30c0\u30e0\u3067\u5148\u653b\u30fb\u5f8c\u653b\u3092\u6c7a\u5b9a\u3057\u307e\u3059\u3002\u5148\u653b\u306f\u300c\u610f\u8b58 12\u300d\u3001\u5f8c\u653b\u306f\u300c\u610f\u8b58 15\u300d\u304b\u3089\u30b2\u30fc\u30e0\u3092\u958b\u59cb\u3057\u307e\u3059\u3002\n\n\u300c\u30bf\u30fc\u30f3\u306e\u6d41\u308c\u300d:\n1.  \u300c\u30ab\u30fc\u30c9\u30c9\u30ed\u30fc\u300d: \u30c7\u30c3\u30ad\u304b\u3089\u30ab\u30fc\u30c9\u30921\u679a\u5f15\u304d\u307e\u3059\u3002\u624b\u672d\u304c\u300c10\u679a\u300d\u3092\u8d85\u3048\u308b\u3068\u3001\u5f15\u3044\u305f\u30ab\u30fc\u30c9\u306f\u6368\u3066\u672d\u306b\u306a\u308a\u307e\u3059\u3002\n2.  \u300c\u30bf\u30fc\u30f3\u958b\u59cb\u6642\u52b9\u679c\u300d: \u767a\u52d5\u3059\u308b\u52b9\u679c\u3092\u6301\u3064\u30ab\u30fc\u30c9\u304c\u3042\u308b\u5834\u5408\u3001\u305d\u306e\u52b9\u679c\u3092\u89e3\u6c7a\u3057\u307e\u3059\u3002\n3.  \u300c\u30ab\u30fc\u30c9\u30d7\u30ec\u30a4\u30d5\u30a7\u30fc\u30ba\u300d: \u624b\u672d\u304b\u3089\u597d\u304d\u306a\u3060\u3051\u30ab\u30fc\u30c9\u3092\u30d7\u30ec\u30a4\u3067\u304d\u307e\u3059\u3002\u30ab\u30fc\u30c9\u306e\u30d7\u30ec\u30a4\u306b\u306f\u3001\u305d\u308c\u305e\u308c\u306e\u30ab\u30fc\u30c9\u306e\u300c\u5fc5\u8981\u898f\u6a21\u300d\u3092\u81ea\u5206\u306e\u300c\u898f\u6a21\u300d\u304c\u6e80\u305f\u3057\u3066\u3044\u308b\u5fc5\u8981\u304c\u3042\u308a\u307e\u3059\u3002\n4.  \u300c\u30bf\u30fc\u30f3\u7d42\u4e86\u6642\u52b9\u679c\u300d: \u5834\u306b\u51fa\u3066\u3044\u308b\u8ca1\u30ab\u30fc\u30c9\u3084\u3001\u73fe\u5728\u6709\u52b9\u306a\u30a4\u30c7\u30aa\u30ed\u30ae\u30fc\u30ab\u30fc\u30c9\u306e\u30bf\u30fc\u30f3\u7d42\u4e86\u6642\u52b9\u679c\u3092\u89e3\u6c7a\u3057\u307e\u3059\u3002\n    * \u8ca1\u30ab\u30fc\u30c9\u306f\u300c\u5de6\u304b\u3089\u9806\u300d\u306b\u52b9\u679c\u3092\u89e3\u6c7a\u3057\u3001\u8010\u4e45\u5024\u304c0\u306b\u306a\u3063\u305f\u5834\u5408\u306f\u6368\u3066\u672d\u306b\u306a\u308a\u307e\u3059\u3002\n5.  \u300c\u30bf\u30fc\u30f3\u7d42\u4e86\u300d: \u76f8\u624b\u306e\u30bf\u30fc\u30f3\u306b\u79fb\u308a\u307e\u3059\u3002\n\n\n\u25a0 \u3010\u30ab\u30fc\u30c9\u306e\u7a2e\u985e\u3011\n* \u300c\u8ca1\u30ab\u30fc\u30c9\u300d: \u5834\u306b\u51fa\u3057\u3066\u52b9\u679c\u3092\u767a\u63ee\u3059\u308b\u30ab\u30fc\u30c9\u3067\u3059\u3002\u5834\u306b\u306f"\u57fa\u672c\u7684\u306b"\u6700\u5927\u300c5\u679a\u300d\u307e\u3067\u914d\u7f6e\u3067\u304d\u307e\u3059\u3002\u8010\u4e45\u5024\u3092\u6301\u3061\u3001\u30c0\u30e1\u30fc\u30b8\u3092\u53d7\u3051\u308b\u3068\u8010\u4e45\u5024\u304c\u6e1b\u5c11\u3057\u30010\u306b\u306a\u308b\u3068\u6368\u3066\u672d\u306b\u306a\u308a\u307e\u3059\u3002\u653b\u6483\u80fd\u529b\u306f\u5fc5\u305a\u3057\u3082\u6301\u3063\u3066\u3044\u308b\u3068\u306f\u9650\u308a\u307e\u305b\u3093\u3002\n* \u300c\u4e8b\u8c61\u30ab\u30fc\u30c9\u300d: \u30d7\u30ec\u30a4\u3059\u308b\u3068\u5373\u5ea7\u306b\u52b9\u679c\u3092\u767a\u63ee\u3057\u3001\u305d\u306e\u5f8c\u6368\u3066\u672d\u306b\u306a\u308a\u307e\u3059\u3002\n* \u300c\u30a4\u30c7\u30aa\u30ed\u30ae\u30fc\u30ab\u30fc\u30c9\u300d: \u5834\u306b\u51fa\u3057\u3066\u7d99\u7d9a\u7684\u306b\u52b9\u679c\u3092\u767a\u63ee\u3059\u308b\u30ab\u30fc\u30c9\u3067\u3059\u3002\u5834\u306b\u306f\u300c1\u679a\u300d\u3057\u304b\u914d\u7f6e\u3067\u304d\u307e\u305b\u3093\u3002\u65b0\u3057\u3044\u30a4\u30c7\u30aa\u30ed\u30ae\u30fc\u30ab\u30fc\u30c9\u3092\u30d7\u30ec\u30a4\u3059\u308b\u3068\u3001\u305d\u306e\u3068\u304d\u5834\u306b\u3042\u308b\u30a4\u30c7\u30aa\u30ed\u30ae\u30fc\u30ab\u30fc\u30c9\u306f\u6368\u3066\u672d\u306b\u306a\u308a\u307e\u3059\u3002\u65e2\u306b\u914d\u7f6e\u3055\u308c\u3066\u3044\u308b\u30a4\u30c7\u30aa\u30ed\u30ae\u30fc\u3068\u540c\u3058\u540d\u524d\u306e\u30a4\u30c7\u30aa\u30ed\u30ae\u30fc\u30ab\u30fc\u30c9\u3092\u914d\u7f6e\u3059\u308b\u3053\u3068\u3082\u53ef\u80fd\u3067\u3001\u305d\u306e\u5834\u5408\u306f\u610f\u8b58\u304c+1\u3055\u308c\u307e\u3059\u3002\n\n\n\u25a0 \u3010\u30ad\u30fc\u30ef\u30fc\u30c9\u80fd\u529b\u3011\n\u30b2\u30fc\u30e0\u4e2d\u306b\u767b\u5834\u3059\u308b\u7279\u5b9a\u306e\u30ad\u30fc\u30ef\u30fc\u30c9\u80fd\u529b\u306b\u3064\u3044\u3066\u8aac\u660e\u3057\u307e\u3059\u3002\n\n* \u300c\u53cd\u6483X\uff08\u6570\u5024\uff09\u300d: \u3053\u306e\u30ab\u30fc\u30c9\u304c\u76f8\u624b\u306e\u8ca1\u30ab\u30fc\u30c9\u304b\u3089\u30c0\u30e1\u30fc\u30b8\u3092\u53d7\u3051\u305f\u6642\u3001\u305d\u306e\u30c0\u30e1\u30fc\u30b8\u3092\u4e0e\u3048\u305f\u76f8\u624b\u306e\u8ca1\u30ab\u30fc\u30c9\u306bX\u30c0\u30e1\u30fc\u30b8\u3092\u4e0e\u3048\u307e\u3059\u3002\n\n\n\u25a0\u3010\u305d\u306e\u4ed6\u3011\n* \u300c\u898f\u6a21\u300d\u306f\u30010\u3092\u4e0b\u56de\u308b\u3053\u3068\u306f\u3042\u308a\u307e\u305b\u3093\u3002\n\n\uff08\u30eb\u30fc\u30eb\u306f\u30b2\u30fc\u30e0\u306e\u66f4\u65b0\u306b\u4f34\u3044\u3001\u9069\u5b9c\u8ffd\u52a0\u30fb\u66f4\u65b0\u3055\u308c\u308b\u5834\u5408\u304c\u3042\u308a\u307e\u3059\u3002\uff09'})})]})})},qt=e=>{var t;let{hand:n,onConfirmMulligan:r,cardDefs:i,mulliganState:l}=e;const[o,s]=(0,a.useState)([]),[c,u]=(0,a.useState)(!1);(0,a.useEffect)(()=>{c&&setTimeout(()=>{n.forEach(e=>{if(e.isNew){const t=document.querySelector('.mulligan-card[data-card-id="'.concat(e.instance_id,'"]'));t&&((e,t)=>{if(!e)return void console.warn("\ud83c\udfacANIM [Particle] Target for particle explosion is null.");console.log("\ud83c\udfacANIM [Particle] Creating particle explosion for card type:",t);const n=e.getBoundingClientRect(),a=n.left+n.width/2,r=n.top+n.height/2,i="\u8ca1"===t?"particle-wealth":"\u4e8b\u8c61"===t?"particle-event":"particle-ideology";for(let l=0;l<12;l++){const e=document.createElement("div");e.className="particle ".concat(i);const t=l/12*2*Math.PI,n=60+40*Math.random(),o=.8+.4*Math.random();e.style.left=a+"px",e.style.top=r+"px",e.style.position="fixed",e.style.pointerEvents="none",e.style.zIndex="9999",e.style.transform="translate(-50%, -50%) scale(0.2)",e.style.opacity="0.9",e.style.transition="all 0.8s cubic-bezier(0.25, 0.46, 0.45, 0.94)",e.style.animation="none",document.body.appendChild(e),setTimeout(()=>{const i=a+Math.cos(t)*n,l=r+Math.sin(t)*n;e.style.left=i+"px",e.style.top=l+"px",e.style.transform="translate(-50%, -50%) scale(".concat(o,")"),e.style.opacity="0"},50),setTimeout(()=>{e.parentNode&&document.body.removeChild(e)},900)}console.log("\ud83c\udfacANIM [Particle] Created",12,"particles")})(t,e.card_type)}})},50)},[c,n]);const d=(null===(t=l[ye])||void 0===t?void 0:t.count)||0;return(0,Tt.jsx)("div",{className:"mulligan-overlay",children:(0,Tt.jsxs)("div",{className:"mulligan-modal",children:[(0,Tt.jsx)("h2",{children:c?"\u65b0\u3057\u3044\u624b\u672d":"\u30de\u30ea\u30ac\u30f3"}),(0,Tt.jsx)("p",{children:c?"\u624b\u672d\u3092\u4ea4\u63db\u3057\u307e\u3057\u305f\uff01":"\u4ea4\u63db\u3057\u305f\u3044\u30ab\u30fc\u30c9\u3092\u9078\u629e\u3057\u3066\u304f\u3060\u3055\u3044\u3002"}),c&&(0,Tt.jsxs)("p",{className:"npc-mulligan-info",children:["\u76f8\u624b\u306f",(0,Tt.jsx)("span",{style:{fontWeight:"bold",fontSize:"1.2em"},children:d}),"\u679a\u4ea4\u63db\u3057\u307e\u3057\u305f\u3002"]}),(0,Tt.jsx)("div",{className:"mulligan-hand-container",children:n.map(e=>{const t=i[e.name],n=!c&&o.includes(e.instance_id);return(0,Tt.jsxs)("div",{className:"mulligan-card card-game ".concat(n?"selected":""),"data-card-id":e.instance_id,onClick:()=>{return t=e.instance_id,void(c||s(e=>e.includes(t)?e.filter(e=>e!==t):[...e,t]));var t},children:[(0,Tt.jsx)("div",{className:"mulligan-card-name",children:e.name}),(0,Tt.jsxs)("div",{className:"mulligan-card-cost",children:["\u5fc5\u8981\u898f\u6a21: ",e.required_scale]}),(0,Tt.jsx)("div",{className:"mulligan-card-type",children:t.card_type})]},e.instance_id)})}),c&&(0,Tt.jsx)("div",{className:"mulligan-progress-bar-container",children:(0,Tt.jsx)("div",{className:"mulligan-progress-bar"})}),!c&&(0,Tt.jsx)("div",{className:"mulligan-actions",children:(0,Tt.jsxs)("button",{onClick:()=>{c||(u(!0),r(o))},children:["\u6c7a\u5b9a\u3059\u308b (",o.length,"\u679a)"]})})]})})},Vt=(e,t)=>{const[n,r]=(0,a.useState)([]);(0,a.useEffect)(()=>{const n=[...e||[],...t?[t]:[]],a=new Set(n.map(e=>e.instance_id));r(e=>te([],t=>{const r=new Map(e.map(e=>[e.instance_id,e]));for(const e of n){const n=r.get(e.instance_id);n?t.push(c(c({},e),{},{animation:n.animation})):t.push(e)}for(const n of e)a.has(n.instance_id)||n.animation||t.push(c(c({},n),{},{animation:"destroying"}))}))},[e,t]);return{presentedCards:n,handleAnimationEnd:e=>{r(t=>t.filter(t=>t.instance_id!==e))}}},Qt=e=>{var t,n;let{gameState:r,cardDefs:i,onPlayCard:l,onEndTurn:o,onProvideInput:s,onSurrender:c,onGameStateUpdate:u,effectMonitor:d,enhancedLog:f,onConfirmMulligan:p}=e;const[m,_]=(0,a.useState)(null),[h,g]=(0,a.useState)(null),[y,v]=(0,a.useState)(!1),[E,b]=(0,a.useState)(!1),[C,A]=(0,a.useState)(!1),S=null===r||void 0===r||null===(t=r.players)||void 0===t?void 0:t[ge],N=null===r||void 0===r||null===(n=r.players)||void 0===n?void 0:n[ye],{controller:D,handleEffectForAnimation:R,isReady:w}=xt(r,d),{presentedCards:k,handleAnimationEnd:O}=Vt(null===S||void 0===S?void 0:S.field,null===S||void 0===S?void 0:S.ideology),{presentedCards:x,handleAnimationEnd:T}=Vt(null===N||void 0===N?void 0:N.field,null===N||void 0===N?void 0:N.ideology);if(a.useEffect(()=>{const e=f.getEffectMonitor();if(e&&w&&R)return e.registerAnimationCallback(R),D&&D.setGameState&&D.setGameState(r),()=>{e.removeAnimationCallback(R)}},[f,w,R,D,r]),a.useEffect(()=>{r&&D&&D.animationManager&&(console.log("[DEBUG] Game.js: Calling updatePersistentAnimations due to gameState change."),D.animationManager.updatePersistentAnimations(r))},[r,D]),(0,a.useEffect)(()=>{(async()=>{var e;if((null===r||void 0===r||null===(e=r.animation_queue)||void 0===e?void 0:e.length)>0&&R&&!r.isAnimationLocked&&w){const e=r.animation_queue[0],t=e.effect,n=e.sourceCard;await R(t,n),u(e=>te(e,e=>{e.animation_queue.shift()}))}})()},[r,u,R,w]),!r)return(0,Tt.jsx)("div",{children:"Loading Game..."});const{current_turn:I,awaiting_input:P}=r,M=e=>{(!P||"CHOICE_CARD_FOR_EFFECT"!==P.type&&"CHOICE_CARDS_FOR_OPERATION"!==P.type)&&S.hand.includes(e)?P?_(e):g(e):_(e)};return(0,Tt.jsxs)("div",{className:"game-board",children:[r.phase===pe&&(0,Tt.jsx)(qt,{hand:S.hand,onConfirmMulligan:e=>p(ge,e),cardDefs:i,mulliganState:r.mulligan_state}),(0,Tt.jsx)(Bt,{gameState:r,onPlayCard:l,onEndTurn:o,onProvideInput:s,onPerformMulligan:e=>p(ye,e)}),(()=>{if(!P||P.player_id!==I)return null;if(P.player_id!==ge)return null;if("CHOICE_NUMBER"===P.type)return(0,Tt.jsx)(jt,{prompt:P.prompt,min:P.min,max:P.max,onConfirm:s});if("CHOICE_CARD_TO_ADD"===P.type)return(0,Tt.jsx)("div",{className:"choice-prompt-overlay",children:(0,Tt.jsxs)("div",{className:"choice-prompt",children:[(0,Tt.jsx)("h3",{children:"\u30ab\u30fc\u30c9\u3092\u9078\u629e\u3057\u3066\u304f\u3060\u3055\u3044"}),(0,Tt.jsx)("div",{className:"choice-options",children:P.options.map(e=>(0,Tt.jsxs)("div",{className:"choice-card-container",children:[(0,Tt.jsx)("button",{onClick:()=>s(e),children:e}),(0,Tt.jsx)("button",{onClick:()=>_(i[e]),children:"\u8a73\u7d30"})]},e))})]})});if("CHOICE_CARD_FROM_PILE"===P.type)return(0,Tt.jsx)("div",{className:"choice-prompt-overlay",children:(0,Tt.jsxs)("div",{className:"choice-prompt",children:[(0,Tt.jsx)("h3",{children:"\u30ab\u30fc\u30c9\u30921\u679a\u9078\u629e\u3057\u3066\u304f\u3060\u3055\u3044"}),(0,Tt.jsx)("div",{className:"choice-options-scrollable",children:P.options.map(e=>(0,Tt.jsx)("button",{onClick:()=>s(e),children:e.name},e.instance_id))})]})});if("CHOICE_CARDS_FOR_OPERATION"===P.type){const e=P.source_card_name||"\u4e0d\u660e\u306a\u30ab\u30fc\u30c9";return(0,Tt.jsx)("div",{className:"choice-prompt-overlay",children:(0,Tt.jsxs)("div",{className:"choice-prompt",children:[(0,Tt.jsxs)("h3",{children:[e,"\u306e\u52b9\u679c"]}),(0,Tt.jsx)("p",{children:"\u624b\u672d\u304b\u3089\u8ca1\u30ab\u30fc\u30c9\u30921\u679a\u9078\u629e\u3057\u3066\u304f\u3060\u3055\u3044"}),(0,Tt.jsx)("div",{className:"choice-options-scrollable",children:P.options.map(e=>(0,Tt.jsxs)("div",{className:"choice-card-container",children:[(0,Tt.jsx)("button",{className:"choice-card-select",onClick:()=>s([e]),children:(0,Tt.jsxs)("div",{className:"choice-card-info",children:[(0,Tt.jsx)("span",{className:"choice-card-name",children:e.name}),(0,Tt.jsxs)("span",{className:"choice-card-type",children:["(",e.card_type,")"]}),e.durability&&(0,Tt.jsxs)("span",{className:"choice-card-durability",children:["\u8010\u4e45",e.durability]}),e.required_scale&&(0,Tt.jsxs)("span",{className:"choice-card-scale",children:["\u5fc5\u8981\u898f\u6a21",e.required_scale]})]})}),(0,Tt.jsx)("button",{className:"choice-card-detail",onClick:()=>_(e),title:"\u8a73\u7d30\u3092\u898b\u308b",children:"\ud83d\udccb"})]},e.instance_id))})]})})}if("CHOICE_CARD_FOR_EFFECT"===P.type){const e=P.source_card_name||"\u4e0d\u660e\u306a\u30ab\u30fc\u30c9";return(0,Tt.jsx)("div",{className:"choice-prompt-overlay",children:(0,Tt.jsxs)("div",{className:"choice-prompt",children:[(0,Tt.jsxs)("h3",{children:[e,"\u306e\u52b9\u679c"]}),(0,Tt.jsx)("p",{children:P.prompt||"\u30ab\u30fc\u30c9\u30921\u679a\u9078\u629e\u3057\u3066\u304f\u3060\u3055\u3044"}),(0,Tt.jsx)("div",{className:"choice-options-scrollable",children:P.options.map(e=>(0,Tt.jsxs)("div",{className:"choice-card-container",children:[(0,Tt.jsx)("button",{className:"choice-card-select",onClick:()=>s(e),children:(0,Tt.jsxs)("div",{className:"choice-card-info",children:[(0,Tt.jsx)("span",{className:"choice-card-name",children:e.name}),(0,Tt.jsxs)("span",{className:"choice-card-type",children:["(",e.card_type,")"]}),e.durability&&(0,Tt.jsxs)("span",{className:"choice-card-durability",children:["\u8010\u4e45",e.durability]}),e.required_scale&&(0,Tt.jsxs)("span",{className:"choice-card-scale",children:["\u5fc5\u8981\u898f\u6a21",e.required_scale]})]})}),(0,Tt.jsx)("button",{className:"choice-card-detail",onClick:()=>_(e),title:"\u8a73\u7d30\u3092\u898b\u308b",children:"\ud83d\udccb"})]},e.instance_id))})]})})}return P.prompt?(0,Tt.jsx)("div",{className:"prompt-overlay",children:(0,Tt.jsx)("div",{className:"prompt",children:P.prompt})}):null})(),C&&(0,Tt.jsx)("div",{className:"choice-prompt-overlay",onClick:()=>A(!1),children:(0,Tt.jsxs)("div",{className:"choice-prompt",onClick:e=>e.stopPropagation(),children:[(0,Tt.jsx)("h3",{children:"\u672c\u5f53\u306b\u964d\u4f0f\u3057\u307e\u3059\u304b\uff1f"}),(0,Tt.jsx)("p",{children:"\u3053\u306e\u64cd\u4f5c\u306f\u53d6\u308a\u6d88\u305b\u307e\u305b\u3093\u3002"}),(0,Tt.jsxs)("div",{className:"choice-options",children:[(0,Tt.jsx)("button",{className:"surrender-confirm-yes",onClick:()=>{c(),A(!1)},children:"\u306f\u3044"}),(0,Tt.jsx)("button",{onClick:()=>A(!1),children:"\u3044\u3044\u3048"})]})]})}),h&&(0,Tt.jsx)(Ft,{card:h,player:S,gameState:r,onPlay:()=>{h&&(l(h),g(null))},onClose:()=>g(null)}),y&&(0,Tt.jsx)(Tt.Fragment,{children:(0,Tt.jsx)(Gt,{gameState:r,logEntries:f.combinedLog,getFilteredEntries:f.getFilteredEntries,onClose:()=>v(!1)})}),E&&(0,Tt.jsx)(Wt,{isOpen:E,onClose:()=>b(!1)}),m&&(0,Tt.jsx)(Ut,{card:m,onClose:()=>_(null)}),(0,Tt.jsx)("div",{className:"game-info-area",children:(0,Tt.jsx)(zt,{gameState:r,enhancedLog:f,onShowLog:()=>v(!0),onShowRules:()=>b(!0)})}),(0,Tt.jsx)("div",{className:"opponent-stats-area ".concat(I===ye?"opponent-turn-indicator":""),children:(0,Tt.jsx)(It,{player:N,gameState:r})}),(0,Tt.jsx)("div",{className:"opponent-field-area",children:(0,Tt.jsx)(Mt,{playerName:N.name,cards:x,fieldLimit:N.field_limit,onProvideInput:s,awaiting_input:P,onCardClick:M,onAnimationEnd:T})}),(0,Tt.jsx)("div",{className:"player-field-area",children:(0,Tt.jsx)(Mt,{playerName:S.name,cards:k,fieldLimit:S.field_limit,onProvideInput:s,awaiting_input:P,onCardClick:M,onAnimationEnd:O})}),(0,Tt.jsxs)("div",{className:"player-hand-area",children:[(0,Tt.jsx)(Lt,{player:S,onPlayCard:l,onProvideInput:s,awaiting_input:P,onCardClick:M}),(0,Tt.jsx)("button",{className:"surrender-button",onClick:()=>{A(!0)},children:"\u964d\u4f0f"})]}),(0,Tt.jsx)("div",{className:"player-stats-area ".concat(I===ge?"current-turn-indicator":""),children:(0,Tt.jsx)(It,{player:S,gameState:r,onEndTurn:o})}),r.isAnimationLocked&&(0,Tt.jsx)("div",{className:"animation-lock-overlay",children:(0,Tt.jsxs)("div",{className:"animation-lock-message",children:[(0,Tt.jsx)("div",{children:"\ud83c\udfac \u6f14\u51fa\u4e2d..."}),(0,Tt.jsx)("div",{style:{fontSize:"0.8em",marginTop:"5px"},children:"\u3057\u3070\u3089\u304f\u304a\u5f85\u3061\u304f\u3060\u3055\u3044"})]})})]})},$t=e=>{let{onMenuSelect:t}=e;return(0,Tt.jsx)("div",{className:"title-screen",children:(0,Tt.jsxs)("div",{className:"title-content",children:[(0,Tt.jsx)("div",{className:"ascii-art",children:(0,Tt.jsx)("pre",{children:'\n                                              s                               ..\n    .uef^"          oe           .           :8                              888B.     .n~~%x.\n  :d88E           .@88           E          .88           u.      .u    .   48888E   x88X   888.\n  `888E       ==*88888        .x+E:..      :888ooo  ...ue888b   .d88B :@c   \'8888\'  X888X   88888X\n   888E .z8k     88888      u8~  E  `b.  -*8888888  888R Y888r ="8888f8888r  Y88F  X8888X   88888f\n   888E  888E    88888     88N.  E\'8888~   8888     888R I888>   4888>        4    88888X   88888\n   888E  888E    88888     88888b&.`""`    8888     888R I888>   4888>        4    88888X   8888"\n   888E  888E    88888     \'88888888e.    .8888Lu= u8888cJ888   .d888L .+     .    48888X   8888"\n   888E  888E    88888       "*8888888N   ^%888*    "*888*P"    ^"8888*"     u8N.   ?888X   8888"\n  m888N= 888>    88888      uu. ^8*8888E    \'Y"       \'Y"          "Y"      "*88%    "88X   88*`\n   `Y"   888 \'**%%%%%%**   @888L E   98~                                      ""       ^"==="`\n        J88"              \'8888~ E  .*"\n        @%                 `*.   E  .*"\n      :"                     `~==R=~`\n'})}),(0,Tt.jsxs)("div",{className:"menu-options",children:[(0,Tt.jsx)("button",{className:"menu-button",onClick:()=>t("start"),children:"\u30b2\u30fc\u30e0\u958b\u59cb"}),(0,Tt.jsx)("button",{className:"menu-button",onClick:()=>t("deckBuilder"),children:"\u30c7\u30c3\u30ad\u69cb\u7bc9"}),(0,Tt.jsx)("button",{className:"menu-button",onClick:()=>t("cardLibrary"),children:"\u30e9\u30a4\u30d6\u30e9\u30ea"}),(0,Tt.jsx)("button",{className:"menu-button",onClick:()=>t("rules"),children:"\u30eb\u30fc\u30eb"}),(0,Tt.jsx)("button",{className:"menu-button",onClick:()=>t("credits"),children:"\u958b\u767a\u30c4\u30fc\u30eb\u7b49"})]})]})})};function Kt(e){try{const t=localStorage.getItem(e);return t?JSON.parse(t):null}catch(t){return console.error("Error getting item ".concat(e," from localStorage"),t),null}}function Xt(e,t){try{const n=JSON.stringify(t);localStorage.setItem(e,n)}catch(n){console.error("Error saving item ".concat(e," to localStorage"),n)}}const Zt=e=>{let{data:t}=e;const n=Math.max(...t.map(e=>e.count),0);return(0,Tt.jsx)("div",{className:"cost-curve-chart",children:t.map((e,t)=>(0,Tt.jsxs)("div",{className:"chart-bar-container",children:[(0,Tt.jsx)("div",{className:"chart-bar",children:(0,Tt.jsx)("div",{className:"chart-bar-fill",style:{height:"".concat(n>0?e.count/n*100:0,"%")},children:(0,Tt.jsx)("span",{className:"chart-bar-label-count",children:e.count>0?e.count:""})})}),(0,Tt.jsx)("span",{className:"chart-bar-label",children:e.label})]},t))})},Jt=e=>{let{presetDecks:t,cardDefs:n,onDeckSelected:r,onBack:i,onScreenChange:l}=e;const[o,s]=(0,a.useState)(null),[u,d]=(0,a.useState)(!1),[f,p]=(0,a.useState)(null),[m,_]=(0,a.useState)({}),[h,g]=(0,a.useState)("single");(0,a.useEffect)(()=>{_(Kt("customDecks")||{})},[]);const y=(0,a.useMemo)(()=>[...t.map(e=>c(c({},e),{},{type:"\u30d7\u30ea\u30bb\u30c3\u30c8",isValid:e.cards.length>=30})),...Object.values(m).map(e=>c(c({},e),{},{type:"\u30ab\u30b9\u30bf\u30e0",isValid:e.cards.length>=30}))],[t,m]),v=()=>{o?o.isValid?o.cards&&0!==o.cards.length?r(o):alert("\u9078\u629e\u3055\u308c\u305f\u30c7\u30c3\u30ad\u306b\u30ab\u30fc\u30c9\u304c\u3042\u308a\u307e\u305b\u3093\u3002"):alert("\u3053\u306e\u30c7\u30c3\u30ad\u306f\u4f7f\u7528\u3067\u304d\u307e\u305b\u3093\uff0830\u679a\u4ee5\u4e0a\u306e\u30ab\u30fc\u30c9\u304c\u5fc5\u8981\u3067\u3059\uff09\u3002"):alert("\u30c7\u30c3\u30ad\u3092\u9078\u629e\u3057\u3066\u304f\u3060\u3055\u3044\u3002")};return(0,Tt.jsxs)("div",{className:"deck-selection-screen",children:[(0,Tt.jsxs)("div",{className:"screen-header",children:[(0,Tt.jsx)("h1",{children:"\u30c7\u30c3\u30ad\u9078\u629e"}),(0,Tt.jsx)("button",{className:"back-button",onClick:i,children:"\u2190 \u30bf\u30a4\u30c8\u30eb\u306b\u623b\u308b"})]}),u?(()=>{if(!o||!u)return null;const e=o.cards.reduce((e,t)=>(e[t]=(e[t]||0)+1,e),{}),t=(()=>{if("single"===h){const e={};o.cards.forEach(t=>{const a=Object.values(n).find(e=>e.name===t);if(a){const t=a.required_scale;e[t]=(e[t]||0)+1}});const t=Math.max(...Object.keys(e).map(Number),0),a=[];for(let n=0;n<=t;n++)e[n]>0&&a.push({label:"".concat(n),count:e[n]});return a}{const e={"0-4":0,"5-9":0,"10-14":0,"15-19":0,"20+":0};return o.cards.forEach(t=>{const a=Object.values(n).find(e=>e.name===t);if(a){const t=a.required_scale;t<=4?e["0-4"]++:t<=9?e["5-9"]++:t<=14?e["10-14"]++:t<=19?e["15-19"]++:e["20+"]++}}),Object.entries(e).map(e=>{let[t,n]=e;return{label:t,count:n}})}})();return(0,Tt.jsxs)("div",{className:"deck-preview",children:[(0,Tt.jsxs)("h3",{children:[o.name," ",!o.isValid&&"(\u679a\u6570\u4e0d\u8db3)"]}),(0,Tt.jsx)("p",{className:"deck-description",children:o.description||"".concat(o.type,"\u30c7\u30c3\u30ad")}),(0,Tt.jsxs)("div",{className:"deck-cards",children:[(0,Tt.jsxs)("h4",{children:["\u30c7\u30c3\u30ad\u5185\u5bb9 (",o.cards.length,"\u679a)"]}),(0,Tt.jsx)("div",{className:"card-list",children:Object.entries(e).map(e=>{let[t,a]=e;const r=Object.values(n).find(e=>e.name===t);return r?(0,Tt.jsxs)("div",{className:"deck-card-item",onClick:()=>(e=>{const t=Object.values(n).find(t=>t.name===e);t&&p(t)})(t),children:[(0,Tt.jsxs)("span",{className:"card-count",children:["\xd7",a]}),(0,Tt.jsx)("span",{className:"card-name",children:t}),(0,Tt.jsxs)("span",{className:"card-type",children:["(",r.card_type,")"]}),(0,Tt.jsxs)("span",{className:"card-scale",children:["\u898f\u6a21:",r.required_scale]})]},t):null})})]}),(0,Tt.jsxs)("div",{className:"cost-curve-wrapper",children:[(0,Tt.jsxs)("div",{className:"cost-curve-header",children:[(0,Tt.jsx)("h3",{children:"\u898f\u6a21\u5206\u5e03"}),(0,Tt.jsxs)("button",{onClick:()=>g("single"===h?"grouped":"single"),children:["\u8868\u793a\u5207\u66ff (","single"===h?"1\u533a\u5207\u308a":"5\u533a\u5207\u308a",")"]})]}),(0,Tt.jsx)(Zt,{data:t})]}),(0,Tt.jsxs)("div",{className:"deck-actions",children:[(0,Tt.jsx)("button",{onClick:()=>d(!1),children:"\u623b\u308b"}),(0,Tt.jsx)("button",{onClick:v,className:"confirm-button",disabled:!o.isValid,children:"\u3053\u306e\u30c7\u30c3\u30ad\u3067\u30b2\u30fc\u30e0\u958b\u59cb"})]})]})})():(0,Tt.jsxs)("div",{className:"deck-selection-area",children:[(0,Tt.jsx)("h2",{children:"\u30c7\u30c3\u30ad\u3092\u9078\u629e"}),(0,Tt.jsx)("div",{className:"deck-grid",children:y.map(e=>(0,Tt.jsxs)("div",{className:"deck-card ".concat(e.isValid?"":"invalid"),onClick:()=>(e=>{s(e),d(!0)})(e),children:[(0,Tt.jsx)("span",{className:"deck-type-badge ".concat(e.type.toLowerCase()),children:e.type}),(0,Tt.jsx)("h3",{children:e.name}),(0,Tt.jsx)("p",{className:"deck-description",children:e.description}),(0,Tt.jsxs)("div",{className:"deck-info",children:[(0,Tt.jsxs)("span",{children:["\u30ab\u30fc\u30c9\u6570: ",e.cards.length]}),!e.isValid&&(0,Tt.jsx)("span",{className:"invalid-tag",children:"\u7121\u52b9\uff0830\u679a\u4ee5\u4e0a\u5fc5\u8981\uff09"})]}),"\u30ab\u30b9\u30bf\u30e0"===e.type&&(0,Tt.jsxs)("div",{className:"custom-deck-actions",children:[(0,Tt.jsx)("button",{className:"edit-button",onClick:t=>((e,t)=>{t.stopPropagation(),l("deckBuilder",{deckToEdit:e})})(e,t),children:"\u7de8\u96c6"}),(0,Tt.jsx)("button",{className:"delete-button",onClick:t=>((e,t)=>{if(t.stopPropagation(),window.confirm("\u30c7\u30c3\u30ad\u300c".concat(e,"\u300d\u3092\u672c\u5f53\u306b\u524a\u9664\u3057\u307e\u3059\u304b\uff1f"))){const t=c({},m);delete t[e],Xt("customDecks",t),_(t)}})(e.name,t),children:"\u524a\u9664"})]})]},e.name))})]}),f&&(0,Tt.jsx)(Ut,{card:f,onClose:()=>p(null)})]})},en=e=>{let{cardDefs:t,onBack:n}=e;const[r,i]=(0,a.useState)("implementation"),[l,o]=(0,a.useState)("all"),[s,c]=(0,a.useState)("all"),[u,d]=(0,a.useState)(null),f=(0,a.useMemo)(()=>{let e=Object.values(t);return"all"!==l&&(e=e.filter(e=>e.card_type===l)),"all"!==s&&(e=e.filter(e=>{const t=e.required_scale;switch(s){case"0-2":return t>=0&&t<=2;case"3-15":return t>=3&&t<=15;case"16+":return t>=16;default:return!0}})),e.sort((e,t)=>"requiredScale"===r?e.required_scale-t.required_scale:(e.definitionOrder||0)-(t.definitionOrder||0)),e},[t,r,l,s]);return(0,Tt.jsxs)("div",{className:"card-library-screen",children:[(0,Tt.jsxs)("div",{className:"screen-header",children:[(0,Tt.jsx)("h1",{children:"\u30ab\u30fc\u30c9\u4e00\u89a7"}),(0,Tt.jsx)("button",{className:"back-button",onClick:n,children:"\u2190 \u30bf\u30a4\u30c8\u30eb\u306b\u623b\u308b"})]}),(0,Tt.jsxs)("div",{className:"library-controls",children:[(0,Tt.jsxs)("div",{className:"sort-controls",children:[(0,Tt.jsx)("label",{children:"\u30bd\u30fc\u30c8:"}),(0,Tt.jsxs)("select",{value:r,onChange:e=>i(e.target.value),children:[(0,Tt.jsx)("option",{value:"implementation",children:"\u5b9f\u88c5\u9806"}),(0,Tt.jsx)("option",{value:"requiredScale",children:"\u5fc5\u8981\u898f\u6a21\u9806"})]})]}),(0,Tt.jsxs)("div",{className:"filter-controls",children:[(0,Tt.jsx)("label",{children:"\u30ab\u30fc\u30c9\u30bf\u30a4\u30d7:"}),(0,Tt.jsxs)("select",{value:l,onChange:e=>o(e.target.value),children:[(0,Tt.jsx)("option",{value:"all",children:"\u3059\u3079\u3066"}),(0,Tt.jsx)("option",{value:"\u8ca1",children:"\u8ca1"}),(0,Tt.jsx)("option",{value:"\u4e8b\u8c61",children:"\u4e8b\u8c61"}),(0,Tt.jsx)("option",{value:"\u30a4\u30c7\u30aa\u30ed\u30ae\u30fc",children:"\u30a4\u30c7\u30aa\u30ed\u30ae\u30fc"})]}),(0,Tt.jsx)("label",{children:"\u5fc5\u8981\u898f\u6a21:"}),(0,Tt.jsxs)("select",{value:s,onChange:e=>c(e.target.value),children:[(0,Tt.jsx)("option",{value:"all",children:"\u3059\u3079\u3066"}),(0,Tt.jsx)("option",{value:"0-2",children:"0-2"}),(0,Tt.jsx)("option",{value:"3-15",children:"3-15"}),(0,Tt.jsx)("option",{value:"16+",children:"16+"})]})]})]}),(0,Tt.jsx)("div",{className:"card-grid",children:f.map(e=>(0,Tt.jsx)(Pt,{card:e,mode:"library",onClick:()=>(e=>{d(e)})(e)},e.name))}),(0,Tt.jsxs)("div",{className:"library-stats",children:["\u8868\u793a\u4e2d: ",f.length," / ",Object.keys(t).length," \u30ab\u30fc\u30c9"]}),u&&(0,Tt.jsx)(Ut,{card:u,onClose:()=>d(null)})]})},tn=e=>{let{isOpen:t,onClose:n}=e;if(!t)return null;return(0,Tt.jsx)("div",{className:"overlay",onClick:e=>{e.target===e.currentTarget&&n()},children:(0,Tt.jsxs)("div",{className:"overlay-modal credits-overlay",children:[(0,Tt.jsxs)("div",{className:"overlay-header",children:[(0,Tt.jsx)("h2",{children:"\u3010\u8b1d\u8f9e\u3011"}),(0,Tt.jsx)("button",{className:"close-button",onClick:n,children:"\xd7"})]}),(0,Tt.jsx)("div",{className:"overlay-content",children:(0,Tt.jsx)("pre",{className:"credits-text",children:"\u3053\u306e\u30b2\u30fc\u30e0\u306e\u4f5c\u6210\u306b\u306f\u4ee5\u4e0b\u306e\u30c4\u30fc\u30eb\u304c\u95a2\u308f\u3063\u3066\u3044\u307e\u3059\u3002\n\n\u25a0\u30b3\u30fc\u30c7\u30a3\u30f3\u30b0\uff06\u30b5\u30dd\u30fc\u30c8\n \u30fbGoogle Gemini (https://gemini.google.com/)\n \u30fbClaude (https://www.anthropic.com/claude)\n \u30fbKiro (https://kiro.dev/)\n\n\u25a0\u30bf\u30a4\u30c8\u30ebAA\u4f5c\u6210\n \u30fb\u30a2\u30b9\u30ad\u30fc\u30a2\u30fc\u30c8\uff08AA\uff09\u4f5c\u6210\uff1a\u30c6\u30ad\u30b9\u30c8\u3001\u753b\u50cf\u304b\u3089ASCII Art\u3092\u751f\u6210 | \u30e9\u30c3\u30b3\u30c4\u30fc\u30eb\u30ba (https://rakko.tools/tools/68/)\n\n\u3054\u5354\u529b\u3042\u308a\u304c\u3068\u3046\u3054\u3056\u3044\u307e\u3057\u305f\uff01"})})]})})},nn=e=>{let{gameData:t,onStartGame:n,currentScreen:r,onScreenChange:i}=e;const[l,o]=(0,a.useState)(!1),[s,c]=(0,a.useState)(!1),[u,d]=(0,a.useState)(null),f=e=>{switch(e){case"start":i("deckSelection");break;case"deckBuilder":i("deckBuilder");break;case"rules":o(!0);break;case"cardLibrary":i("cardLibrary");break;case"credits":c(!0)}},p=e=>{if(!e||!e.name)return void console.error("Invalid deck selected:",e);if(!t.presetDecks||0===t.presetDecks.length)return void console.error("No preset decks available");d(e);const a=t.presetDecks.filter(t=>t.name!==e.name);if(0===a.length)return void console.error("No available decks for NPC");const r=a[Math.floor(Math.random()*a.length)];try{n(e.name,r.name)}catch(i){console.error("Failed to start game:",i)}},m=()=>{i("title"),d(null)};return(0,Tt.jsxs)("div",{className:"menu-system",children:[(()=>{switch(r){case"title":default:return(0,Tt.jsx)($t,{onMenuSelect:f});case"deckSelection":return(0,Tt.jsx)(Jt,{presetDecks:t.presetDecks,cardDefs:t.cardDefs,onDeckSelected:p,onBack:m,onScreenChange:i});case"cardLibrary":return(0,Tt.jsx)(en,{cardDefs:t.cardDefs,onBack:m})}})(),(0,Tt.jsx)(Wt,{isOpen:l,onClose:()=>o(!1)}),(0,Tt.jsx)(tn,{isOpen:s,onClose:()=>c(!1)})]})},an=(e,t)=>void 0===e||(e?t:!t),rn=(e,t,n)=>{const a=t.effect_type,r=t.args;if(!e.triggers)return[];let i=e.triggers[a];if(!i||0===i.length)return[];const l=n.players[e.owner],o=n.players[e.owner===_e?he:_e];if(!l)return[];const s=Object.values(n.players).flatMap(e=>[...e.hand,...e.discard,...e.field,e.ideology,e.playing_event]).find(e=>e&&e.instance_id===r.source_card_id);if([Ce.PLAY_EVENT_THIS,Ce.CARD_DRAWN_THIS,Ce.CARD_PLACED_THIS,Ce.CARD_DISCARDED_THIS,Ce.CARD_BOUNCED_THIS,Ce.CARD_ADDED_TO_HAND_THIS,Ce.DAMAGE_THIS,Ce.BOOST_THIS,Ce.WEALTH_DURABILITY_ZERO_THIS,Ce.SUCCESS_PROCESS,Ce.FAILED_PROCESS].includes(a)){const n=a===Ce.DAMAGE_THIS||a===Ce.BOOST_THIS?t.args.target_card_id:t.args.card_id;if(!t.args||n!==e.instance_id)return[]}if([Ce.MODIFY_CONSCIOUSNESS_DECREASE_RESERVE_OPPONENT,Ce.PLAY_EVENT_OPPONENT,Ce.CARD_PLACED_OPPONENT,Ce.WEALTH_DURABILITY_ZERO_OPPONENT,Ce.START_TURN_OPPONENT,Ce.END_TURN_OPPONENT,Ce.PLAYER_PLAY_CARD_ACTION_OPPONENT].includes(a)&&(!t.args||t.args.player_id!==o.id))return[];if([Ce.MODIFY_CONSCIOUSNESS_INCREASE_RESERVE_OWNER,Ce.MODIFY_CONSCIOUSNESS_DECREASE_RESERVE_OWNER,Ce.MODIFY_SCALE_INCREASE_RESERVE_OWNER,Ce.PLAY_EVENT_OWNER,Ce.CARD_DRAWN_OWNER,Ce.CARD_PLACED_OWNER,Ce.CARD_DISCARDED_OWNER,Ce.CARD_BOUNCED_OWNER,Ce.CARD_ADDED_TO_HAND_OWNER,Ce.START_TURN_OWNER,Ce.END_TURN_OWNER,Ce.WEALTH_DURABILITY_ZERO_OWNER,Ce.PLAYER_PLAY_CARD_ACTION_OWNER].includes(a)&&(!t.args||t.args.player_id!==l.id))return[];if(a===Ce.PLAYER_PLAY_CARD_ACTION){const t=r.card_id;if(e.instance_id===t)return[]}const u=[],d=e.card_type===ve||e.card_type===be,f="field"===e.location||"ideology"===e.location;if(d&&!f){if([Ce.CARD_DISCARDED_THIS,Ce.WEALTH_DURABILITY_ZERO_THIS].includes(a));else if("\u30dd\u30d4\u30e5\u30ea\u30ba\u30e0"!==e.name||a!==Ce.START_TURN_OWNER)return[]}const p=e.card_type===Ee,m="playing_event"===e.location;if(p&&!m){if([Ce.CARD_DISCARDED_THIS,Ce.CARD_DRAWN_THIS].includes(a));else if(!("\u5e03\u6559"===e.name&&"hand"===e.location||"\u5b98\u50da\u4e3b\u7fa9"===e.name&&"hand"===e.location))return[]}for(const y of i){let i=!0;if(y.condition){const{check:e}=y.condition;"consciousness_decreased_by_opponent"===e?i=!!(n.temp_effect_data.last_consciousness_change&&n.temp_effect_data.last_consciousness_change<0):"is_opponent_play"===e&&(i=!(!r||r.player_id===l.id))}if(!i)continue;let d=c({},y.args);if("\u5e1d\u56fd\u4e3b\u7fa9"===e.name&&a===Ce.END_TURN_OWNER){if(!l.ideology||l.ideology.instance_id!==e.instance_id)continue;if(!(l.field_limit>o.field_limit))continue;{const e=l.field_limit-o.field_limit;"opponent"===d.player_id?(d.amount=-e,delete d.amount_based_on_field_limit_diff):"self"===d.player_id&&(d.amount=e,delete d.amount_based_on_field_limit_diff)}}if("current"===d.source_pile&&(d.source_pile=e.location),y.effect_type===st){const{threshold:e,card_if_above:t,card_if_below:a}=d,r=n.players[l.id];if(r){const n=r.deck.length>=e?t:a;u.push({effect_type:He,args:{player_id:l.id,card_template_name:n,destination_pile:"hand"}})}continue}if("self"===d.player_id?d.player_id=l.id:"opponent"===d.player_id&&o?d.player_id=o.id:"random"===d.player_id&&o?d.player_id=Math.random()<.5?l.id:o.id:"source"===d.player_id&&r.source_card_id&&s&&(d.player_id=s.owner),"self"===d.player_ids?d.player_ids=[l.id]:"opponent"===d.player_ids&&o?d.player_ids=[o.id]:"self_and_opponent"===d.player_ids&&o&&(d.player_ids=[l.id,o.id]),"self"===d.target_player_id?d.target_player_id=e.owner:"opponent"===d.target_player_id&&o&&(d.target_player_id=o.id),"target"===d.target_card_id){if(!r||!r.target_card_id){console.warn("[ReactionCheck] Could not resolve 'target' for target_card_id.");continue}d.target_card_id=r.target_card_id}if("target"===d.card_id)if(r&&r.exposed_cards&&r.exposed_cards.length>0)d.card_id=r.exposed_cards[0];else{if(!r||!r.target_card_id){console.warn("[ReactionCheck] Could not resolve 'target' for card_id.");continue}d.card_id=r.target_card_id}if(!d.card_id&&d.target_card_id)d.card_id=d.target_card_id;else if("self"===d.card_id)d.card_id=e.instance_id;else if("self_ideology"===d.card_id){if(!l.ideology)continue;d.card_id=l.ideology.instance_id}else if("opponent_ideology"===d.card_id&&o){if(!o.ideology)continue;d.card_id=o.ideology.instance_id}else if("self_money_on_field"===d.card_id){const e=l.field.find(e=>"\u30de\u30cd\u30fc"===e.name);if(!e)continue;d.card_id=e.instance_id}else if("self_money_on_field"===d.card_id){const e=l.field.find(e=>"\u30de\u30cd\u30fc"===e.name);if(!e)continue;d.card_id=e.instance_id}if("damage_this"===d.initial_durability){const e=r.damage_amount;e&&e<0&&(d.initial_durability=Math.abs(e))}if("\u30dd\u30d4\u30e5\u30ea\u30ba\u30e0"===e.name&&a===Ce.START_TURN_OWNER){if(l.consciousness>1)continue;if(l.ideology&&"\u30dd\u30d4\u30e5\u30ea\u30ba\u30e0"===l.ideology.name)continue;if("field"===e.location)continue}if("\u6551\u4e16"===e.name)if(y.effect_type===Ie){if(l.consciousness<100)continue}else if(l.consciousness>=100)continue;if("\u91cd\u91d1\u4e3b\u7fa9"===e.name&&a===Ce.MODIFY_SCALE_INCREASE_RESERVE_OWNER){const e=r.amount||0;e>0&&(d.initial_durability=e)}if(["\u4ea4\u6613\u8def","\u9698\u8def"].includes(e.name)&&a===Ce.CARD_PLACED_OPPONENT){if(!t.args||t.args.player_id===l.id)continue;const e=Object.values(n.players).flatMap(e=>e.field).find(e=>e&&e.instance_id===t.args.card_id);if(!e||e.card_type!==ve)continue}if("\u5b98\u50da\u4e3b\u7fa9"===e.name&&a===Ce.CARD_DISCARDED_OWNER){const e=n.all_card_instances[r.card_id];if(!e||e.card_type!==be)continue}if("\u30ea\u30d0\u30bf\u30ea\u30a2\u30cb\u30ba\u30e0"===e.name&&a===Ce.PLAYER_PLAY_CARD_ACTION_OWNER){var _,h;let e=r.card_id&&(null===(_=n.players[r.player_id])||void 0===_?void 0:_.field.find(e=>e.instance_id===r.card_id));if(e||(e=r.card_id&&(null===(h=n.players[r.player_id])||void 0===h?void 0:h.discard.find(e=>e.instance_id===r.card_id))),!e||"\u30de\u30cd\u30fc"===e.name)continue}if("\u30cb\u30e5\u30fc\u30ea\u30d9\u30e9\u30ea\u30ba\u30e0"===e.name&&a===Ce.CARD_PLACED_OWNER){var g;const e=r.card_id&&(null===(g=n.players[r.player_id])||void 0===g?void 0:g.field.find(e=>e.instance_id===r.card_id));if(!e||"\u30de\u30cd\u30fc"!==e.name)continue}if("\u5b64\u7acb\u4e3b\u7fa9"===e.name&&a===Re){if(!t.args||t.args.target_player_id!==l.id)continue;if(t.args.source_card_id===e.instance_id)continue;if(!t.args.amount||t.args.amount>=0)continue;const a="".concat(l.id,"_last_consciousness_decrease"),r=n.temp_effect_data[a];if(!r||r<1)continue}if("\u5e1d\u56fd\u4e3b\u7fa9"===e.name&&(a===Ce.END_TURN_OWNER||a===Ce.WEALTH_DURABILITY_ZERO_OPPONENT)){if(!l.ideology||l.ideology.instance_id!==e.instance_id)continue;if(a===Ce.END_TURN_OWNER){if(!(l.field_limit>o.field_limit))continue;{const e=l.field_limit-o.field_limit;"opponent"===d.player_id?d.amount=-1*e:"self"===d.player_id&&(d.amount=e)}}else if(a===Ce.WEALTH_DURABILITY_ZERO_OPPONENT){if(r.player_id!==o.id||n.current_turn!==l.id)continue}}if("\u81ea\u7531\u4e3b\u7fa9"===e.name&&a===Te){if(n.current_turn!==l.id)continue;if(r.amount<=0)continue;if(d.condition_scale_exceeds_25&&!(l.scale>25))continue}if("\u5206\u96e2\u4e3b\u7fa9"===e.name&&a===Ce.CARD_ADDED_TO_HAND_OWNER){const e=l.hand[l.hand.length-1];if(e&&!(e.required_scale>l.scale))continue}if("\u793e\u4f1a\u4e3b\u7fa9"===e.name&&a===Ce.CARD_PLACED_OWNER){const e=n.all_card_instances[r.card_id];if(!e||"\u30de\u30cd\u30fc"!==e.name)continue}if("\u30a2\u30ca\u30fc\u30ad\u30ba\u30e0"===e.name&&a===Ce.CARD_PLACED_OWNER){const e=n.all_card_instances[r.card_id];if(e&&e.card_type!==ve)return[]}if(d.condition_money_durability_ge_10){const e=l.field.find(e=>"\u30de\u30cd\u30fc"===e.name);if(!e||e.current_durability<10)continue}if(d.condition_field_wealth_count_ge_3){if(l.field.filter(e=>e.card_type===ve).length<3)continue}if(an(d.condition_self_consciousness_higher,l.consciousness>o.consciousness)&&(an(d.condition_opponent_consciousness_higher,o.consciousness>l.consciousness)&&an(d.condition_self_consciousness_lower,l.consciousness<o.consciousness)&&an(d.condition_opponent_consciousness_lower,o.consciousness<l.consciousness)&&an(d.condition_self_scale_higher,l.scale>o.scale)&&an(d.condition_opponent_scale_higher,o.scale>l.scale)&&an(d.condition_self_scale_lower,l.scale<o.scale)&&an(d.condition_opponent_scale_lower,o.scale<l.scale)&&an(d.condition_fewer_wealth_than_opponent,l.field.length<o.field.length)&&an(d.condition_opponent_deck_smaller,o.deck.length<l.deck.length))){if("\u591a\u6975\u4e3b\u7fa9"===e.name&&y.effect_type===He&&d.initial_durability_based_on_scale_percentage){const e=d.initial_durability_based_on_scale_percentage;d.initial_durability=Math.max(1,Math.floor(l.scale*e/100)),delete d.initial_durability_based_on_scale_percentage}if("\u30cd\u30aa\u30ea\u30d9\u30e9\u30ea\u30ba\u30e0"===e.name&&y.effect_type===He&&d.initial_durability_based_on_field_wealth_count_plus_one){const e=l.field.filter(e=>e.card_type===ve).length;d.initial_durability=e+1,delete d.initial_durability_based_on_field_wealth_count_plus_one}if(d.amount_based_on_self_durability){const t=void 0!==e.current_durability?e.current_durability:e.durability;d.amount="minus"===d.amount_based_on_self_durability?-t:t}if(d.amount_based_on_opponent_field_wealth_count&&(d.amount=o.field.filter(e=>e.card_type===ve).length),d.amount_based_on_money_durability){const e=l.field.find(e=>"\u30de\u30cd\u30fc"===e.name);if(!e)continue;d.amount=e.current_durability}if(d.amount_based_on_removed_discard_count&&(d.amount=n.temp_effect_data.removed_discard_count||0),d.amount_based_on_temp_value&&(d.amount=n.temp_effect_data[d.amount_based_on_temp_value]||0),d.amount_based_on_field_wealth_count&&(d.amount=l.field.filter(e=>e.card_type===ve).length,delete d.amount_based_on_field_wealth_count),d.amount_based_on_discard_count&&(d.amount=l.discard.length,delete d.amount_based_on_discard_count),d.source_card_id=e.instance_id,d.source_card_owner_id=l.id,"\u30dd\u30d4\u30e5\u30ea\u30ba\u30e0"===e.name&&y.effect_type===He&&d.initial_durability_based_on_scale&&(d.initial_durability=Math.max(1,l.scale),delete d.initial_durability_based_on_scale),"\u91cd\u8fb2\u4e3b\u7fa9"!==e.name||a!==Ce.END_TURN_OWNER||0!==l.cards_played_this_turn){if("\u591a\u6975\u4e3b\u7fa9"===e.name&&a===Ce.CARD_ADDED_TO_HAND_OWNER){const e=l.hand[l.hand.length-1];if(!e||e.card_type!==be)continue}("\u7d42\u672b"!==e.name||a!==Ce.CARD_DRAWN_THIS||t.args&&t.args.target_card_id===e.instance_id)&&(u.push({effect_type:y.effect_type,args:d,target_card_id:e.instance_id,target_player_id:e.owner,target_type:"card",target_card_type:e.card_type}),y.effect_type===Fe&&console.log("[checkCardReaction] Pushed ADD_MODIFY_PARAMETER_CORRECTION from ".concat(e.name," for trigger ").concat(a)))}}}return u.length,u},ln=e=>{if(e.game_over)return;const t=e.players[_e],n=e.players[he];let a=null;if(t.consciousness<=0?a=he:n.consciousness<=0&&(a=_e),0!==t.deck.length&&0!==n.deck.length||(a=t.consciousness>n.consciousness?_e:n.consciousness>t.consciousness||e.current_turn===_e?he:_e),a){var r,i;console.log("[GAME_END_DEBUG] Winner determined: ".concat(a,". Updating state.")),e.game_over=!0,e.winner=a,console.log("[GAME_END_DEBUG] draftState set to:",{game_over:e.game_over,winner:e.winner});const l=a===ge,o=(null===(r=e.players[a])||void 0===r?void 0:r.name)||"Unknown",s=(null===(i=e.players[a===_e?he:_e])||void 0===i?void 0:i.name)||"Unknown";let c="";t.consciousness<=0||n.consciousness<=0?c="".concat(s,"\u306e\u610f\u8b58\u304c0\u306b\u306a\u308a\u307e\u3057\u305f"):0!==t.deck.length&&0!==n.deck.length||(c="\u30c7\u30c3\u30ad\u5207\u308c\u306b\u3088\u308b\u5224\u5b9a");const u={effect:{effect_type:"GAME_RESULT",args:{is_victory:l,message:c,winner_name:o}},sourceCard:null};e.animation_queue.push(u),console.log("[GAME_END_DEBUG] Pushed GAME_RESULT to animation_queue.",u),console.log("[GAME_END_DEBUG] Animation queue length: ".concat(e.animation_queue.length))}};const on=new class{constructor(){this.formatters={PLAYER_ACTION:this.formatPlayerAction.bind(this),MODIFY_CARD_DURABILITY:()=>null,MODIFY_CARD_DURABILITY_RESERVE:()=>null,MOVE_CARD:this.formatCardMove.bind(this),MODIFY_CONSCIOUSNESS_RESERVE:this.formatConsciousnessChange.bind(this),MODIFY_SCALE_RESERVE:this.formatScaleChange.bind(this),MODIFY_CONSCIOUSNESS:this.formatConsciousnessChange.bind(this),MODIFY_SCALE:this.formatScaleChange.bind(this),SET_CONSCIOUSNESS:this.formatSetConsciousness.bind(this),SET_SCALE:this.formatSetScale.bind(this),CONSCIOUSNESS_CHANGED:this.formatActualConsciousnessChange.bind(this),SCALE_CHANGED:this.formatActualScaleChange.bind(this),CARD_DURABILITY_CHANGED:this.formatActualCardDamage.bind(this),ADD_CARD_TO_GAME:this.formatCardAdd.bind(this),DRAW_CARD:this.formatCardDraw.bind(this),PROCESS_EXPOSE_CARD_BY_TYPE:this.formatExposeCard.bind(this),REMOVE_CARD_FROM_GAME:this.formatRemoveCard.bind(this),END_TURN_OWNER:this.formatTurnEnd.bind(this),START_TURN_OWNER:this.formatTurnStart.bind(this),DEFAULT:this.formatDefault.bind(this)}}generateEntry(e,t,n,a){try{const r=(this.formatters[e]||this.formatters.DEFAULT)(t,n,a);return r&&(r.id="".concat(Date.now(),"-").concat(Math.random().toString(36).substr(2,9)),r.timestamp=Date.now(),r.type="effect",r.effectType=e),r}catch(r){return console.error("[LogEntryGenerator] Error generating entry:",r),this.formatters.DEFAULT(t,n,a)}}formatPlayerAction(e,t,n){try{const a=n.players[e.player_id],r=n.all_card_instances[e.card_id];if(!a||!r)return null;let i="";switch(e.action_type){case"play_card":i="".concat(r.name,"\u3092\u30d7\u30ec\u30a4\u3057\u307e\u3057\u305f");break;case"activate_effect":i="".concat(r.name,"\u306e\u52b9\u679c\u3092\u767a\u52d5\u3057\u307e\u3057\u305f");break;default:i="".concat(r.name,"\u3067\u30a2\u30af\u30b7\u30e7\u30f3\u3092\u5b9f\u884c\u3057\u307e\u3057\u305f")}return{playerName:a.name,sourceCard:this.formatCardSource(t,n),description:i,details:{cardType:r.card_type,actionType:e.action_type,cardId:r.instance_id}}}catch(a){return console.error("[LogEntryGenerator] Error formatting player action:",a),null}}formatCardDamage(e,t,n){try{var a;const r=n.all_card_instances[e.card_id];if(!r)return null;const i=Math.abs(e.amount),l=e.amount>0,o=(null===t||void 0===t?void 0:t.owner_name)||(t?null===(a=n.players[t.owner])||void 0===a?void 0:a.name:null)||"\u4e0d\u660e",s=l?"".concat(r.name,"\u3092").concat(i,"\u56de\u5fa9"):"".concat(r.name,"\u306b").concat(i,"\u30c0\u30e1\u30fc\u30b8");return{playerName:o,sourceCard:this.formatCardSource(t,n),description:s,details:{targetCard:r.name,amount:e.amount,isHealing:l,targetCardType:r.card_type,newDurability:r.current_durability||r.durability}}}catch(r){return console.error("[LogEntryGenerator] Error formatting card damage:",r),null}}formatCardMove(e,t,n){try{const a=e.card_to_move||n.all_card_instances[e.card_id],r=n.players[e.player_id];if(!a||!r)return null;if("playing_event"===e.destination_pile)return null;const i=this.translateZoneName(e.source_pile),l=this.translateZoneName(e.destination_pile),o=r.name;let s,c=a.name;if("field"!==e.destination_pile){"PLAYER2"===e.player_id&&(c=" ---- ")}return s="deck"===e.source_pile&&"hand"===e.destination_pile?"".concat(c,"\u3092\u30c9\u30ed\u30fc"):"hand"===e.source_pile&&"field"===e.destination_pile?"".concat(c,"\u3092\u5834\u306b\u914d\u7f6e"):"discard"===e.destination_pile?"".concat(c,"\u3092\u6368\u3066\u672d\u306b"):"".concat(c,"\u3092").concat(i,"\u304b\u3089").concat(l,"\u306b\u79fb\u52d5"),{playerName:o,sourceCard:this.formatCardSource(t,n),description:s,details:{cardName:a.name,cardType:a.card_type,sourceZone:e.source_pile,destZone:e.destination_pile,cardId:a.instance_id}}}catch(a){return console.error("[LogEntryGenerator] Error formatting card move:",a),null}}formatConsciousnessChange(e,t,n){try{const a=n.players[e.player_id];if(!a)return null;const r=e.amount,i=a.name,l=r>0?"\u610f\u8b58\u3092".concat(r,"\u5897\u52a0"):"\u610f\u8b58\u3092".concat(Math.abs(r),"\u6e1b\u5c11");return{playerName:i,sourceCard:this.formatCardSource(t,n),description:l,details:{resource:"consciousness",amount:r,newValue:a.consciousness}}}catch(a){return console.error("[LogEntryGenerator] Error formatting consciousness change:",a),null}}formatScaleChange(e,t,n){try{const r=n.players[e.player_id];if(!r)return null;const i=e.amount,l=r.name;let o=t;var a;if(!o&&e.source_card_id)o=null===(a=n.all_card_instances)||void 0===a?void 0:a[e.source_card_id];const s=i>0?"\u898f\u6a21\u3092".concat(i,"\u5897\u52a0"):"\u898f\u6a21\u3092".concat(Math.abs(i),"\u6e1b\u5c11");return{playerName:l,sourceCard:this.formatCardSource(o,n),description:s,details:{resource:"scale",amount:i,newValue:r.scale}}}catch(r){return console.error("[LogEntryGenerator] Error formatting scale change:",r),null}}formatSetConsciousness(e,t,n){try{const a=n.players[e.player_id];if(!a)return null;const r=e.amount,i=a.name,l="\u610f\u8b58\u3092".concat(r,"\u306b\u8a2d\u5b9a");return{playerName:i,sourceCard:this.formatCardSource(t,n),description:l,details:{resource:"consciousness",amount:r,newValue:r}}}catch(a){return console.error("[LogEntryGenerator] Error formatting set consciousness:",a),null}}formatSetScale(e,t,n){try{const a=n.players[e.player_id];if(!a)return null;const r=e.amount,i=a.name,l="\u898f\u6a21\u3092".concat(r,"\u306b\u8a2d\u5b9a");return{playerName:i,sourceCard:this.formatCardSource(t,n),description:l,details:{resource:"scale",amount:r,newValue:r}}}catch(a){return console.error("[LogEntryGenerator] Error formatting set scale:",a),null}}formatCardAdd(e,t,n){try{const a=n.players[e.player_id],r=e.card_name||"\u65b0\u3057\u3044\u30ab\u30fc\u30c9";if(!a)return null;const i=a.name,l=this.translateZoneName(e.destination_pile||"hand"),o="".concat(r,"\u3092").concat(l,"\u306b\u8ffd\u52a0");return{playerName:i,sourceCard:this.formatCardSource(t,n),description:o,details:{cardName:r,destZone:e.destination_pile||"hand"}}}catch(a){return console.error("[LogEntryGenerator] Error formatting card add:",a),null}}formatCardDraw(e,t,n){try{var a;const r=n.players[e.player_id];if(!r)return null;const i=r.name,l="\u30ab\u30fc\u30c9\u30921\u679a\u30c9\u30ed\u30fc";return{playerName:i,sourceCard:this.formatCardSource(t,n),description:l,details:{newHandCount:(null===(a=r.hand)||void 0===a?void 0:a.length)||0}}}catch(r){return console.error("[LogEntryGenerator] Error formatting card draw:",r),null}}formatExposeCard(e,t,n){try{const a=n.players[e.player_id];if(!a||!e.exposed_cards||0===e.exposed_cards.length)return null;const r=e.exposed_cards.map(e=>e.name).join(", "),i="".concat(r,"\u3092\u516c\u958b\u3057\u307e\u3057\u305f");return{playerName:a.name,sourceCard:this.formatCardSource(t,n),description:i,details:{exposedCards:e.exposed_cards.map(e=>e.name)}}}catch(a){return console.error("[LogEntryGenerator] Error formatting expose card:",a),null}}formatRemoveCard(e,t,n){try{const a=n.players[e.player_id],r=n.all_card_instances[e.card_id];if(!a||!r)return null;const i="".concat(r.name,"\u304c\u30b2\u30fc\u30e0\u304b\u3089\u9664\u5916\u3055\u308c\u307e\u3057\u305f");return{playerName:a.name,sourceCard:this.formatCardSource(t,n),description:i,details:{removedCard:r.name}}}catch(a){return console.error("[LogEntryGenerator] Error formatting remove card:",a),null}}formatTurnEnd(e,t,n){try{const t=n.players[e.player_id];if(!t)return null;const a=t.name;return{playerName:a,sourceCard:"\u30b7\u30b9\u30c6\u30e0",description:"".concat(a,"\u306e\u30bf\u30fc\u30f3\u7d42\u4e86"),details:{turnEnd:!0,playerId:e.player_id}}}catch(a){return console.error("[LogEntryGenerator] Error formatting turn end:",a),null}}formatTurnStart(e,t,n){try{const t=n.players[e.player_id];if(!t)return null;const a=t.name;return{playerName:a,sourceCard:"\u30b7\u30b9\u30c6\u30e0",description:"".concat(a,"\u306e\u30bf\u30fc\u30f3\u958b\u59cb"),details:{turnStart:!0,playerId:e.player_id}}}catch(a){return console.error("[LogEntryGenerator] Error formatting turn start:",a),null}}formatActualConsciousnessChange(e,t,n){try{const r=n.players[e.player_id];if(!r)return null;const i=e.original_amount,l=e.actual_amount,o=r.name;let s=t;var a;if(!s&&e.source_card_id)s=null===(a=n.all_card_instances)||void 0===a?void 0:a[e.source_card_id];let c;return c=i!==l?l>0?"\u610f\u8b58\u3092".concat(l,"\u5897\u52a0\uff08\u5143\uff1a").concat(i>0?"+":"").concat(i,"\uff09"):l<0?"\u610f\u8b58\u3092".concat(Math.abs(l),"\u6e1b\u5c11\uff08\u5143\uff1a").concat(i>0?"+":"").concat(i,"\uff09"):"\u610f\u8b58\u3078\u306e\u52b9\u679c\u304c\u7121\u52b9\u5316\uff08\u5143\uff1a".concat(i>0?"+":"").concat(i,"\uff09"):l>0?"\u610f\u8b58\u3092".concat(l,"\u5897\u52a0"):l<0?"\u610f\u8b58\u3092".concat(Math.abs(l),"\u6e1b\u5c11"):"\u610f\u8b58\u3078\u306e\u52b9\u679c\u306a\u3057",{playerName:o,sourceCard:this.formatCardSource(s,n),description:c,details:{resource:"consciousness",originalAmount:i,actualAmount:l,corrected:i!==l,newValue:r.consciousness}}}catch(r){return console.error("[LogEntryGenerator] Error formatting actual consciousness change:",r),null}}formatActualScaleChange(e,t,n){try{const r=n.players[e.player_id];if(!r)return null;const i=e.original_amount,l=e.actual_amount,o=r.name;let s=t;var a;if(!s&&e.source_card_id)s=null===(a=n.all_card_instances)||void 0===a?void 0:a[e.source_card_id];let c;return c=i!==l?l>0?"\u898f\u6a21\u3092".concat(l,"\u5897\u52a0\uff08\u5143\uff1a").concat(i>0?"+":"").concat(i,"\uff09"):l<0?"\u898f\u6a21\u3092".concat(Math.abs(l),"\u6e1b\u5c11\uff08\u5143\uff1a").concat(i>0?"+":"").concat(i,"\uff09"):"\u898f\u6a21\u3078\u306e\u52b9\u679c\u304c\u7121\u52b9\u5316\uff08\u5143\uff1a".concat(i>0?"+":"").concat(i,"\uff09"):l>0?"\u898f\u6a21\u3092".concat(l,"\u5897\u52a0"):l<0?"\u898f\u6a21\u3092".concat(Math.abs(l),"\u6e1b\u5c11"):"\u898f\u6a21\u3078\u306e\u52b9\u679c\u306a\u3057",{playerName:o,sourceCard:this.formatCardSource(s,n),description:c,details:{resource:"scale",originalAmount:i,actualAmount:l,corrected:i!==l,newValue:r.scale}}}catch(r){return console.error("[LogEntryGenerator] Error formatting actual scale change:",r),null}}formatActualCardDamage(e,t,n){try{var a,r;const l=n.all_card_instances[e.card_id];if(!l)return null;const o=e.original_amount,s=e.actual_amount,c=s>0;let u=t;var i;if(!u&&e.source_card_id)u=null===(i=n.all_card_instances)||void 0===i?void 0:i[e.source_card_id];const d=(null===(a=u)||void 0===a?void 0:a.owner_name)||(u?null===(r=n.players[u.owner])||void 0===r?void 0:r.name:null)||"\u4e0d\u660e";let f;if(o!==s)if(s>0)f="".concat(l.name,"\u3092").concat(s,"\u56de\u5fa9\uff08\u5143\uff1a").concat(o>0?"+":"").concat(o,"\uff09");else if(s<0)f="".concat(l.name,"\u306b").concat(Math.abs(s),"\u30c0\u30e1\u30fc\u30b8\uff08\u5143\uff1a").concat(o>0?"+":"").concat(o,"\uff09");else{const e=o>0?"\u56de\u5fa9":"\u30c0\u30e1\u30fc\u30b8";f="".concat(l.name,"\u3078\u306e").concat(e,"\u304c\u7121\u52b9\u5316\uff08\u5143\uff1a").concat(o>0?"+":"").concat(o,"\uff09")}else f=s>0?"".concat(l.name,"\u3092").concat(s,"\u56de\u5fa9"):s<0?"".concat(l.name,"\u306b").concat(Math.abs(s),"\u30c0\u30e1\u30fc\u30b8"):"".concat(l.name,"\u3078\u306e\u52b9\u679c\u306a\u3057");return{playerName:d,sourceCard:this.formatCardSource(u,n),description:f,details:{targetCard:l.name,originalAmount:o,actualAmount:s,corrected:o!==s,isHealing:c,targetCardType:l.card_type,newDurability:e.new_durability}}}catch(l){return console.error("[LogEntryGenerator] Error formatting actual card damage:",l),null}}formatDefault(e,t,n){return null}formatCardSource(e,t){if(!e)return"\u30b7\u30b9\u30c6\u30e0";const n=t.players[e.owner],a=(null===n||void 0===n?void 0:n.name)||"\u4e0d\u660e";return"".concat(a,">").concat(e.name)}translateZoneName(e){return{hand:"\u624b\u672d",field:"\u5834",deck:"\u30c7\u30c3\u30ad",discard:"\u6368\u3066\u672d",discard_pile:"\u6368\u3066\u672d",ideology:"\u5834",playing_event:"\u624b\u5143",game_source:"\u4e0d\u5b9a\u306e\u672a\u6765"}[e]||e}addFormatter(e,t){this.formatters[e]=t.bind(this)}getAvailableFormatters(){return Object.keys(this.formatters).filter(e=>"DEFAULT"!==e)}};let sn=null;const cn=(e,t,n,a,r)=>{const i=e.players[t];if(!i||!i.modify_parameter_corrections||0===i.modify_parameter_corrections.length)return r;let l=null,o=0,s=0;const c=[];if(i.modify_parameter_corrections.forEach((e,t)=>{if(e.correct_target===n&&e.correct_direction===a)switch(c.push(t),e.correct_type){case"limit":(null===l||e.amount<l)&&(l=e.amount);break;case"amplification":o+=e.amount;break;case"attenuation":s+=e.amount}}),i.modify_parameter_corrections.length=0,0===c.length)return r;let u=r;const d=o-s,f=r>=0?1:-1;u=Math.max(0,Math.abs(r)+d)*f,null!==l&&Math.abs(u)>Math.abs(l)&&(u=l*f);return[...new Set(c)].sort((e,t)=>t-e).forEach(e=>{i.modify_parameter_corrections.splice(e,1)}),u},un=(e,t,n)=>{if(Array.isArray(n))return n.map(t=>e.players[t]);const a=t===_e?he:_e;switch(n){case"self":return[e.players[t]];case"opponent":return[e.players[a]];case"self_and_opponent":return[e.players[t],e.players[a]];default:return[e.players[n]]}},dn=(e,t,n)=>{let a=[];return e&&t?(t.forEach(t=>{const r=e[t];if(r){const e=(Array.isArray(r)?r:[r]).filter(e=>!n||e.card_type===n);a.push(...e)}}),a):a},fn=(e,t,n,a,r,i,l)=>{var o;if(!n||0===n.length)return[];const s=null!=r?r:"choice"===a?1:n.length;switch(a){case"all":return n;case"random":return de([...n]).slice(0,s);case"highest_required_scale":return[...n].sort((e,t)=>t.required_scale-e.required_scale).slice(0,s);case"lowest_durability":const a=null!=r?r:1;return[...n].sort((e,t)=>(void 0!==e.current_durability?e.current_durability:e.durability)-(void 0!==t.current_durability?t.current_durability:t.durability)).slice(0,a);case"top":return n.slice(0,s);case"bottom":return n.slice(-s);case"choice":return e.awaiting_input={type:"CHOICE_CARDS_FOR_OPERATION",options:n,player_id:t.id,source_card_instance_id:i.instance_id,source_card_name:i.name,count:s,source_effect:{effect_type:Xe,args:c(c({},l),{},{selection_method:"pre_selected"})},is_turn_end_effect:(null===(o=e.processing_status)||void 0===o?void 0:o.is_processing_turn_end)||!1},null;case"pre_selected":const u=l.selected_cards;if(!Array.isArray(u))return[];const d=new Set(u.map(e=>"object"===typeof e&&e.instance_id?e.instance_id:e));return n.filter(e=>d.has(e.instance_id));default:return[]}},pn=(e,t,n)=>{let a=!1;if(e.all_card_instances[t]){for(const r in n)e.all_card_instances[t][r]!==n[r]&&(e.all_card_instances[t][r]=n[r],a=!0);for(const r in e.players){const i=e.players[r];let l=!1;if(["hand","field","deck","discard"].forEach(e=>{if(i[e]&&Array.isArray(i[e])){const a=i[e].findIndex(e=>e.instance_id===t);if(-1!==a)for(const t in n)i[e][a][t]!==n[t]&&(i[e][a][t]=n[t],l=!0)}}),a=l,i.ideology&&i.ideology.instance_id===t)for(const e in n)i.ideology[e]!==n[e]&&(i.ideology[e]=n[e],a=!0)}a&&(e.lastUpdate=Date.now())}},mn={[Ae]:(e,t,n,a,r)=>{const{player_id:i,action_type:l,card_id:o}=t,s=e.players[i];if(s&&"play_card"===l){const n=s.hand.find(e=>e.instance_id===o);if(!n)return;s.cards_played_this_turn=(s.cards_played_this_turn||0)+1;const a=(e,t,n)=>{r.unshift([{effect_type:e,args:t},n])},l=(e,t,n)=>{r.push([{effect_type:e,args:t},n])};if(n.card_type===Ee){"\u5b98\u50da\u4e3b\u7fa9"!==n.name&&a(Ye,{card_id:n.instance_id,source_pile:"playing_event",destination_pile:"discard",player_id:i},n);const e={player_id:i,card_id:n.instance_id,target_card_id:t.target_card_id||n.instance_id};a(Ce.PLAY_EVENT_THIS,e,n),a(Ye,{card_id:n.instance_id,source_pile:"hand",destination_pile:"playing_event",player_id:i},n);const r=i,o=c(c({},{card_id:n.instance_id,target_card_id:n.instance_id,card_type:n.card_type}),{},{player_id:r,target_player_id:r});l(Ce.PLAY_EVENT,o,n),l(Ce.PLAY_EVENT_OWNER,o,n),l(Ce.PLAYER_PLAY_CARD_ACTION,{player_id:i,action_type:"card_played",card_id:n.instance_id,target_card_id:n.instance_id},n),l(Ce.PLAYER_PLAY_CARD_ACTION_OWNER,{player_id:r,action_type:"card_played",card_id:n.instance_id},n),l(Ce.PLAYER_PLAY_CARD_ACTION_OPPONENT,{player_id:r,action_type:"card_played",card_id:n.instance_id},n),l(St,{card_id:n.instance_id,player_id:i},n)}else{a(Ye,{card_id:n.instance_id,source_pile:"hand",destination_pile:n.card_type===be?"ideology":"field",player_id:i},n);const e=i;l(Ce.PLAYER_PLAY_CARD_ACTION,{player_id:i,action_type:"card_played",card_id:n.instance_id,target_card_id:n.instance_id},n),l(Ce.PLAYER_PLAY_CARD_ACTION_OWNER,{player_id:e,action_type:"card_played",card_id:n.instance_id},n),l(Ce.PLAYER_PLAY_CARD_ACTION_OPPONENT,{player_id:e,action_type:"card_played",card_id:n.instance_id},n)}e.temp_effect_data.last_played_card_id=n.instance_id}},[Ce.START_TURN]:()=>{},[Ce.END_TURN_OWNER]:()=>{},[Ce.PLAY_EVENT_THIS]:(e,t,n,a,r)=>{},[Ce.DAMAGE_THIS]:()=>{},[Ce.BOOST_THIS]:()=>{},[Ce.WEALTH_DURABILITY_ZERO]:(e,t,n,a,r)=>{const{player_id:i,target_player_id:l,card_id:o,target_card_id:s}=t,c={player_id:i,target_player_id:l,card_id:o,target_card_id:s};r.unshift([{effect_type:Ce.WEALTH_DURABILITY_ZERO_OPPONENT,args:c},a])},[Qe]:(e,t,n,a,r)=>{const{player_id:i}=t,l=e.players[i];l&&l.deck.length>0&&r.unshift([{effect_type:Ye,args:{player_id:i,card_id:"draw_from_deck",source_pile:"deck",destination_pile:"hand"}},a])},[He]:(e,t,n,a,r)=>{const{player_id:i,card_template_name:l,destination_pile:o,count:s=1,position:c,condition_field_wealth_limit:u}=t;let{initial_durability:d}=t;const f=e.players[i],p=e.cardDefs[l];if(f&&p){if(void 0!==u){const e=u>0?u:f.field_limit;if(f.field.filter(e=>e.card_type===ve).length>=e)return}"string"===typeof d?("self_all_wealth_on_field"===d&&(d=f.field.filter(e=>e.card_type===ve).reduce((e,t)=>e+Math.max(t.current_durability,0),0)),d=Math.max(0,d)):t.initial_durability_based_on_field_wealth_total&&(d=f.field.filter(e=>e.card_type===ve).reduce((e,t)=>e+(t.current_durability||0),0),d=Math.max(0,d)),d=0===d?null:d;for(let n=0;n<s;n++){const n=ue(p,i);if(null===d&&p.card_type===ve)continue;void 0!==d&&null!==d&&(n.durability=d,n.current_durability=d),e.all_card_instances[n.instance_id]=n;let l=t.destination_pile;"field"===o&&f.field.length>=f.field_limit&&n.card_type===ve&&(l="discard"),r.unshift([{effect_type:Ye,args:{player_id:i,card_id:n.instance_id,card_to_move:n,source_pile:"game_source",destination_pile:l,maintain:!0,position:c,source_card_id:a?a.instance_id:null}},a])}}},[qe]:(e,t)=>{const{card_id:n,player_id:a}=t,r=e.players[a];if(!r)return;const i=["hand","deck","field","discard"];let l=!1;for(const o of i){const e=r[o];if(Array.isArray(e)){const t=e.length,a=e.filter(e=>e.instance_id!==n);if(t>a.length){r[o]=a,l=!0;break}}}!l&&r.ideology&&r.ideology.instance_id===n&&(r.ideology=null,l=!0)},[Re]:(e,t,n,a,r)=>{const{player_id:i,amount:l}=t;if(e.players[i]){const n=l,o=cn(e,i,"consciousness",l>0?"increase":"decrease",l);if(e.temp_effect_data.last_consciousness_change=o,n<0){const t="".concat(i,"_last_consciousness_decrease");e.temp_effect_data[t]=Math.abs(o)}e.players[i].consciousness+=o;const s=c(c({},t),{},{target_player_id:i});if(r.unshift([{effect_type:Ce.MODIFY_CONSCIOUSNESS,args:s},a]),0!==o||n!==o){0!==n&&0===o&&r.push([{effect_type:"EFFECT_NULLIFIED",args:{target_card_id:null===a||void 0===a?void 0:a.instance_id,reason:"correction_nullified",message:"\u610f\u8b58\u5909\u5316\u304c\u8efd\u6e1b\u306b\u3088\u308a\u7121\u52b9\u5316\u3055\u308c\u307e\u3057\u305f"}},a]);const l={player_id:i,original_amount:n,actual_amount:o,source_card_id:t.source_card_id||(a?a.instance_id:null)};e.animation_queue.push({effect:{effect_type:Me,args:l},sourceCard:a}),r.unshift([{effect_type:Me,args:l},a]),r.unshift([{effect_type:Ke,args:{}},a])}}},[Te]:(e,t,n,a,r)=>{const{player_id:i,amount:l}=t;if(e.players[i]){const n=l,o=cn(e,i,"scale",l>0?"increase":"decrease",l);if(e.temp_effect_data.last_scale_change=o,e.players[i].scale=Math.max(0,e.players[i].scale+o),0!==o||n!==o){0!==n&&0===o&&r.push([{effect_type:"EFFECT_NULLIFIED",args:{target_card_id:null===a||void 0===a?void 0:a.instance_id,reason:"correction_nullified",message:"\u898f\u6a21\u5909\u5316\u304c\u8efd\u6e1b\u306b\u3088\u308a\u7121\u52b9\u5316\u3055\u308c\u307e\u3057\u305f"}},a]);const l={player_id:i,original_amount:n,actual_amount:o,source_card_id:t.source_card_id||(a?a.instance_id:null)};e.animation_queue.push({effect:{effect_type:Le,args:l},sourceCard:a}),r.unshift([{effect_type:Le,args:l},a])}}},[Ie]:(e,t,n,a,r)=>{const{player_id:i,amount:l}=t;e.players[i]&&(e.players[i].consciousness=Math.max(0,l),r.unshift([{effect_type:Ke,args:{}},a]))},[Pe]:(e,t)=>{const{player_id:n,amount:a}=t;e.players[n]&&(e.players[n].scale=Math.max(0,a))},[ze]:(e,t,n,a,r)=>{let i=t.card_id;const l=e.players[a?a.owner:t.player_id],o=t.amount;if("string"===typeof t.card_id)if("self_money_on_field"===t.card_id&&a)if(l){const e=l.field.find(e=>"\u30de\u30cd\u30fc"===e.name);i=e?e.instance_id:null}else i=null;else if("front"===t.card_id&&a)if(l){const t=e.players[l.id===_e?he:_e];if(t&&a){const e=l.field.findIndex(e=>e.instance_id===a.instance_id);i=-1!==e&&t.field.length>e?t.field[e].instance_id:null}else i=null}else i=null;else if("left_opponent"===t.card_id&&a)if(l){const t=e.players[l.id===_e?he:_e];if(t&&t.field.length>0){const e=t.field[0];i=e?e.instance_id:null}else i=null}else i=null;const s=e.all_card_instances[i];if(!s)return void(a&&r.unshift([{effect_type:Ce.FAILED_PROCESS,args:{player_id:a.owner,card_id:a.instance_id,target_card_id:t.card_id}},a]));const u=c(c({},t),{},{card_id:i,target_card_id:i,target_player_id:s.owner});if(o>0?r.unshift([{effect_type:Ce.MODIFY_CARD_DURABILITY_INCREASE_RESERVE_OWNER,args:u},a]):o<0&&r.unshift([{effect_type:Ce.MODIFY_CARD_DURABILITY_DECREASE_RESERVE_OWNER,args:u},a]),!s||"field"!==s.location&&"ideology"!==s.location)a&&r.unshift([{effect_type:Ce.FAILED_PROCESS,args:{player_id:a.owner,card_id:a.instance_id,target_card_id:i}},a]);else{const n=cn(e,s.owner,"wealth",o>0?"increase":"decrease",o),l=(void 0!==s.current_durability?s.current_durability:s.durability)+n;if(pn(e,i,{current_durability:l}),0!==n||o!==n){0!==o&&0===n&&r.push([{effect_type:"EFFECT_NULLIFIED",args:{target_card_id:i,reason:"correction_nullified",message:"\u8ca1\u30c0\u30e1\u30fc\u30b8\u304c\u8efd\u6e1b\u306b\u3088\u308a\u7121\u52b9\u5316\u3055\u308c\u307e\u3057\u305f"}},a]);const s={card_id:i,original_amount:o,actual_amount:n,source_card_id:t.source_card_id||(a?a.instance_id:null),new_durability:l};e.animation_queue.push({effect:{effect_type:je,args:s},sourceCard:a}),r.unshift([{effect_type:je,args:s},a])}if(l<=0){const t=s.owner,n=e.players[t].field.findIndex(e=>e.instance_id===i);if(-1!==n){const[a]=e.players[t].field.splice(n,1);e.players[t].discard.push(a),a.location="discard",pn(e,i,{location:"discard"})}else if(e.players[t].ideology&&e.players[t].ideology.instance_id===i){const n=e.players[t].ideology;e.players[t].ideology=null,e.players[t].discard.push(n),n.location="discard",pn(e,i,{location:"discard"})}const a=c(c({},{player_id:t,card_id:i,target_card_id:i}),{},{target_player_id:t});r.unshift([{effect_type:Ce.WEALTH_DURABILITY_ZERO,args:a},s],[{effect_type:Ce.WEALTH_DURABILITY_ZERO_OWNER,args:a},s],[{effect_type:Ce.WEALTH_DURABILITY_ZERO_THIS,args:a},s])}n<0?r.unshift([{effect_type:Ce.DAMAGE_THIS,args:{damaged_card_id:i,damage_amount:n,source_card_id:a?a.instance_id:null,target_card_id:i},target_card_id:i},a]):n>0&&r.unshift([{effect_type:Ce.BOOST_THIS,args:{boosted_card_id:i,boost_amount:n,source_card_id:a?a.instance_id:null,target_card_id:i},target_card_id:i},a]),a&&r.unshift([{effect_type:Ce.SUCCESS_PROCESS,args:{player_id:a.owner,card_id:a.instance_id,target_card_id:i}},a])}},[Ge]:(e,t)=>{const{card_id:n,amount:a,min_value:r=0,set_value:i=!1}=t,l=e.all_card_instances[n];if(l){let t;t=i?Math.max(r,a):Math.max(r,l.required_scale+a),pn(e,n,{required_scale:t})}},[Ue]:(e,t,n,a,r)=>{const{player_id:i,amount:l}=t,o=e.players[i];if(!o)return;const s=o.field_limit+l,c=o.field.length;if(l<0){if(s<c)return void(a&&r.unshift([{effect_type:Ce.FAILED_PROCESS,args:{player_id:a.owner,card_id:a.instance_id,target_card_id:a.instance_id}},a]));a&&r.unshift([{effect_type:Ce.SUCCESS_PROCESS,args:{player_id:a.owner,card_id:a.instance_id,target_card_id:a.instance_id}},a])}o.field_limit=Math.max(0,s)},[Ye]:(e,t,n,a,r)=>{let{player_id:i,card_id:l,source_pile:o,destination_pile:s,maintain:u=!1}=t,d=t.card_to_move;const f=t.target_player_id||i,p=e.players[f];if(!p)return;if("draw_from_deck"===l){const n=e.players[i];if(!(n&&n.deck.length>0))return;{const e=n.deck.shift();t.card_id=e.instance_id,l=e.instance_id,d=e}}"discard_pile"===o&&(o="discard"),"discard_pile"===s&&(s="discard");const m=e.players[i];if(!m)return;let _=null;if(!d&&"game_source"!==o){const t=e.players[i];if(t)if("playing_event"===o)d=a&&a.instance_id===l?a:null;else if("ideology"===o)t.ideology&&t.ideology.instance_id===l?(d=t.ideology,t.ideology=null):e.displaced_ideology&&e.displaced_ideology.instance_id===l&&(d=e.displaced_ideology,e.displaced_ideology=null);else if("field"===o){let e=t.field.findIndex(e=>e.instance_id===l);e>-1?d=t.field.splice(e,1)[0]:t.ideology&&t.ideology.instance_id===l&&(d=t.ideology,t.ideology=null)}else if(t[o]&&Array.isArray(t[o])){const e=t[o],n=e.findIndex(e=>e.instance_id===l);n>-1&&(d=e.splice(n,1)[0])}}if(!d)return;if("deck"===o&&r.unshift([{effect_type:Ke,args:{}},a]),"game_source"!==o&&(_=d.location),d.location=s,d.owner=t.target_player_id||i,!u&&"field"!==s){const t=e.cardDefs[d.name];if(t){const n={},a="\u30de\u30cd\u30fc"===d.name&&"field"===o&&"hand"===s;d.card_type!==ve||void 0===t.durability||a||(n.durability=t.durability,n.current_durability=t.durability),void 0!==t.required_scale&&(n.required_scale=t.required_scale),Object.keys(n).length>0&&(Object.assign(d,n),pn(e,d.instance_id,n))}}if("ideology"===s||"field"===s&&d.card_type===be){p.ideology&&p.ideology.instance_id!==d.instance_id&&p.ideology.name===d.name&&r.unshift([{effect_type:Re,args:{player_id:p.id,amount:1}},d]);const e={effect_type:At,args:{player_id:f,card_id:d.instance_id}};if(p.ideology&&p.ideology.instance_id!==d.instance_id){const t=p.ideology,n={effect_type:Ye,args:{player_id:f,card_id:t.instance_id,source_pile:"ideology",destination_pile:"discard"}};r.unshift([e,d]),r.unshift([n,t])}else r.unshift([e,d]);return}if("field"===s){if("\u30de\u30cd\u30fc"!==d.name&&!((e,t,n,a,r)=>!(t.field.length>=t.field_limit&&n.card_type===ve)||(a.push([{effect_type:"LIMIT_WARNING",args:{player_id:t.id,limit_type:"field",message:"\u5834\u306e\u4e0a\u9650\u306b\u9054\u3057\u3066\u3044\u308b\u305f\u3081\u914d\u7f6e\u3067\u304d\u307e\u305b\u3093"}},r]),console.log("[DEBUG] Pushing effect to effectsQueue (L110): Type=".concat(Ye,", Args=").concat(JSON.stringify({player_id:t.id,card_id:n.instance_id,card_to_move:n,source_pile:n.location,destination_pile:"discard"}))),a.push([{effect_type:Ye,args:{player_id:t.id,card_id:n.instance_id,card_to_move:n,source_pile:n.location,destination_pile:"discard"}},r]),!1))(0,p,d,r,a))return;p.field.push(d),d.location="field"}else if("playing_event"===s)d.location="playing_event";else{if(!p[s]||!Array.isArray(p[s]))return void(_&&p[_]&&(p[_].push(d),d.location=_));if("hand"===s)((e,t,n)=>!(t.hand.length>=t.hand_capacity)||(e.animation_queue.push({effect:{effect_type:"LIMIT_WARNING",args:{player_id:t.id,limit_type:"hand",message:"\u624b\u672d\u306e\u4e0a\u9650\u306b\u9054\u3057\u3066\u3044\u307e\u3059"}},sourceCard:null}),t.discard.push(n),n.location="discard",!1))(e,p,d)&&p.hand.push(d);else{const e=p[s];let{position:n}=t;switch(n||(n="deck"===s?"random":"bottom"),n){case"top":e.unshift(d);break;case"random":const t=Math.floor(Math.random()*(e.length+1));e.splice(t,0,d);break;default:e.push(d)}}}e.all_card_instances[d.instance_id]&&(e.all_card_instances[d.instance_id].location=d.location);const h=d.owner,g=h===_e?he:_e,y={card_id:d.instance_id,target_card_id:d.instance_id,card_type:d.card_type,source_pile:o,destination_pile:s},v=c(c({},y),{},{player_id:h,target_player_id:h}),E=c(c({},y),{},{player_id:h,target_player_id:g}),b=(e,t)=>{r.unshift([{effect_type:e,args:t},a||d])};"field"!==s&&"ideology"!==s||(b(Ce.CARD_PLACED_THIS,v),b(Ce.CARD_PLACED,v),b(Ce.CARD_PLACED_OWNER,v),b(Ce.CARD_PLACED_OPPONENT,E),"field"===s&&"\u8ca1"===d.card_type&&m.field.length>=m.field_limit&&e.animation_queue.push({effect:{effect_type:"LIMIT_WARNING",args:{player_id:m.id,limit_type:"field",message:"\u5834\u306e\u4e0a\u9650\u306b\u9054\u3057\u307e\u3057\u305f"}},sourceCard:null})),"hand"===s&&(b(Ce.CARD_ADDED_TO_HAND_THIS,v),b(Ce.CARD_ADDED_TO_HAND,v),b(Ce.CARD_ADDED_TO_HAND_OWNER,v),"deck"===o&&(b(Ce.CARD_DRAWN_THIS,v),b(Ce.CARD_DRAWN,v),b(Ce.CARD_DRAWN_OWNER,v))),"discard"===s&&"discard"!==o&&(b(Ce.CARD_DISCARDED_THIS,v),b(Ce.CARD_DISCARDED,v),b(Ce.CARD_DISCARDED_OWNER,v))},[At]:(e,t,n,a,r)=>{const{player_id:i,card_id:l}=t,o=e.players[i],s=e.all_card_instances[l];if(!o||!s)return;o.ideology=s,s.location="field",e.all_card_instances[s.instance_id]&&(e.all_card_instances[s.instance_id].location=s.location);const u=s.owner,d=c(c({},{card_id:s.instance_id,target_card_id:s.instance_id,card_type:s.card_type,source_pile:"ideology",destination_pile:"ideology"}),{},{player_id:u,target_player_id:u}),f=(e,t,n)=>{r.unshift([{effect_type:e,args:t},n])};f(Ce.CARD_PLACED_THIS,d,s),f(Ce.CARD_PLACED,d,s),f(Ce.CARD_PLACED_OWNER,d,s)},[Xe]:(e,t,n,a,r)=>{if("last_added_card"===t.target_card_id){if(!t.triggering_effect_args||!t.triggering_effect_args.card_id)return;t.target_card_id=t.triggering_effect_args.card_id}let{operation:i,source_piles:l,source_pile:o,card_type:s,selection_method:u,count:d}=t;if("modify_durability"===i&&("front"===u||"left_opponent"===u))return void r.unshift([{effect_type:De,args:c(c({},t),{},{card_id:u})},a]);"discard_pile"===o&&(o="discard"),l&&(l=l.map(e=>"discard_pile"===e?"discard":e));const f=t.player_id||(a?a.owner:null),p=t.target_player_id||f;if(!f)return;const m=un(e,f,p),_=un(e,f,"self")[0];for(const c of m){if(!c)continue;let n=[];if(t.target_card_id){const a=Object.values(e.players).flatMap(e=>[e.ideology,...e.hand,...e.deck,...e.field,...e.discard]).find(e=>e&&e.instance_id===t.target_card_id);a&&a.owner===c.id&&n.push(a)}else{o&&!l?l=[o]:l||(l=["field"]);let r=dn(c,l,s);a&&(r=r.filter(e=>e.instance_id!==a.instance_id)),t.triggering_effect_args&&t.triggering_effect_args.card_id&&(l.includes("hand")||(r=r.filter(e=>e.instance_id!==t.triggering_effect_args.card_id)));let i=c;"choice"===u&&(i=_);const f=fn(e,i,r,u,d,a,t);if(null===f)return;n=f}if(0!==n.length)switch(t.store_count_key&&(e.temp_effect_data[t.store_count_key]=n.length),i){case"modify_durability":{const{amount:e}=t;for(const t of n)r.unshift([{effect_type:De,args:{card_id:t.instance_id,amount:e,source_card_id:a?a.instance_id:null}},a]);break}case"modify_required_scale":{const{amount:e,min_value:i=0}=t;for(const t of n)r.unshift([{effect_type:Ge,args:{card_id:t.instance_id,amount:e,min_value:i,source_card_id:a?a.instance_id:null}},a]);break}case"move":case"move_card":{const{destination_pile:e,position:i}=t;for(const t of n){const n=t.location||(l?l[0]:"field");r.unshift([{effect_type:Ye,args:{player_id:c.id,card_id:t.instance_id,source_pile:n,destination_pile:e,position:i,source_card_id:a?a.instance_id:null}},a])}break}case"remove":{const e=[...new Set(n)];for(const t of e)r.unshift([{effect_type:qe,args:{player_id:c.id,card_id:t.instance_id,source_card_id:a?a.instance_id:null}},a]);break}case"generate_card":{const{card_template_name:e,destination_pile:n,count:i=1}=t;r.unshift([{effect_type:He,args:{player_id:c.id,card_template_name:e,destination_pile:n,count:i,source_card_id:a?a.instance_id:null}},a]);break}}}},[bt]:(e,t,n,a,r)=>{const{player_ids:i,amount:l,next_effect:o}=t;if(!i||!l)return;const s={player_id:a?a.owner:null,operation:"modify_durability",target_player_id:i,selection_method:"all",source_piles:["field"],card_type:ve,amount:-l};o&&r.unshift([o,a]),r.unshift([{effect_type:Xe,args:s},a])},[tt]:(e,t,n,a)=>{const{player_id:r}=t,i=e.players[r],l=e.players[r===_e?he:_e],o=[];i.ideology&&o.push(i.ideology),l.ideology&&o.push(l.ideology),o.length>0&&(e.awaiting_input={type:"CHOICE_CARD_FOR_EFFECT",options:o,player_id:r,source_card_instance_id:a.instance_id,source_card_name:a.name,source_effect:{effect_type:"PROCESS_CHOOSE_AND_DISCARD_IDEOLOGY_RESOLVED",args:{}}})},PROCESS_CHOOSE_AND_DISCARD_IDEOLOGY_RESOLVED:(e,t,n,a,r)=>{const{card_id:i}=t;let l=null;for(const o of[_e,he]){const t=e.players[o];if(t.ideology&&t.ideology.instance_id===i){l=o;break}}l&&r.unshift([{effect_type:Ye,args:{player_id:l,card_id:i,source_pile:"ideology",destination_pile:"discard"}},a])},[Je]:(e,t,n,a,r)=>{const{player_id:i}=t,l=e.players[i];if(!l)return;const o=l.hand.filter(e=>e.card_type===ve),s=o.length;if(s>0){for(let e=0;e<s;e++)r.unshift([{effect_type:Ye,args:{player_id:i,card_id:"draw_from_deck",source_pile:"deck",destination_pile:"hand",source_card_id:a?a.instance_id:null}},a]);for(const e of o)r.unshift([{effect_type:Ye,args:{player_id:i,card_id:e.instance_id,source_pile:"hand",destination_pile:"discard",source_card_id:a?a.instance_id:null}},a])}},[et]:(e,t,n,a,r)=>{const{player_id:i}=t,l=e.players[i];if(!l)return;const o=l.hand.filter(e=>e.card_type===ve),s=o.length;if(s>0){for(let e=0;e<s;e++)r.unshift([{effect_type:Ye,args:{player_id:i,card_id:"draw_from_deck",source_pile:"deck",destination_pile:"hand",source_card_id:a?a.instance_id:null}},a]);for(const e of o)r.unshift([{effect_type:Ye,args:{player_id:i,card_id:e.instance_id,source_pile:"hand",destination_pile:"deck",position:"random",source_card_id:a?a.instance_id:null}},a])}},[Ct]:(e,t,n,a,r)=>{const{player_id:i,source_piles:l,card_type:o,card_id:s,card_name:u,count:d=1}=t,f=e.players[i];if(!f)return void r.unshift([{effect_type:Ce.FAILED_PROCESS,args:c(c({},t),{},{target_card_id:a.instance_id})},a]);const p=dn(f,l,o);if(p.length>0){let n=!0;const i=de(p).slice(0,d);t.exposed_cards=i,e.exposed_cards||(e.exposed_cards=[]),e.exposed_cards.push(...i.map(e=>c(c({},e),{},{exposed_by:f.id}))),i.forEach(t=>{u&&t.name!==u?n=!1:e.animation_queue.push({effect:{effect_type:Dt,args:{card_id:t.instance_id,player_id:f.id}},sourceCard:a})}),u&&!n?r.unshift([{effect_type:Ce.FAILED_PROCESS,args:c(c({},t),{},{target_card_id:a.instance_id,card_id:a.instance_id})},a]):r.unshift([{effect_type:Ce.SUCCESS_PROCESS,args:c(c({},t),{},{exposed_cards:i.map(e=>e.instance_id),target_card_id:a.instance_id,card_id:a.instance_id})},a])}else if(s){const n=[],i="self"===s?a.instance_id:s,l=e.all_card_instances[i];l&&(n.push(l),t.exposed_cards=n),n.length>0?(e.animation_queue.push({effect:{effect_type:Dt,args:{card_id:i,player_id:f.id}},sourceCard:a}),r.unshift([{effect_type:Ce.SUCCESS_PROCESS,args:c(c({},t),{},{exposed_cards:n.map(e=>e.instance_id),target_card_id:a.instance_id,card_id:a.instance_id})},a])):r.unshift([{effect_type:Ce.FAILED_PROCESS,args:c(c({},t),{},{target_card_id:a.instance_id,card_id:a.instance_id})},a])}else r.unshift([{effect_type:Ce.FAILED_PROCESS,args:c(c({},t),{},{target_card_id:a.instance_id,card_id:a.instance_id})},a])},[ot]:(e,t,n,a,r)=>{const{player_id:i}=t,l=e.players[i];if(!l)return;const o=[...l.hand.filter(e=>e.card_type===be),...l.deck.filter(e=>e.card_type===be)];if(0!==o.length)for(const s of o){const e=l.hand.some(e=>e.instance_id===s.instance_id)?"hand":"deck";r.unshift([{effect_type:Ye,args:{player_id:i,card_id:s.instance_id,source_pile:e,destination_pile:"discard",source_card_id:a?a.instance_id:null}},a])}},[ut]:(e,t,n,a,r)=>{const{player_ids:i}=t,l=un(e,a.owner,i),o=new Map;for(const s of l)s&&o.set(s.id,s.scale);for(const s of[...l].reverse()){const e=o.get(s.id);s&&e>0&&r.unshift([{effect_type:Se,args:{player_id:s.id,amount:-e,source_card_id:a?a.instance_id:null}},a])}for(const s of[...l].reverse())s&&o.has(s.id)&&r.unshift([{effect_type:Pe,args:{player_id:s.id,amount:0,source_card_id:a?a.instance_id:null}},a])},[ft]:(e,t,n,a,r)=>{const{player_id:i,card_id:l}=t,o=e.players[i],s=o.field.find(e=>e.instance_id===l);if(!o||!s)return;const c=o.field.filter(e=>"\u30de\u30cd\u30fc"===e.name&&e.instance_id!==l);if(c.length>0){const e=c[0],t=s.current_durability;r.unshift([{effect_type:De,args:{card_id:e.instance_id,amount:t,source_card_id:a?a.instance_id:null}},a]),r.unshift([{effect_type:Ye,args:{player_id:i,card_id:s.instance_id,source_pile:"field",destination_pile:"discard",source_card_id:a?a.instance_id:null}},a])}},[pt]:(e,t,n,a,r)=>{const{player_id:i,card_id:l,condition_durability_ge_30:o}=t,s=e.players[i],c=s.field.find(e=>e.instance_id===l);if(!s||!c)return;if(o&&c.current_durability<30)return;r.unshift([{effect_type:Ye,args:{player_id:i,card_id:c.instance_id,source_pile:"field",destination_pile:"hand",maintain:!0,source_card_id:a?a.instance_id:null}},a]);const u=[...s.hand].sort((e,t)=>e.required_scale-t.required_scale).slice(0,2);if(u.length>0){r.unshift([{effect_type:He,args:{player_id:i,card_template_name:"\u8cc7\u672c\u4e3b\u7fa9",destination_pile:"hand",source_card_id:a?a.instance_id:null}},a]);for(const e of[...u].reverse())r.unshift([{effect_type:Ye,args:{player_id:i,card_id:e.instance_id,source_pile:"hand",destination_pile:"discard",source_card_id:a?a.instance_id:null}},a])}},[_t]:(e,t,n,a,r)=>{const{player_id:i}=t,l=e.players[i];if(!l)return;const o=l.hand.filter(e=>e.card_type===be),s=o.length;if(s>0){r.unshift([{effect_type:He,args:{player_id:i,card_template_name:"\u30de\u30cd\u30fc",destination_pile:"hand",initial_durability:s,source_card_id:a?a.instance_id:null}},a]);for(const e of[...o].reverse())r.unshift([{effect_type:Ye,args:{player_id:i,card_id:e.instance_id,source_pile:"hand",destination_pile:"discard",source_card_id:a?a.instance_id:null}},a])}},[gt]:(e,t,n,a,r)=>{const{player_id:i,change_type:l,value1:o,value2:s}=t,c=e.players[i];if(!c)return;const u=c.field.find(e=>"\u30de\u30cd\u30fc"===e.name);if(!u)return;let d=0;if("percent_decrease_or_percent_increase"===l){d=Math.random()<.5?-Math.floor(u.current_durability*(o/100)):Math.floor(u.current_durability*(s/100))}0!==d&&r.unshift([{effect_type:De,args:{card_id:u.instance_id,amount:d,source_card_id:a?a.instance_id:null}},a])},[ht]:(e,t,n,a,r)=>{const{player_id:i}=t,l=e.players[i];if(!l)return;const o=l.field.find(e=>"\u30de\u30cd\u30fc"===e.name);o&&(e.awaiting_input={type:"CHOICE_NUMBER",player_id:i,source_card_instance_id:a.instance_id,min:0,max:o.current_durability,prompt:"\u300c\u30de\u30cd\u30fc\u300d\u306e\u8010\u4e45\u5024\u3092\u3069\u308c\u3060\u3051\u6e1b\u3089\u3057\u307e\u3059\u304b\uff1f (\u73fe\u5728\u306e\u8010\u4e45\u5024: ".concat(o.current_durability,")"),source_effect:{effect_type:"PROCESS_REDUCE_MONEY_DURABILITY_AND_GAIN_SCALE_RESOLVED",args:{player_id:i,money_card_id:o.instance_id,source_card_id:a?a.instance_id:null}}})},[yt]:(e,t,n,a,r)=>{const{player_id:i}=t,l=e.players[i];l&&l.cards_played_this_turn>0&&r.unshift([{effect_type:He,args:{player_id:i,card_template_name:"\u30de\u30cd\u30fc",destination_pile:"hand",initial_durability:l.cards_played_this_turn,source_card_id:a?a.instance_id:null}},a])},[rt]:(e,t,n,a,r)=>{const{player_id:i,target_player_id:l,amount:o}=t,s=e.players[i],c=e.players[l];if(!s||!c)return;const u=s.field.find(e=>"\u30de\u30cd\u30fc"===e.name);if(!u||u.current_durability<=0)return;const d=u.current_durability,f=c.field.filter(e=>e.card_type===ve);if(0!==f.length){for(let e=0;e<d;e++){const e=f[Math.floor(Math.random()*f.length)];r.unshift([{effect_type:De,args:{card_id:e.instance_id,amount:o,source_card_id:a?a.instance_id:null}},a])}r.push([{effect_type:Ye,args:{player_id:i,card_id:u.instance_id,source_pile:"field",destination_pile:"discard",source_card_id:a?a.instance_id:null}},a])}},PROCESS_REDUCE_MONEY_DURABILITY_AND_GAIN_SCALE_RESOLVED:(e,t,n,a,r)=>{const{player_id:i,money_card_id:l,amount:o,source_card_id:s}=t;o>0&&(r.unshift([{effect_type:Ne,args:{player_id:i,amount:o,source_card_id:s}},a]),r.unshift([{effect_type:De,args:{card_id:l,amount:-o,source_card_id:s}},a]))},[dt]:(e,t,n,a,r)=>{const{player_id:i,card_template_name:l,destination_pile:o,card_type_to_discard:s}=t,c=e.players[i];if(!c)return;const u=c.hand.filter(e=>e.card_type===s),d=u.length;if(d>0){for(let e=0;e<d;e++)r.unshift([{effect_type:He,args:{player_id:i,card_template_name:l,destination_pile:o}},a]);for(const e of u)r.unshift([{effect_type:Ye,args:{player_id:i,card_id:e.instance_id,source_pile:"hand",destination_pile:"discard"}},a])}},[ct]:(e,t,n,a,r)=>{const{player_id:i,condition_target:l,threshold:o,card_template_name:s,is_above:c=!0}=t,u=e.players[i];if(!u)return;const d=u[l];(c?d>=o:d<o)&&r.unshift([{effect_type:He,args:{player_id:i,card_template_name:s,destination_pile:"hand",source_card_id:a?a.instance_id:null}},a])},[mt]:(e,t,n,a)=>{const{player_id:r,options:i}=t;e.awaiting_input={type:"CHOICE_CARD_TO_ADD",options:i,player_id:r,source_card_instance_id:a.instance_id}},[nt]:(e,t,n,a)=>{let{player_id:r,source_piles:i,destination_pile:l,card_type:o,position:s}=t;i&&i.includes("discard_pile")&&(i=i.map(e=>"discard_pile"===e?"discard":e));const c=e.players[r];if(!c)return;let u=[];i.forEach(e=>{const t=c[e];if(t){const e=Array.isArray(t)?t:[t];u.push(...e.filter(e=>!o||e.card_type===o))}}),o&&(u=u.filter(e=>e.card_type===o)),u.length>0&&(e.awaiting_input={type:"CHOICE_CARD_FROM_PILE",options:u,destination_pile:l,player_id:r,source_card_instance_id:a.instance_id,source_piles:i,position:s})},[at]:(e,t,n,a,r)=>{const{player_id:i,target_player_id:l}=t,o=e.players[l];if(!o)return void r.unshift([{effect_type:Ce.FAILED_PROCESS,args:c(c({},t),{},{target_card_id:a.instance_id})},a]);const s=o.field.filter(e=>"\u8ca1"===e.card_type);s.length>0?e.awaiting_input={type:"CHOICE_CARD_FOR_EFFECT",options:s,player_id:i,source_card_instance_id:a.instance_id,source_card_name:a.name,source_effect:{effect_type:"PROCESS_CHOOSE_AND_MODIFY_DURABILITY_TO_WEALTH_RESOLVED",args:c({},t)}}:r.unshift([{effect_type:Ce.FAILED_PROCESS,args:c(c({},t),{},{target_card_id:a.instance_id})},a])},[lt]:(e,t,n,a,r)=>{const{player_id:i}=t,l=e.players[i];if(!l||0===l.hand.length)return void r.unshift([{effect_type:Ce.FAILED_PROCESS,args:c(c({},t),{},{target_card_id:a.instance_id})},a]);const o=fn(e,l,l.hand,"highest_required_scale",1,a,t);if(o&&o.length>0){const e=o[0];r.unshift([{effect_type:Ye,args:{player_id:i,card_id:e.instance_id,source_pile:"hand",destination_pile:"deck",position:"random"}},a]),r.unshift([{effect_type:Ce.SUCCESS_PROCESS,args:c(c({},t),{},{returned_card_id:e.instance_id,target_card_id:a.instance_id,card_id:a.instance_id})},a])}else r.unshift([{effect_type:Ce.FAILED_PROCESS,args:c(c({},t),{},{target_card_id:a.instance_id})},a])},[vt]:(e,t,n,a,r)=>{const{player_id:i,amount:l}=t,o={player_id:i,operation:"modify_durability",target_player_id:i,selection_method:"all",source_piles:["field"],card_type:ve,amount:l};r.unshift([{effect_type:Xe,args:o},a])},[vt]:(e,t,n,a,r)=>{const{player_id:i,amount:l}=t,o={player_id:i,operation:"modify_durability",target_player_id:i,selection_method:"all",source_piles:["field"],card_type:ve,amount:l};r.unshift([{effect_type:Xe,args:o},a])},PROCESS_CHOOSE_AND_MODIFY_DURABILITY_TO_WEALTH_RESOLVED:(e,t,n,a,r)=>{const{card_id:i,amount:l,bonus_effect_if_money:o,bonus_scale_amount:s,player_id:u}=t;let d=null;for(const c of Object.values(e.players)){const e=c.field.find(e=>e.instance_id===i);if(e){d=e;break}}d?(r.unshift([{effect_type:De,args:{card_id:d.instance_id,amount:l,source_card_id:a?a.instance_id:null}},a]),o&&"\u30de\u30cd\u30fc"===d.name&&r.unshift([{effect_type:Ne,args:{player_id:u,amount:s}},a])):r.unshift([{effect_type:Ce.FAILED_PROCESS,args:c(c({},t),{},{target_card_id:a.instance_id})},a])},[it]:(e,t,n,a,r)=>{const{player_id:i,target_player_id:l}=t,o=e.players[l];if(!o)return void r.unshift([{effect_type:Ce.FAILED_PROCESS,args:c(c({},t),{},{target_card_id:a.instance_id})},a]);const s=o.field.filter(e=>e.card_type===ve);s.length>0?e.awaiting_input={type:"CHOICE_CARD_FOR_EFFECT",options:s,player_id:i,source_card_instance_id:a.instance_id,source_card_name:a.name,source_effect:{effect_type:"PROCESS_CHOOSE_AND_BOUNCE_TO_WEALTH_RESOLVED",args:c({},t)}}:r.unshift([{effect_type:Ce.FAILED_PROCESS,args:c(c({},t),{},{target_card_id:a.instance_id})},a])},PROCESS_CHOOSE_AND_BOUNCE_TO_WEALTH_RESOLVED:(e,t,n,a,r)=>{const{card_id:i,target_player_id:l}=t;i?(r.unshift([{effect_type:Ye,args:{player_id:l,card_id:i,source_pile:"field",destination_pile:"hand"}},a]),r.unshift([{effect_type:Ce.SUCCESS_PROCESS,args:c(c({},t),{},{target_card_id:a.instance_id,card_id:a.instance_id})},a])):r.unshift([{effect_type:Ce.FAILED_PROCESS,args:c(c({},t),{},{target_card_id:a.instance_instance_id})},a])},[Ze]:(e,t,n,a,r)=>{const{player_id:i,card_type:l,amount:o,scale_reduction:s,scale_reduction_percentage:c,round_down:u}=t,d=e.players[i];if(!d||!d.deck||0===d.deck.length)return;const f=d.deck.filter(e=>e.card_type===l);if(0===f.length)return;const p=de([...f]);for(let m=0;m<o&&!(m>=p.length);m++){const e=p[m];let t=0;if(s)t=-s;else if(c){let n=e.required_scale*(c/100);u&&(n=Math.floor(n)),t=-n}0!==t&&r.unshift([{effect_type:Ge,args:{card_id:e.instance_id,amount:t,min_value:0}},a]),r.unshift([{effect_type:Ye,args:{player_id:i,card_id:e.instance_id,source_pile:"deck",destination_pile:"hand"}},a])}},[Et]:(e,t,n,a,r)=>{const{counter_damage:i,triggering_effect_args:l}=t,o=l?l.source_card_id:null;o&&i&&r.unshift([{effect_type:De,args:{card_id:o,amount:-i,source_card_id:a?a.instance_id:null}},a])},[$e]:(e,t)=>{e.effects_to_skip||(e.effects_to_skip={}),e.effects_to_skip[t.effect_type]=t.player_id},[Fe]:(e,t)=>{const n=e.players[t.player_id];if(n)if(n.modify_parameter_corrections){if(n.modify_parameter_corrections.some(e=>e.source_card_id===t.source_card_id&&e.correct_target===t.correct_target&&e.correct_direction===t.correct_direction&&e.correct_type===t.correct_type&&e.amount===t.amount))return;{const e={correct_target:t.correct_target,correct_direction:t.correct_direction,correct_type:t.correct_type,amount:t.amount,source_card_id:t.source_card_id};n.modify_parameter_corrections.push(e)}}else n.modify_parameter_corrections=[]},[Se]:(e,t,n,a,r)=>{let i=c({},t);const l=e.players[t.player_id];if(l&&t.amount_percentage){let n=l.consciousness*(Math.abs(t.amount_percentage)/100);t.round_down&&(n=Math.floor(n)),t.store_original_value_for_temp&&(e.temp_effect_data[t.store_original_value_for_temp]=n),i.amount=t.amount_percentage<0?-n:n}else if(t.amount_based_on_removed_discard_count)i.amount=e.temp_effect_data.removed_discard_count||0;else if(t.amount_based_on_temp_value){let n=e.temp_effect_data[t.amount_based_on_temp_value]||0;t.is_negative&&(n=-n),i.amount=n}else t.amount_based_on_hand_count&&(i.amount=l.hand.length);i.target_player_id=i.player_id,a&&!i.source_card_id&&(i.source_card_id=a.instance_id);const o=[];o.push([{effect_type:Re,args:i},a]),i.amount>0?o.push([{effect_type:Ce.MODIFY_CONSCIOUSNESS_INCREASE_RESERVE_OWNER,args:i},a]):i.amount<0&&(o.push([{effect_type:Ce.MODIFY_CONSCIOUSNESS_DECREASE_RESERVE_OWNER,args:i},a]),o.push([{effect_type:Ce.MODIFY_CONSCIOUSNESS_DECREASE_RESERVE_OPPONENT,args:i},a])),r.unshift(...o.reverse())},[Ne]:(e,t,n,a,r)=>{let i=c({},t);const l=e.players[t.player_id];if(l&&t.amount_percentage){let n=l.scale*(Math.abs(t.amount_percentage)/100);t.round_down&&(n=Math.floor(n)),t.store_original_value_for_temp&&(e.temp_effect_data[t.store_original_value_for_temp]=n),i.amount=t.amount_percentage<0?-n:n}i.target_player_id=i.player_id,a&&!i.source_card_id&&(i.source_card_id=a.instance_id);const o=[];o.push([{effect_type:Te,args:i},a]),i.amount>0?o.push([{effect_type:Ce.MODIFY_SCALE_INCREASE_RESERVE_OWNER,args:i},a]):i.amount<0&&o.push([{effect_type:Ce.MODIFY_SCALE_DECREASE_RESERVE_OWNER,args:i},a]),r.unshift(...o.reverse())},[De]:(e,t,n,a,r)=>{let i=c({},t);if(i.amount_based_on_self_durability&&a){const e=void 0!==a.current_durability?a.current_durability:a.durability;"minus"===i.amount_based_on_self_durability&&(i.amount=-e),delete i.amount_based_on_self_durability}const l=c(c({},i),{},{card_id:t.card_id}),o=[];o.push([{effect_type:ze,args:l,target_card_id:t.card_id},a]);const s=e.all_card_instances[t.card_id];if(s){const e=c(c({},l),{},{target_player_id:s.owner});l.amount>0?o.push([{effect_type:Ce.MODIFY_CARD_DURABILITY_INCREASE_RESERVE_OWNER,args:e},a]):l.amount<0&&o.push([{effect_type:Ce.MODIFY_CARD_DURABILITY_DECREASE_RESERVE_OWNER,args:e},a])}r.unshift(...o.reverse())},[Be]:(e,t,n,a,r)=>{const{card_id:i}=t;e.all_card_instances[i]&&(e.animationCallbacks?e.animationCallbacks.set(i,()=>{r.unshift([{effect_type:Ye,args:{player_id:t.player_id,card_id:t.card_id,source_pile:t.source_pile,destination_pile:t.destination_pile,source_card_id:t.source_card_id}},a])}):r.unshift([{effect_type:Ye,args:{player_id:t.player_id,card_id:t.card_id,source_pile:t.source_pile,destination_pile:t.destination_pile,source_card_id:t.source_card_id}},a]))},[We]:(e,t,n,a,r)=>{if(e.animationCallbacks){const n="trigger-".concat(Date.now(),"-").concat(Math.random());e.animationCallbacks.set(n,()=>{r.unshift([{effect_type:t.trigger_type,args:t.trigger_args},a])})}else r.unshift([{effect_type:t.trigger_type,args:t.trigger_args},a])},[we]:(e,t,n,a,r)=>{},[ke]:(e,t,n,a,r)=>{},[Oe]:(e,t,n,a,r)=>{},[xe]:(e,t,n,a,r)=>{},[Ve]:(e,t)=>{const{player_id:n,card_id:a,position:r}=t,i=e.players[n];if(!i||!i.field)return;const l=i.field.findIndex(e=>e.instance_id===a);if(-1===l)return;const[o]=i.field.splice(l,1);"leftmost"===r?i.field.unshift(o):"rightmost"===r&&i.field.push(o),e.animation_queue.push({effect:{effect_type:"FIELD_CARDS_REORDERED",args:{player_id:n,card_id:a,position:r}},sourceCard:null})},[St]:(e,t)=>{e.animation_queue.push({effect:{effect_type:Nt,args:{card_id:t.card_id,player_id:t.player_id}},sourceCard:e.all_card_instances[t.card_id]})},[Ke]:()=>{}},_n=(e,t,n)=>{const a=[],r=[],i=n.current_turn,l=Object.keys(n.players),o=l.find(e=>e!==i),s=[];i&&n.players[i]&&s.push(n.players[i]),o&&n.players[o]&&s.push(n.players[o]),s.length<l.length&&l.forEach(e=>{s.some(t=>t.id===e)||s.push(n.players[e])}),s.forEach(e=>{e.ideology&&r.push(e.ideology),r.push(...e.field),r.push(...e.hand),r.push(...e.discard),r.push(...e.deck)}),t&&"playing_event"===t.location&&r.push(t);const u=r.filter(e=>e&&e.card_type);for(const d of u){const r=rn(d,e,n);if(r.length>0)for(const n of r)n.args=c(c({},n.args),{},{triggering_source_card_id:e.source_card_id||(t?t.instance_id:null),triggering_effect_args:e.args}),a.push([n,d])}return a},hn=e=>{if(!e||!e.effect_type)return!1;if(["TURN_START","TURN_END","GAME_RESULT","TURN_ORDER_DECISION","LIMIT_WARNING","EFFECT_NULLIFIED","ADD_MODIFY_PARAMETER_CORRECTION","REMOVE_MODIFY_PARAMETER_CORRECTION","CLEAR_MODIFY_PARAMETER_CORRECTIONS","TRIGGER_EFFECT","CHECK_REACTION","CHECK_GAME_OVER","MODIFY_CONSCIOUSNESS_RESERVE","MODIFY_SCALE_RESERVE","MODIFY_CARD_DURABILITY_RESERVE","MODIFY_CONSCIOUSNESS","MODIFY_SCALE","MODIFY_CARD_DURABILITY","SKIP_EFFECT",Ce.START_TURN,Ce.END_TURN_OWNER,Ce.END_TURN_OPPONENT,Ce.PLAY_EVENT,Ce.PLAY_EVENT_OWNER,Ce.PLAY_EVENT_OPPONENT,Ce.PLAY_EVENT_THIS,Ce.PLAYER_PLAY_CARD_ACTION,Ce.PLAYER_PLAY_CARD_ACTION_OWNER,Ce.PLAYER_PLAY_CARD_ACTION_OPPONENT,Ce.CARD_ADDED_TO_HAND_THIS,Ce.CARD_ADDED_TO_HAND,Ce.CARD_ADDED_TO_HAND_OWNER,Ce.CARD_DRAWN_THIS,Ce.CARD_DRAWN,Ce.CARD_DRAWN_OWNER,Ce.CARD_PLACED_THIS,Ce.CARD_PLACED,Ce.CARD_PLACED_OWNER,Ce.CARD_PLACED_OPPONENT,Ce.CARD_DISCARDED_THIS,Ce.CARD_DISCARDED,Ce.CARD_DISCARDED_OWNER,Ce.DAMAGE_THIS,Ce.BOOST_THIS,Ce.WEALTH_DURABILITY_ZERO,Ce.WEALTH_DURABILITY_ZERO_OWNER,Ce.WEALTH_DURABILITY_ZERO_OPPONENT,Ce.WEALTH_DURABILITY_ZERO_THIS,Ce.MODIFY_CONSCIOUSNESS,Ce.MODIFY_CONSCIOUSNESS_DECREASE_RESERVE_OWNER,Ce.MODIFY_CONSCIOUSNESS_DECREASE_RESERVE_OPPONENT,Ce.MODIFY_CONSCIOUSNESS_INCREASE_RESERVE_OWNER,Ce.MODIFY_SCALE_DECREASE_RESERVE_OWNER,Ce.MODIFY_SCALE_INCREASE_RESERVE_OWNER,Ce.MODIFY_CARD_DURABILITY_DECREASE_RESERVE_OWNER,Ce.MODIFY_CARD_DURABILITY_INCREASE_RESERVE_OWNER,Ce.SUCCESS_PROCESS,Ce.FAILED_PROCESS].includes(e.effect_type))return!1;if(on.getAvailableFormatters().includes(e.effect_type))return!0;return!!["PLAYER_ACTION","ADD_CARD_TO_GAME","REMOVE_CARD_FROM_GAME","PROCESS_CARD_OPERATION","PROCESS_DEAL_DAMAGE_TO_ALL_WEALTH","PROCESS_CHOOSE_AND_DISCARD_IDEOLOGY","PROCESS_DISCARD_ALL_HAND_WEALTH_CARDS_AND_DRAW","PROCESS_MOVE_HAND_WEALTH_TO_DECK_AND_DRAW","PROCESS_EXPOSE_CARD_BY_TYPE","PROCESS_DISCARD_ALL_IDEOLOGY_FROM_HAND_AND_DECK","PROCESS_SET_ALL_SCALE_TO_ZERO_AND_REDUCE_CONSCIOUSNESS","PROCESS_MONEY_CARD_PLACEMENT_EFFECT","PROCESS_MONEY_CARD_TURN_START_EFFECT","PROCESS_DISCARD_ALL_HAND_IDEOLOGY_AND_ADD_MONEY","PROCESS_MODIFY_MONEY_DURABILITY_RANDOM","PROCESS_REDUCE_MONEY_DURABILITY_AND_GAIN_SCALE","PROCESS_ADD_MONEY_TOKEN_BASED_ON_CARDS_PLAYED","PROCESS_MONEY_DURABILITY_BASED_COUNT_MODIFY_CARD_DURABILITY","PROCESS_ADD_CARDS_BASED_ON_DISCARDED_COUNT","PROCESS_ADD_CARD_CONDITIONAL","PROCESS_ADD_CHOICE_CARD_TO_HAND","PROCESS_CHOOSE_AND_MOVE_CARD_FROM_PILE","PROCESS_CHOOSE_AND_MODIFY_DURABILITY_TO_WEALTH","PROCESS_RETURN_LARGEST_REQUIRED_SCALE_CARD_TO_DECK","PROCESS_ALL_WEALTH_BOOST","PROCESS_CHOOSE_AND_BOUNCE_TO_WEALTH","PROCESS_DRAW_RANDOM_CARD_AND_MODIFY_REQUIRED_SCALE","PROCESS_COUNTER_ATTACK","REORDER_FIELD_CARDS"].includes(e.effect_type)},gn=e=>te(e,e=>{if(e.game_over)return;let t=0;for(;e.effect_queue.length>0&&!e.awaiting_input&&!e.game_over&&t<500;){const[n,a]=e.effect_queue.shift();if(sn&&sn.recordEffect(e,n,a),e.effects_to_skip&&e.effects_to_skip[n.effect_type]){const r=e.effects_to_skip[n.effect_type];if(n.args.player_id===r){delete e.effects_to_skip[n.effect_type],n.args.card_id&&e.animation_queue.push({effect:{effect_type:"EFFECT_NULLIFIED",args:{target_card_id:n.args.card_id,reason:"skip_effect",message:"\u30a8\u30d5\u30a7\u30af\u30c8\u304c\u30b9\u30ad\u30c3\u30d7\u3055\u308c\u307e\u3057\u305f"}},sourceCard:a}),t++;continue}}const r=mn[n.effect_type];if(r&&(r(e,n.args,e.cardDefs,a,e.effect_queue),e.awaiting_input))return;const i=_n(n,a,e);if(i.length>0&&e.effect_queue.unshift(...i),hn(n)){const t=on.generateEntry(n.effect_type,n.args||{},a,e);t&&e.game_log.push(t)}ln(e),t++,t>=500&&(e.game_over=!0,e.game_over_reason="\u30bb\u30fc\u30d5\u30c6\u30a3\u30d6\u30ec\u30fc\u30af\u767a\u52d5\uff1a\u7121\u9650\u30eb\u30fc\u30d7\u306e\u53ef\u80fd\u6027\u304c\u3042\u308a\u307e\u3059\u3002")}sn&&sn.notifyEffectProcessingComplete&&sn.notifyEffectProcessingComplete()}),yn=e=>te(e,ln),vn=e=>te(e,e=>{Object.values(e.players).forEach(e=>{e.hand.forEach(e=>{e.isNew&&delete e.isNew})}),e.phase=me;const t=e.current_turn,n=t===_e?he:_e,a=e.players[t],r=t===e.first_player,i=r?"\u5148\u653b":"\u5f8c\u653b",l=e.round_number||1,o="".concat(i," \u30bf\u30fc\u30f3").concat(l," \u958b\u59cb (").concat(a.name,")");e.animation_queue.push({effect:{effect_type:"TURN_START",args:{player_name:a.name,player_id:t,turn_number:l}},sourceCard:null}),e.game_log||(e.game_log=[]),e.game_log.push({id:"turn_start_".concat(Date.now()),timestamp:Date.now(),type:"turn_start",message:o,details:{player_id:t,player_name:a.name,turn_order:i,round_number:l,is_first_player:r}}),console.log("\ud83c\udfaeGAME_ANIM [main.js] Pushing DRAW_CARD effect for player ".concat(t,", Turn: ").concat(e.turn_number)),e.effect_queue.push([{effect_type:Qe,args:{player_id:t}},null]);const s={player_id:t,target_player_id:t},c={player_id:t,target_player_id:n};e.effect_queue.push([{effect_type:Ce.START_TURN_OWNER,args:s},null]),e.effect_queue.push([{effect_type:Ce.START_TURN_OPPONENT,args:c},null])}),En=(e,t)=>{const[n,r]=(0,a.useState)(!0),i=(0,a.useRef)(t);(0,a.useEffect)(()=>()=>{},[t]);const l=(0,a.useCallback)(()=>{},[]),o=(0,a.useCallback)(()=>{r(e=>!e)},[]);return(0,a.useEffect)(()=>{},[null===e||void 0===e?void 0:e.round_number]),a.useMemo(()=>{const t=(null===e||void 0===e?void 0:e.game_log)||[],a=()=>[...t];return{combinedLog:a(),getFilteredEntries:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"all";if(!n)return[];const t=a();return"all"===e?t:t.filter(t=>{if("game_log"===t.source)return!0;switch(e){case"card_play":return"PLAYER_ACTION"===t.effectType||t.description&&(t.description.includes("\u30d7\u30ec\u30a4")||t.description.includes("\u914d\u7f6e"));case"damage":return"CARD_DURABILITY_CHANGED"===t.effectType||t.description&&(t.description.includes("\u30c0\u30e1\u30fc\u30b8")||t.description.includes("\u56de\u5fa9"));case"resource":return"CONSCIOUSNESS_CHANGED"===t.effectType||"SCALE_CHANGED"===t.effectType||"SET_CONSCIOUSNESS"===t.effectType||"SET_SCALE"===t.effectType||t.description&&(t.description.includes("\u610f\u8b58")||t.description.includes("\u898f\u6a21"));case"card_move":return"MOVE_CARD"===t.effectType||t.description&&(t.description.includes("\u79fb\u52d5")||t.description.includes("\u30c9\u30ed\u30fc"));default:return!0}})},clearLog:l,toggleEnabled:o,isEnabled:n,getLogStats:()=>{const e=a(),t=e.filter(e=>"effect_queue"===e.source).length,r=e.filter(e=>"game_log"===e.source).length;return{total:e.length,effect:t,progress:r,isEnabled:n}},getEffectMonitor:()=>i.current}},[null===e||void 0===e?void 0:e.game_log,n,null===e||void 0===e?void 0:e.round_number,t])},bn=e=>{let{turnHistory:t,gameState:n,width:r=800,height:i=400,padding:l=60}=e;const[o,s]=(0,a.useState)(null),[c,u]=(0,a.useState)("player"),d=(0,a.useRef)(null),f=(0,a.useRef)(null),p=(0,a.useRef)(0),m=(0,a.useRef)(0),[_,h]=(0,a.useState)(-1),g=(0,a.useRef)(_),[y,v]=(0,a.useState)(null),E=(0,a.useCallback)(e=>l+(e-1)/(N>1?N-1:1)*(r-2*l),[r,l]),b=(0,a.useCallback)(e=>{const t=w-k;return 0===t?i-l:i-l-(e-k)/t*(i-2*l)},[i,l]),C=(0,a.useMemo)(()=>{if(!t)return[];let e=[...t];if(n&&n.game_over){const t=e[e.length-1],a={turnNumber:n.turn_number,playerConsciousness:n.players[ge].consciousness,npcConsciousness:n.players[ye].consciousness,playerIdeologies:n.players[ge].ideology?[n.players[ge].ideology.name]:[],npcIdeologies:n.players[ye].ideology?[n.players[ye].ideology.name]:[]};t&&t.turnNumber===a.turnNumber?e[e.length-1]=a:e.push(a)}return e},[t,n]),A=(0,a.useCallback)(e=>{if(d.current=e,null!==e){const t=e.getTotalLength();p.current=t,e.style.strokeDasharray=t,e.style.strokeDashoffset=t}},[C]),S=(0,a.useCallback)(e=>{if(f.current=e,null!==e){const t=e.getTotalLength();m.current=t,e.style.strokeDasharray=t,e.style.strokeDashoffset=t}},[C]);if((0,a.useEffect)(()=>{g.current=_},[_]),(0,a.useEffect)(()=>{let e,t;const n=r-2*l,a=r=>{t||(t=r);const i=r-t,o=Math.min(1,i/3e3),s=(c=o)*(2-c);var c;const u=s*n;d.current&&p.current>0&&(d.current.style.strokeDashoffset=p.current*(1-s)),f.current&&m.current>0&&(f.current.style.strokeDashoffset=m.current*(1-s));let _=-1;for(let e=0;e<C.length;e++){if(!(u>=E(C[e].turnNumber)-l))break;_=e}_!==g.current&&(g.current=_,h(_),v(_)),o<1&&(e=requestAnimationFrame(a))};if(C.length>0&&d.current&&f.current){d.current.style.strokeDasharray=p.current,d.current.style.strokeDashoffset=p.current,f.current.style.strokeDasharray=m.current,f.current.style.strokeDashoffset=m.current,h(-1),g.current=-1,v(null);const t=setTimeout(()=>{e=requestAnimationFrame(a)},1e3);return()=>{clearTimeout(t),cancelAnimationFrame(e)}}},[C,E,r,l,d,f,p,m]),0===C.length)return(0,Tt.jsx)("div",{children:"\u30c1\u30e3\u30fc\u30c8\u30c7\u30fc\u30bf\u304c\u3042\u308a\u307e\u305b\u3093\u3002"});const N=Math.max(...C.map(e=>e.turnNumber),1),D=C.flatMap(e=>[e.playerConsciousness,e.npcConsciousness]),R=Math.max(...D),w=(Math.min(...D),R+5),k=0,O=C.map(e=>"".concat(E(e.turnNumber),",").concat(b(e.playerConsciousness))).join(" "),x=C.map(e=>"".concat(E(e.turnNumber),",").concat(b(e.npcConsciousness))).join(" "),T=["#e6194b","#3cb44b","#ffe119","#4363d8","#f58231","#911eb4","#46f0f0","#f032e6","#bcf60c","#fabebe","#008080","#e6beff","#9a6324","#fffac8","#800000","#aaffc3","#800000","#ffd8b1","#000075"],I=e=>{if(!e)return"#555";let t=0;for(let n=0;n<e.length;n++)t=e.charCodeAt(n)+((t<<5)-t);return T[Math.abs(t%T.length)]},P=[];let M=null;for(let a=0;a<C.length;a++){const e=C[a],t=a>0?C[a-1]:null,n="player"===c?e.playerIdeologies:e.npcIdeologies,o=n&&n.length>0?n[0]:null;let u=null;t&&(u="player"===c?t.playerIdeologies:t.npcIdeologies);const d=t&&u&&u.length>0?u[0]:null;if(0===a||o!==d){let e=I(o);if(e===M){const t=(T.indexOf(e)+1)%T.length;e=T[t]}M=e}const f=C[a+1],p=E(e.turnNumber),m=f?E(f.turnNumber):r-l;p>m||P.push((0,Tt.jsx)("rect",{x:p,y:l,width:m-p,height:i-2*l,fill:M,opacity:"0.1",onMouseOver:()=>s(a),onMouseOut:()=>s(null)},"block-".concat(a)))}const L=[];for(let a=0;a<=5;a++){const e=k+a/5*(w-k),t=b(e);L.push((0,Tt.jsxs)("g",{className:"axis-group",children:[(0,Tt.jsx)("text",{x:l-10,y:t+5,textAnchor:"end",className:"axis-label",children:Math.round(e)}),(0,Tt.jsx)("line",{x1:l,y1:t,x2:r-l,y2:t,className:"grid-line"})]},"y-label-".concat(a)))}const j=C.map((e,t)=>(0,Tt.jsx)("text",{x:E(e.turnNumber),y:i-l+20,textAnchor:"middle",className:"axis-label",children:e.turnNumber},"x-label-".concat(t)));let U=null;if(null!==o&&C[o]){const e=C[o],t=e.playerIdeologies[0]||"\u306a\u3057",n=e.npcIdeologies[0]||"\u306a\u3057";U=(0,Tt.jsxs)("g",{transform:"translate(".concat(E(e.turnNumber),", ").concat(b(e.playerConsciousness)-20,")"),className:"tooltip",children:[(0,Tt.jsx)("rect",{x:"-80",y:"-20",width:"160",height:"95",rx:"5",className:"tooltip-bg"}),(0,Tt.jsxs)("text",{x:"0",y:"0",textAnchor:"middle",className:"tooltip-title",children:["\u30bf\u30fc\u30f3 ",e.turnNumber]}),(0,Tt.jsxs)("text",{x:"-70",y:"20",className:"tooltip-text",children:["\u3042\u306a\u305f: ",(0,Tt.jsx)("tspan",{className:"player-text",children:e.playerConsciousness})," (",t,")"]}),(0,Tt.jsxs)("text",{x:"-70",y:"40",className:"tooltip-text",children:["\u76f8\u624b: ",(0,Tt.jsx)("tspan",{className:"npc-text",children:e.npcConsciousness})," (",n,")"]})]})}const F=r-l-(r>400?80:60),z=l,G=r>400?10:8,H=G+5;return(0,Tt.jsxs)("div",{className:"chart-wrapper",children:[(0,Tt.jsxs)("div",{className:"chart-toggle-buttons",children:[(0,Tt.jsx)("button",{onClick:()=>u("player"),disabled:"player"===c,children:"\u3042\u306a\u305f\u306e\u30a4\u30c7\u30aa\u30ed\u30ae\u30fc"}),(0,Tt.jsx)("button",{onClick:()=>u("npc"),disabled:"npc"===c,children:"\u76f8\u624b\u306e\u30a4\u30c7\u30aa\u30ed\u30ae\u30fc"})]}),(0,Tt.jsxs)("svg",{width:r,height:i,className:"consciousness-chart",children:[(0,Tt.jsx)("defs",{children:(0,Tt.jsx)("clipPath",{id:"chart-area",children:(0,Tt.jsx)("rect",{x:l,y:l,width:r-2*l,height:i-2*l})})}),L,j,(0,Tt.jsxs)("g",{clipPath:"url(#chart-area)",children:[P,(0,Tt.jsx)("polyline",{ref:A,points:O,className:"line player-line",fill:"none",style:{strokeDasharray:p.current,opacity:1}}),(0,Tt.jsx)("polyline",{ref:S,points:x,className:"line npc-line",fill:"none",style:{strokeDasharray:m.current,opacity:1}}),C.map((e,t)=>(0,Tt.jsxs)("g",{children:[(0,Tt.jsx)("circle",{cx:E(e.turnNumber),cy:b(e.playerConsciousness),r:"4",className:"point player-point ".concat(t===y?"point-pop":""),style:{opacity:t<=_?1:0},onAnimationEnd:()=>v(null)}),(0,Tt.jsx)("circle",{cx:E(e.turnNumber),cy:b(e.npcConsciousness),r:"4",className:"point npc-point ".concat(t===y?"point-pop":""),style:{opacity:t<=_?1:0},onAnimationEnd:()=>v(null)})]},"point-group-".concat(t)))]}),(0,Tt.jsx)("line",{x1:l,y1:i-l,x2:r-l,y2:i-l,className:"axis-line"}),(0,Tt.jsx)("line",{x1:l,y1:l,x2:l,y2:i-l,className:"axis-line"}),(0,Tt.jsxs)("g",{transform:"translate(".concat(F,", ").concat(z,")"),children:[(0,Tt.jsx)("rect",{x:"0",y:"0",width:G,height:G,fill:"#007bff"}),(0,Tt.jsx)("text",{x:H,y:G/2+3,className:"legend-label",children:"\u3042\u306a\u305f"}),(0,Tt.jsx)("rect",{x:"0",y:G+5,width:G,height:G,fill:"#dc3545"}),(0,Tt.jsx)("text",{x:H,y:G+5+G/2+3,className:"legend-label",children:"NPC"})]}),U]})]})};const Cn=function(){const[e,t]=(0,a.useState)({width:window.innerWidth,height:window.innerHeight});return(0,a.useEffect)(()=>{function e(){t({width:window.innerWidth,height:window.innerHeight})}return window.addEventListener("resize",e),e(),()=>window.removeEventListener("resize",e)},[]),e};const An=function(e){let{winnerName:t,onNewGame:n,onMainMenu:a,turnHistory:r,gameState:i}=e;const{width:l}=Cn();let o,s,c;return l<600?(o=.9*l,s=.6*o,c=40):l<950?(o=.8*l,s=.5*o,c=50):(o=800,s=400,c=60),(0,Tt.jsxs)("div",{className:"game-over-screen",children:[(0,Tt.jsx)("h1",{children:"\u30b2\u30fc\u30e0\u7d42\u4e86"}),(0,Tt.jsxs)("h2",{children:["\u52dd\u8005: ",t]}),(0,Tt.jsxs)("div",{className:"chart-container",children:[(0,Tt.jsx)("h3",{children:'\u7db4\u3089\u308c\u3057"\u6b74\u53f2"'}),(0,Tt.jsx)(bn,{turnHistory:r,gameState:i,width:o,height:s,padding:c})]}),(0,Tt.jsxs)("div",{className:"game-over-buttons",children:[(0,Tt.jsx)("button",{className:"menu-button",onClick:n,children:"\u65b0\u3057\u3044\u30b2\u30fc\u30e0\u3092\u59cb\u3081\u308b"}),(0,Tt.jsx)("button",{className:"menu-button",onClick:a,children:"\u30e1\u30a4\u30f3\u30e1\u30cb\u30e5\u30fc\u306b\u623b\u308b"})]})]})},Sn=e=>{let{isOpen:t,onClose:n,title:a,message:r}=e;return t?(0,Tt.jsx)("div",{className:"info-modal-overlay",onClick:n,children:(0,Tt.jsxs)("div",{className:"info-modal-content",onClick:e=>e.stopPropagation(),children:[(0,Tt.jsxs)("div",{className:"info-modal-header",children:[(0,Tt.jsx)("h3",{children:a||"\u3010\u91ce\u66ae\u306a\u77e5\u3089\u305b\u3011"}),(0,Tt.jsx)("button",{onClick:n,className:"info-modal-close-button",children:"\xd7"})]}),(0,Tt.jsx)("div",{className:"info-modal-body",children:(0,Tt.jsx)("p",{children:r})}),(0,Tt.jsx)("div",{className:"info-modal-footer",children:(0,Tt.jsx)("button",{onClick:n,className:"info-modal-ok-button",children:"OK"})})]})}):null},Nn=e=>{let{isOpen:t,onClose:n}=e;if(!t)return null;return(0,Tt.jsx)("div",{className:"overlay",onClick:e=>{e.target===e.currentTarget&&n()},children:(0,Tt.jsxs)("div",{className:"overlay-modal rules-overlay",children:[(0,Tt.jsxs)("div",{className:"overlay-header",children:[(0,Tt.jsx)("h2",{children:"\u3010\u56fd\u8208\u3057\u3011"}),(0,Tt.jsx)("button",{className:"close-button",onClick:n,children:"\xd7"})]}),(0,Tt.jsx)("div",{className:"overlay-content",children:(0,Tt.jsx)("pre",{className:"rules-text",children:"\n\u25a0 \u57fa\u672c\u30eb\u30fc\u30eb\n* \u30c7\u30c3\u30ad\u306f\u5fc5\u305a30~100\u679a\u3067\u69cb\u7bc9\u3057\u3066\u304f\u3060\u3055\u3044\u3002\n* \u540c\u3058\u30ab\u30fc\u30c9\u306e\u679a\u6570\u5236\u9650\u306f\u3042\u308a\u307e\u305b\u3093\u3002\n\n\u25a0 \u30c7\u30c3\u30ad\u69cb\u7bc9\u306e\u65b9\u6cd5\n1. \u300c\u30ab\u30fc\u30c9\u300d\u4e00\u89a7:\n   \u753b\u9762\u5de6\u306e\u4e00\u89a7\u304b\u3089\u30ab\u30fc\u30c9\u3092\u30af\u30ea\u30c3\u30af\u3059\u308b\u3068\u3001\u8a73\u7d30\u3092\u78ba\u8a8d\u3067\u304d\u307e\u3059\u3002\n   \u30ab\u30fc\u30c9\u3092\u30c7\u30c3\u30ad\u30a8\u30ea\u30a2\uff08\u53f3\u5074\uff09\u3078\u30c9\u30e9\u30c3\u30b0\uff06\u30c9\u30ed\u30c3\u30d7\u3059\u308b\u3053\u3068\u3067\u3082\u8ffd\u52a0\u3067\u304d\u307e\u3059\u3002\n\n2. \u300c\u73fe\u5728\u306e\u30c7\u30c3\u30ad\u300d\u30a8\u30ea\u30a2:\n   \u753b\u9762\u53f3\u5074\u304c\u3042\u306a\u305f\u306e\u30c7\u30c3\u30ad\u3067\u3059\u3002\u3053\u3053\u306b\u3042\u308b\u30ab\u30fc\u30c9\u3092\u30af\u30ea\u30c3\u30af\u3059\u308b\u3068\u3001\u305d\u306e\u30ab\u30fc\u30c9\u30921\u679a\u30c7\u30c3\u30ad\u304b\u3089\u524a\u9664\u3057\u307e\u3059\u3002\n   \u30c7\u30c3\u30ad\u5185\u306e\u30ab\u30fc\u30c9\u679a\u6570\u3068\u3001\u540c\u3058\u30ab\u30fc\u30c9\u306e\u679a\u6570\u304c\u8868\u793a\u3055\u308c\u307e\u3059\u3002\n\n3. \u300c\u898f\u6a21\u5206\u5e03\u300d:\n   \u30c7\u30c3\u30ad\u5185\u306e\u30ab\u30fc\u30c9\u306e\u300c\u5fc5\u8981\u898f\u6a21\u300d\u306e\u5206\u5e03\u3092\u30b0\u30e9\u30d5\u3067\u78ba\u8a8d\u3067\u304d\u307e\u3059\u3002\n   \u300c\u8868\u793a\u5207\u66ff\u300d\u30dc\u30bf\u30f3\u3067\u3001\u30b3\u30b9\u30c8\u3054\u3068\u306e\u8868\u793a\u3068\u3001\u7bc4\u56f2\u3092\u307e\u3068\u3081\u305f\u8868\u793a\u3092\u5207\u308a\u66ff\u3048\u3089\u308c\u307e\u3059\u3002\n\n4. \u300c\u30c7\u30c3\u30ad\u306e\u4fdd\u5b58\u300d:\n   \u30c7\u30c3\u30ad\u306b\u540d\u524d\u3092\u4ed8\u3051\u3066\u300c\u4fdd\u5b58\u300d\u30dc\u30bf\u30f3\u3092\u62bc\u3059\u3068\u3001\u4f5c\u6210\u3057\u305f\u30c7\u30c3\u30ad\u304c\u4fdd\u5b58\u3055\u308c\u307e\u3059\u3002\n   \u300c\u30a8\u30af\u30b9\u30dd\u30fc\u30c8\u300d\u3067\u30c7\u30c3\u30ad\u30c7\u30fc\u30bf\u3092\u30d5\u30a1\u30a4\u30eb\u3068\u3057\u3066\u4fdd\u5b58\u3067\u304d\u3001\u300c\u30a4\u30f3\u30dd\u30fc\u30c8\u300d\u3067\u30d5\u30a1\u30a4\u30eb\u3092\u8aad\u307f\u8fbc\u3081\u307e\u3059\u3002\n"})})]})})},Dn=e=>{let{card:t,onTap:n,onSwipeLeft:r}=e;const[i,l]=(0,a.useState)(!1),[o,s]=(0,a.useState)(!1),c=(0,a.useRef)(null),u=(0,a.useRef)(0),d=(0,a.useRef)(0),f=(0,a.useRef)(!1),p=(0,a.useCallback)(e=>{e.preventDefault(),u.current=e.clientX||e.touches[0].clientX,d.current=u.current,f.current=!1,l(!0),c.current=setTimeout(()=>{Math.abs(d.current-u.current)<10&&s(!0)},200)},[]),m=(0,a.useCallback)(e=>{if(!i)return;d.current=e.clientX||e.touches[0].clientX;u.current-d.current>10&&(f.current=!0,clearTimeout(c.current),s(!1))},[i]),_=(0,a.useCallback)(()=>{clearTimeout(c.current);const e=u.current-d.current;i&&(e>50?r&&r(t):Math.abs(e)<10&&n&&n(t)),l(!1),s(!1),u.current=0,d.current=0,f.current=!1},[i,t,n,r]),h=(0,a.useCallback)(()=>{i&&_()},[i,_]);return(0,Tt.jsxs)("div",{className:"deck-builder-library-card card-type-".concat(t.card_type," ").concat(i?"pressed":""),onMouseDown:p,onMouseMove:m,onMouseUp:_,onMouseLeave:h,onTouchStart:p,onTouchMove:m,onTouchEnd:_,title:"\u30af\u30ea\u30c3\u30af\u3067\u30c7\u30c3\u30ad\u306b\u8ffd\u52a0\u3001\u5de6\u30d5\u30ea\u30c3\u30af\u3067\u8a73\u7d30\u8868\u793a",children:[o&&(0,Tt.jsx)("div",{className:"card-swipe-hint",children:"\u2190 \u30d5\u30ea\u30c3\u30af\u3067\u8a73\u7d30"}),t.name," (",t.required_scale,")"]})},Rn=e=>{let{gameData:t,onExit:n,deckToEdit:r}=e;const{cardDefs:i}=t,[l,o]=(0,a.useState)([]),[s,u]=(0,a.useState)(""),[d,f]=(0,a.useState)({}),[p,m]=(0,a.useState)("implementation"),[_,h]=(0,a.useState)("all"),[g,y]=(0,a.useState)("all"),[v,E]=(0,a.useState)(null),[b,C]=(0,a.useState)("single"),A=(0,a.useRef)(null),[S,N]=(0,a.useState)({isOpen:!1,message:""}),[D,R]=(0,a.useState)(!1);(0,a.useEffect)(()=>{const e=Kt("customDecks")||{};f(e)},[]),(0,a.useEffect)(()=>{if(r&&i){const e=r.cards.map(e=>Object.values(i).find(t=>t.name===e)).filter(Boolean);u(r.name),o(e.sort((e,t)=>e.required_scale-t.required_scale))}},[]);const w=(0,a.useMemo)(()=>{if(!i)return[];let e=Object.values(i);return e=e.filter(e=>!e.is_token),"all"!==_&&(e=e.filter(e=>e.card_type===_)),"all"!==g&&(e=e.filter(e=>{const t=e.required_scale;switch(g){case"0-2":return t>=0&&t<=2;case"3-15":return t>=3&&t<=15;case"16+":return t>=16;default:return!0}})),e.sort((e,t)=>"requiredScale"===p?e.required_scale-t.required_scale:(e.definitionOrder||0)-(t.definitionOrder||0)),e},[i,p,_,g]),k=(0,a.useMemo)(()=>{const e={};if("single"===b){l.forEach(t=>{const n=t.required_scale;e[n]=(e[n]||0)+1});const t=Math.max(...Object.keys(e).map(Number),0),n=[];for(let a=0;a<=t;a++)e[a]>0&&n.push({label:"".concat(a),count:e[a]});return n}{const e={0:0,5:0,10:0,15:0,"20+":0};return l.forEach(t=>{const n=t.required_scale;n<=4?e[0]++:n<=9?e[5]++:n<=14?e[10]++:n<=19?e[15]++:e["20+"]++}),Object.entries(e).map(e=>{let[t,n]=e;return{label:t,count:n}})}},[l,b]);return i?(0,Tt.jsxs)("div",{className:"deck-builder-screen",children:[(0,Tt.jsx)(Sn,{isOpen:S.isOpen,message:S.message,onClose:()=>N({isOpen:!1,message:""})}),(0,Tt.jsx)(Nn,{isOpen:D,onClose:()=>R(!1)}),(0,Tt.jsxs)("div",{className:"deck-builder-container",children:[(0,Tt.jsxs)("div",{className:"screen-header",children:[(0,Tt.jsxs)("div",{className:"header-left",children:[(0,Tt.jsx)("h1",{children:"\u30c7\u30c3\u30ad\u69cb\u7bc9"}),(0,Tt.jsx)("button",{onClick:()=>R(!0),className:"help-button",children:"?"})]}),(0,Tt.jsx)("button",{onClick:n,className:"back-button",children:"\u2190 \u30bf\u30a4\u30c8\u30eb\u306b\u623b\u308b"})]}),(0,Tt.jsxs)("div",{className:"deck-builder-layout",children:[(0,Tt.jsxs)("div",{className:"card-library-section",children:[(0,Tt.jsxs)("div",{className:"library-header",children:[(0,Tt.jsx)("h2",{children:"\u30ab\u30fc\u30c9"}),(0,Tt.jsxs)("div",{className:"library-controls",children:[(0,Tt.jsxs)("div",{className:"sort-controls",children:[(0,Tt.jsx)("label",{children:"\u30bd\u30fc\u30c8:"}),(0,Tt.jsxs)("select",{value:p,onChange:e=>m(e.target.value),children:[(0,Tt.jsx)("option",{value:"implementation",children:"\u5b9f\u88c5\u9806"}),(0,Tt.jsx)("option",{value:"requiredScale",children:"\u5fc5\u8981\u898f\u6a21\u9806"})]})]}),(0,Tt.jsxs)("div",{className:"filter-controls",children:[(0,Tt.jsx)("label",{children:"\u30bf\u30a4\u30d7:"}),(0,Tt.jsxs)("select",{value:_,onChange:e=>h(e.target.value),children:[(0,Tt.jsx)("option",{value:"all",children:"\u3059\u3079\u3066"}),(0,Tt.jsx)("option",{value:"\u8ca1",children:"\u8ca1"}),(0,Tt.jsx)("option",{value:"\u4e8b\u8c61",children:"\u4e8b\u8c61"}),(0,Tt.jsx)("option",{value:"\u30a4\u30c7\u30aa\u30ed\u30ae\u30fc",children:"\u30a4\u30c7\u30aa\u30ed\u30ae\u30fc"})]}),(0,Tt.jsx)("label",{children:"\u5fc5\u8981\u898f\u6a21:"}),(0,Tt.jsxs)("select",{value:g,onChange:e=>y(e.target.value),children:[(0,Tt.jsx)("option",{value:"all",children:"\u3059\u3079\u3066"}),(0,Tt.jsx)("option",{value:"0-2",children:"0-2"}),(0,Tt.jsx)("option",{value:"3-15",children:"3-15"}),(0,Tt.jsx)("option",{value:"16+",children:"16+"})]})]})]})]}),(0,Tt.jsx)("div",{className:"deck-builder-card-grid",children:w.map(e=>(0,Tt.jsx)(Dn,{card:e,onTap:()=>(e=>{if(l.length>=100)return void N({isOpen:!0,message:"\u30c7\u30c3\u30ad\u306f".concat(100,"\u679a\u307e\u3067\u3067\u3059\u3002")});const t=[...l,e].sort((e,t)=>e.required_scale-t.required_scale);o(t)})(e),onSwipeLeft:()=>(e=>{E(e)})(e)},e.name))})]}),(0,Tt.jsxs)("div",{className:"deck-building-section",children:[(0,Tt.jsxs)("h2",{children:["\u73fe\u5728\u306e\u30c7\u30c3\u30ad (",l.length,"/",l.length<=30?30:100,")"]}),(0,Tt.jsx)("div",{className:"deck-list",children:0===l.length?(0,Tt.jsx)("div",{className:"empty-deck-placeholder",children:(0,Tt.jsxs)("p",{children:["\u30d7\u30fc\u30eb\u304b\u3089",(0,Tt.jsx)("br",{}),"\u30ab\u30fc\u30c9\u3092\u8ffd\u52a0"]})}):Object.values(l.reduce((e,t)=>(e[t.name]||(e[t.name]={card:t,count:0}),e[t.name].count++,e),{})).map(e=>{let{card:t,count:n}=e;return(0,Tt.jsxs)("div",{className:"deck-card",onClick:()=>((e,t)=>{const n=l.filter((e,n)=>n!==t);o(n)})(0,l.findIndex(e=>e.name===t.name)),title:"\u30af\u30ea\u30c3\u30af\u3067\u30c7\u30c3\u30ad\u304b\u30891\u679a\u524a\u9664",children:[n>1&&(0,Tt.jsxs)("div",{className:"deck-card-count",children:["x",n]}),(0,Tt.jsxs)("span",{children:[t.name," (",t.required_scale,")"]})]},t.name)})}),(0,Tt.jsxs)("div",{className:"cost-curve-wrapper",children:[(0,Tt.jsxs)("div",{className:"cost-curve-header",children:[(0,Tt.jsx)("h3",{children:"\u898f\u6a21\u5206\u5e03"}),(0,Tt.jsxs)("button",{onClick:()=>C("single"===b?"grouped":"single"),children:["\u8868\u793a\u5207\u66ff (","single"===b?"1\u533a\u5207\u308a":"5\u533a\u5207\u308a",")"]})]}),(0,Tt.jsx)(Zt,{data:k})]}),(0,Tt.jsxs)("div",{className:"deck-actions",children:[(0,Tt.jsx)("input",{type:"text",value:s,onChange:e=>u(e.target.value),placeholder:"\u30c7\u30c3\u30ad\u540d\u3092\u5165\u529b",className:"deck-name-input"}),(0,Tt.jsx)("button",{onClick:()=>{if(!s)return void N({isOpen:!0,message:"\u30c7\u30c3\u30ad\u540d\u3092\u5165\u529b\u3057\u3066\u304f\u3060\u3055\u3044\u3002"});if(0===l.length)return void N({isOpen:!0,message:"\u30c7\u30c3\u30ad\u304c\u7a7a\u3067\u3059\u3002"});const e=c(c({},d),{},{[s]:{name:s,cards:l.map(e=>e.name)}});Xt("customDecks",e),f(e),N({isOpen:!0,message:"\u30c7\u30c3\u30ad\u300c".concat(s,"\u300d\u3092\u4fdd\u5b58\u3057\u307e\u3057\u305f\uff01")})},className:"primary-action",children:"\u4fdd\u5b58"}),(0,Tt.jsx)("button",{onClick:()=>{if(!s||0===l.length)return void N({isOpen:!0,message:"\u30a8\u30af\u30b9\u30dd\u30fc\u30c8\u3059\u308b\u524d\u306b\u3001\u30c7\u30c3\u30ad\u306b\u540d\u524d\u3092\u4ed8\u3051\u3066\u30ab\u30fc\u30c9\u3092\u8ffd\u52a0\u3057\u3066\u304f\u3060\u3055\u3044\u3002"});const e={name:s,cards:l.map(e=>e.name)},t=JSON.stringify(e,null,2),n=new Blob([t],{type:"application/json"}),a=URL.createObjectURL(n),r=document.createElement("a");r.href=a,r.download="".concat(s,".json"),document.body.appendChild(r),r.click(),document.body.removeChild(r),URL.revokeObjectURL(a)},className:"secondary-action",children:"\u30a8\u30af\u30b9\u30dd\u30fc\u30c8"}),(0,Tt.jsx)("button",{onClick:()=>{A.current.click()},className:"secondary-action",children:"\u30a4\u30f3\u30dd\u30fc\u30c8"}),(0,Tt.jsx)("input",{type:"file",ref:A,style:{display:"none"},accept:".json",onChange:e=>{const t=e.target.files[0];if(!t)return;const n=new FileReader;n.onload=t=>{try{const n=JSON.parse(t.target.result);if(!(n&&n.name&&Array.isArray(n.cards)))throw new Error("\u7121\u52b9\u306a\u30c7\u30c3\u30ad\u30d5\u30a1\u30a4\u30eb\u5f62\u5f0f\u3067\u3059\u3002");{if(d[n.name]&&!window.confirm("\u30c7\u30c3\u30ad\u300c".concat(n.name,"\u300d\u306f\u65e2\u306b\u5b58\u5728\u3057\u307e\u3059\u3002\u4e0a\u66f8\u304d\u3057\u307e\u3059\u304b\uff1f")))return void(e.target.value="");const t=n.cards.map(e=>Object.values(i).find(t=>t.name===e)).filter(Boolean);u(n.name),o(t.sort((e,t)=>e.required_scale-t.required_scale));const a=c(c({},d),{},{[n.name]:{name:n.name,cards:n.cards}});Xt("customDecks",a),f(a),N({isOpen:!0,message:"\u30c7\u30c3\u30ad\u300c".concat(n.name,"\u300d\u3092\u30a4\u30f3\u30dd\u30fc\u30c8\u3057\u3066\u4fdd\u5b58\u3057\u307e\u3057\u305f\uff01")})}}catch(n){N({isOpen:!0,message:"\u30a4\u30f3\u30dd\u30fc\u30c8\u30a8\u30e9\u30fc: ".concat(n.message)})}},n.readAsText(t),e.target.value=""}})]})]})]})]}),v&&(0,Tt.jsx)(Ut,{card:v,onClose:()=>E(null)})]}):(0,Tt.jsx)("div",{className:"deck-builder-screen",children:(0,Tt.jsxs)("div",{className:"deck-builder-container",children:[(0,Tt.jsx)("h1",{children:"\u30c7\u30c3\u30ad\u69cb\u7bc9"}),(0,Tt.jsx)("p",{children:"\u30ab\u30fc\u30c9\u5b9a\u7fa9\u3092\u8aad\u307f\u8fbc\u3081\u307e\u305b\u3093\u3067\u3057\u305f..."}),(0,Tt.jsx)("button",{onClick:n,className:"exit-button",children:"\u30e1\u30cb\u30e5\u30fc\u306b\u623b\u308b"})]})})};const wn=new class{constructor(){this.pendingEffects=!1,this.effectProcessingCallbacks=[],this.animationCallbacks=[]}recordEffect(e,t,n){this.pendingEffects=!0;const a=JSON.parse(JSON.stringify(t)),r=n?JSON.parse(JSON.stringify(n)):null;this.notifyAnimationCallbacks(e,a,r)}notifyEffectProcessingComplete(){this.pendingEffects&&(this.pendingEffects=!1,this.effectProcessingCallbacks.forEach(e=>{try{e()}catch(t){console.error("[EffectMonitor] Error in effect processing callback:",t)}}))}onEffectProcessingComplete(e){this.effectProcessingCallbacks.push(e)}removeEffectProcessingCallback(e){const t=this.effectProcessingCallbacks.indexOf(e);t>-1&&this.effectProcessingCallbacks.splice(t,1)}registerAnimationCallback(e){this.animationCallbacks.push(e)}removeAnimationCallback(e){const t=this.animationCallbacks.indexOf(e);t>-1&&this.animationCallbacks.splice(t,1)}isCallbackRegistered(e){return this.animationCallbacks.includes(e)}notifyAnimationCallbacks(e,t,n){t&&t.effect_type?0!==this.animationCallbacks.length&&this.animationCallbacks.forEach((a,r)=>{try{a(e,t,n)}catch(i){console.error("\ud83c\udfacANIM [EffectMonitor] Error in animation callback:",i)}}):console.warn("\ud83c\udfaeGAME_ANIM [EffectMonitor] notifyAnimationCallbacks received null or invalid effect. Skipping.")}};const kn=function(){var e;const[t,n]=(0,a.useState)(null),[r,i]=(0,a.useState)({cardDefs:null,presetDecks:null}),[l,o]=(0,a.useState)(!0),[s,u]=(0,a.useState)(null),[d,f]=(0,a.useState)(!1),p=(0,a.useRef)(t);(0,a.useEffect)(()=>{p.current=t},[t]);const[m,_]=(0,a.useState)("title"),[h,g]=(0,a.useState)(null),y=(0,a.useRef)(!1),v=(0,a.useRef)(!1),E=En(t,wn);(0,a.useEffect)(()=>{if(t&&t.effect_queue.length>0&&!t.awaiting_input){console.log("[App] Processing effects, queue length:",t.effect_queue.length),console.log("[App] Effects in queue:",t.effect_queue.map(e=>{let[t]=e;return t.effect_type}));const e=gn(t);console.log("[App] Effects processed, new queue length:",e.effect_queue.length),n(e)}},[t]),(0,a.useEffect)(()=>{if(t&&!t.awaiting_input&&0===t.effect_queue.length&&t.processing_status.pending_turn_transition&&!y.current){y.current=!0,console.log("[App] All effects processed, initiating turn transition...");const e=(e=>{const t=te(e,e=>{const t=e.players[ge].ideology,n=e.players[ye].ideology;e.turnHistory.push({turnNumber:e.turn_number,playerConsciousness:e.players[ge].consciousness,npcConsciousness:e.players[ye].consciousness,playerIdeologies:t?[t.name]:[],npcIdeologies:n?[n.name]:[]});const a=e.current_turn,r=a===_e?he:_e;e.players[a].cards_played_this_turn=0,e.turn_end_state="ready_for_next_turn",e.processing_status.is_processing_turn_end=!1,e.processing_status.pending_turn_transition=!1,e.processing_status.awaiting_input_for=null,e.current_turn=r,a===e.first_player?e.turn_in_round=2:(e.round_number+=1,e.turn_in_round=1),e.turn_number=(e.turn_number||1)+1});return vn(t)})(t);n(e),y.current=!1}},[t]),(0,a.useEffect)(()=>{null===t||void 0===t||!t.game_over||d||v.current||(console.log("[GAME_END_DEBUG] App.js: game_over detected.",{game_over:t.game_over,playingGameResultAnimation:d}),console.log("[GAME_END_DEBUG] App.js: Setting playingGameResultAnimation to true."),v.current=!0,f(!0))},[null===t||void 0===t?void 0:t.game_over,d]),(0,a.useEffect)(()=>{console.log("[App] Starting to load game data..."),o(!0),u(null),Promise.all([fetch("/card_definitions.json").then(e=>{if(console.log("[App] Card definitions response status:",e.status),!e.ok)throw new Error("Failed to load card definitions: ".concat(e.status));return e.json()}),fetch("/preset_decks.json").then(e=>{if(console.log("[App] Preset decks response status:",e.status),!e.ok)throw new Error("Failed to load preset decks: ".concat(e.status));return e.json()})]).then(e=>{let[t,n]=e;console.log("[App] Raw card definitions count:",t.length),console.log("[App] Raw preset decks count:",n.length);const a=t.reduce((e,t,n)=>(e[t.name]=c(c({},t),{},{definitionOrder:n}),e),{});console.log("[App] Processed card definitions keys:",Object.keys(a).length),console.log("[App] Preset decks array length:",n.length),console.log("[App] Available preset deck names:",n.map(e=>e.name)),i({cardDefs:a,presetDecks:n}),o(!1)}).catch(e=>{console.error("[App] Error loading game data:",e),u(e.message),o(!1)})},[]);const b=(0,a.useCallback)(function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"\u57fa\u672c\u6226\u58eb\u30c7\u30c3\u30ad",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"\u57fa\u672c\u6210\u9577\u30c7\u30c3\u30ad";if(!r.cardDefs||!r.presetDecks)return void u("\u30b2\u30fc\u30e0\u30c7\u30fc\u30bf\u304c\u8aad\u307f\u8fbc\u307e\u308c\u3066\u3044\u307e\u305b\u3093");const a=r.presetDecks.some(t=>t.name===e),i=r.presetDecks.some(e=>e.name===t);if(a)if(i)try{console.log("[App] Starting game with decks:",e,t),console.log("[App] Available preset decks:",r.presetDecks.map(e=>e.name));const a=((e,t,n,a)=>{const r=t.find(e=>e.name===n),i=t.find(e=>e.name===a);if(!r)throw new Error('Preset deck named "'.concat(n,'" not found.'));if(!i)throw new Error('Preset deck named "'.concat(a,'" not found.'));const l=r.cards.map(t=>e[t]),o=i.cards.map(t=>e[t]);let s=l.map(e=>ue(e,_e)),c=o.map(e=>ue(e,he));s=de(s),c=de(c);const u=s.splice(0,3),d=c.splice(0,3);let f={players:{[ge]:{id:ge,name:"\u3042\u306a\u305f",isNPC:!1,consciousness:15,scale:5,field_limit:5,deck:s,hand:u,field:[],discard:[],ideology:null,hand_capacity:10,modify_parameter_corrections:[],cards_played_this_turn:0},[ye]:{id:ye,name:"NPC",isNPC:!0,consciousness:15,scale:5,field_limit:5,deck:c,hand:d,field:[],discard:[],ideology:null,hand_capacity:10,modify_parameter_corrections:[],cards_played_this_turn:0}},current_turn:null,phase:pe,mulligan_state:{[ge]:{status:"undecided",count:0},[ye]:{status:"undecided",count:0}},effect_queue:[],awaiting_input:null,effects_to_skip:{},game_over:!1,winner:null,temp_effect_data:{},displaced_ideology:null,all_card_instances:{},cardDefs:e,turn_number:1,round_number:1,turn_in_round:1,game_log:[],turn_end_state:"ready_for_next_turn",processing_status:{is_processing_turn_end:!1,effects_remaining:0,awaiting_input_for:null,pending_turn_transition:!1},firstTurnStarted:!1,lastUpdate:null,isAnimationLocked:!1,animation_queue:[],turnHistory:[]};Object.values(f.players).forEach(e=>{e.deck.forEach(e=>{e.location="deck",f.all_card_instances[e.instance_id]=e}),e.hand.forEach(e=>{e.location="hand",f.all_card_instances[e.instance_id]=e})});const p=[_e,he],m=p[Math.floor(Math.random()*p.length)],_=m===_e?he:_e;f.current_turn=m,f.first_player=m;const h=f.players[m].name,g=f.players[_].name;return f.animation_queue.push({effect:{effect_type:"TURN_ORDER_DECISION",args:{first_player:h,second_player:g,first_player_id:m,second_player_id:_}},sourceCard:null}),f.players[m].consciousness+=-3,f.game_log.push({id:"game_start_".concat(Date.now()),timestamp:Date.now(),type:"game_start",message:"\u30b2\u30fc\u30e0\u958b\u59cb - ".concat(f.players[m].name,"\u304c\u5148\u653b"),details:{first_player_id:m,first_player_name:f.players[m].name,debuff_applied:-3}}),f})(r.cardDefs,r.presetDecks,e,t);if(!a)throw new Error("\u30b2\u30fc\u30e0\u72b6\u614b\u306e\u521d\u671f\u5316\u306b\u5931\u6557\u3057\u307e\u3057\u305f");console.log("[App] Game initialized successfully"),v.current=!1,n(a),_("game"),u(null)}catch(s){console.error("[App] Error initializing game:",s),u("\u30b2\u30fc\u30e0\u521d\u671f\u5316\u30a8\u30e9\u30fc: ".concat(s.message)),_("title")}else u('NPC\u30c7\u30c3\u30ad "'.concat(t,'" \u304c\u898b\u3064\u304b\u308a\u307e\u305b\u3093'));else u('\u30d7\u30ec\u30a4\u30e4\u30fc\u30c7\u30c3\u30ad "'.concat(e,'" \u304c\u898b\u3064\u304b\u308a\u307e\u305b\u3093'))},[r]);(0,a.useEffect)(()=>{r.cardDefs&&r.presetDecks&&!l&&!s&&(console.log("[App] Data loaded, showing title screen..."),_("title"))},[r,l,s]);const C=(0,a.useCallback)(()=>{console.log("[GAME_END_DEBUG] App.js: handleGameResultAnimationComplete called."),console.log("[GAME_END_DEBUG] App.js: Setting playingGameResultAnimation to false and currentScreen to gameOver."),f(!1),_("gameOver")},[]),A=(0,a.useCallback)(e=>{console.log("[App] System animation completed, updating state for NPC action");const{isGameLocked:t,lastUpdate:a}=e.detail;n(e=>te(e,e=>{e&&(e.isAnimationLocked=t,e.lastUpdate=a)}))},[]);(0,a.useEffect)(()=>(window.addEventListener("gameResultAnimationComplete",C),window.addEventListener("systemAnimationComplete",A),()=>{window.removeEventListener("gameResultAnimationComplete",C),window.removeEventListener("systemAnimationComplete",A)}),[C,A]);const S=(0,a.useCallback)((e,t)=>{if(!p.current||"decided"===p.current.mulligan_state[e].status)return;const a=((e,t,n)=>te(e,e=>{const a=e.players[t];if(!a)return;if(e.mulligan_state[t].status="decided",e.mulligan_state[t].count=n.length,!n||0===n.length)return;const r=[],i=[];a.hand.forEach(e=>{n.includes(e.instance_id)?r.push(e):i.push(e)});const l=r.length,o=a.deck.splice(0,l);o.forEach(e=>{e.isNew=!0}),a.hand=[...i,...o],a.deck.push(...r),a.deck=de(a.deck)}))(p.current,e,t);n(a)},[]);(0,a.useEffect)(()=>{var e,a,r,i;if(console.log("[App Debug] Mulligan resolution useEffect running. Phase: ".concat(null===t||void 0===t?void 0:t.phase,", Human State: ").concat(null===t||void 0===t||null===(e=t.mulligan_state[ge])||void 0===e?void 0:e.status,", NPC State: ").concat(null===t||void 0===t||null===(a=t.mulligan_state[ye])||void 0===a?void 0:a.status)),(null===t||void 0===t?void 0:t.phase)!==pe)return;const{mulligan_state:l}=t,o="decided"===(null===(r=l[ge])||void 0===r?void 0:r.status),s="decided"===(null===(i=l[ye])||void 0===i?void 0:i.status);if(o&&s){console.log("[App] Both players have decided their mulligans. Starting resolution timer.");const e=setTimeout(()=>{n(e=>e.phase===pe?(console.log("[App] Resolving mulligan phase after timer."),(e=>{const{mulligan_state:t}=e;return"decided"===t[ge].status&&"decided"===t[ye].status?vn(e):e})(e)):(console.log("[App] Mulligans already resolved or phase changed during timer."),e))},3e3);return()=>{console.log("[App] Cleaning up mulligan resolution timer."),clearTimeout(e)}}},[t]);const N=(0,a.useCallback)(e=>{var t;if(!p.current||!e||p.current.awaiting_input||p.current.game_over||p.current.isAnimationLocked)return void(null!==(t=p.current)&&void 0!==t&&t.isAnimationLocked&&console.log("[App] Card play blocked - animation in progress"));const a=p.current.current_turn,r=function(e,t,n){let a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};return te(e,e=>{const r=e.players[t];if(e.current_turn!==t)return;const i=r.hand.findIndex(e=>e.instance_id===n);if(-1===i)return;const l=r.hand[i];if(fe(r)<l.required_scale)return;if(r.ideology&&"\u539f\u59cb\u5171\u7523\u5236"===r.ideology.name&&l.card_type===ve)return;const o={effect_type:Ae,args:c({player_id:t,action_type:"play_card",card_id:n},a)};e.effect_queue.push([o,l])})}(p.current,a,e.instance_id);n(r)},[]),D=(0,a.useCallback)(()=>{var e;if(!p.current||p.current.awaiting_input||p.current.game_over||p.current.isAnimationLocked)return void(null!==(e=p.current)&&void 0!==e&&e.isAnimationLocked&&console.log("[App] End turn blocked - animation in progress"));let t=(e=>te(e,e=>{const t=e.current_turn,n=e.players[t];e.animation_queue.push({effect:{effect_type:"TURN_END",args:{player_name:n.name,player_id:t}},sourceCard:null}),e.turn_end_state="processing_effects",e.processing_status.is_processing_turn_end=!0,e.processing_status.pending_turn_transition=!0;const a={player_id:t,target_player_id:t},r={player_id:t,target_player_id:t===_e?he:_e};e.effect_queue.push([{effect_type:Ce.END_TURN_OWNER,args:a},null]),e.effect_queue.push([{effect_type:Ce.END_TURN_OPPONENT,args:r},null])}))(p.current);n(t)},[]),R=(0,a.useCallback)(e=>{var t;if(!p.current||!p.current.awaiting_input||p.current.game_over||p.current.isAnimationLocked)return void(null!==(t=p.current)&&void 0!==t&&t.isAnimationLocked&&console.log("[App] Input blocked - animation in progress"));let a=((e,t)=>{const n=te(e,e=>{const{type:n,player_id:a,source_card_instance_id:r,destination_pile:i,source_piles:l,source_effect:o,position:s}=e.awaiting_input;e.awaiting_input=null;let u=null;if(u=e.all_card_instances[r],!u)for(const t of Object.values(e.players))if(u=[...t.field,t.ideology,...t.hand,...t.discard].find(e=>e&&e.instance_id===r),u)break;if(u)switch(n){case"CHOICE_CARD_TO_ADD":{const n={effect_type:He,args:{player_id:a,card_template_name:t,destination_pile:"hand"}};e.effect_queue.push([n,u]);break}case"CHOICE_CARD_FROM_PILE":{const n=t;let r=null;for(const t of l){const i=e.players[a][t];if(i&&i.find(e=>e.instance_id===n.instance_id)){r=t;break}}if(r){const t={effect_type:Ye,args:{player_id:a,card_id:n.instance_id,source_pile:r,destination_pile:i,position:s}};e.effect_queue.push([t,u])}break}case"CHOICE_CARDS_FOR_OPERATION":{const n={effect_type:o.effect_type,args:c(c({},o.args),{},{selected_cards:t})};e.effect_queue.push([n,u]);break}case"CHOICE_NUMBER":{const n=t,a={effect_type:o.effect_type,args:c(c({},o.args),{},{amount:n})};e.effect_queue.push([a,u]);break}default:{const n=Array.isArray(t)?t[0]:t,a={effect_type:o.effect_type,args:c(c({},o.args),{},{card_id:n.instance_id})};e.effect_queue.push([a,u]);break}}});let a=gn(n);return a.awaiting_input||a.processing_status.pending_turn_transition&&(a=te(a,e=>{e.turn_end_state="processing_effects",e.processing_status.awaiting_input_for=null})),a})(p.current,e);n(a)},[]),w=(0,a.useCallback)(()=>{if(!p.current||p.current.game_over)return;const e=te(p.current,e=>{e.players[ge].consciousness=0});n(yn(e))},[]);if(s)return(0,Tt.jsx)("div",{className:"App",children:(0,Tt.jsxs)("div",{className:"error-container",children:[(0,Tt.jsx)("h1",{children:"\u30a8\u30e9\u30fc\u304c\u767a\u751f\u3057\u307e\u3057\u305f"}),(0,Tt.jsx)("p",{children:s}),(0,Tt.jsx)("button",{onClick:()=>window.location.reload(),children:"\u518d\u8aad\u307f\u8fbc\u307f"})]})});if(l)return(0,Tt.jsx)("div",{className:"App",children:(0,Tt.jsxs)("div",{className:"loading",children:[(0,Tt.jsx)("h1",{children:"\u30b2\u30fc\u30e0\u3092\u8aad\u307f\u8fbc\u307f\u4e2d..."}),(0,Tt.jsx)("p",{children:"\u30ab\u30fc\u30c9\u30c7\u30fc\u30bf\u3068\u30d7\u30ea\u30bb\u30c3\u30c8\u30c7\u30c3\u30ad\u3092\u8aad\u307f\u8fbc\u3093\u3067\u3044\u307e\u3059"})]})});const k=function(e){g((arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}).deckToEdit||null),_(e)};return console.log("[GAME_END_DEBUG] App.js: Checking render condition for game over screen.",{game_over:null===t||void 0===t?void 0:t.game_over,playingGameResultAnimation:d}),(0,Tt.jsx)("div",{className:"App",children:"game"===m&&t?(0,Tt.jsxs)(Tt.Fragment,{children:[(0,Tt.jsx)(Qt,{gameState:t,cardDefs:r.cardDefs,onPlayCard:N,onEndTurn:D,onProvideInput:R,onSurrender:w,onGameStateUpdate:n,effectMonitor:E.getEffectMonitor(),enhancedLog:E,onConfirmMulligan:S}),d&&null]}):"gameOver"===m&&t?(0,Tt.jsx)(An,{winnerName:(null===(e=t.players[t.winner])||void 0===e?void 0:e.name)||"Unknown",turnHistory:t.turnHistory,gameState:t,onNewGame:()=>{n(null),k("deckSelection")},onMainMenu:()=>{_("title"),n(null)}}):"deckBuilder"===m?(0,Tt.jsx)(Rn,{gameData:r,onExit:()=>k("title"),deckToEdit:h}):(0,Tt.jsx)(nn,{gameData:r,onStartGame:b,currentScreen:m,onScreenChange:k})})},On=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function xn(e,t){navigator.serviceWorker.register(e).then(e=>{e.onupdatefound=()=>{const n=e.installing;null!=n&&(n.onstatechange=()=>{"installed"===n.state&&(navigator.serviceWorker.controller?(console.log("New content is available and will be used when all tabs for this page are closed. See https://cra.link/PWA."),t&&t.onUpdate&&t.onUpdate(e)):(console.log("Content is cached for offline use."),t&&t.onSuccess&&t.onSuccess(e)))})}}).catch(e=>{console.error("Error during service worker registration:",e)})}const Tn=e=>{e&&e instanceof Function&&n.e(453).then(n.bind(n,453)).then(t=>{let{getCLS:n,getFID:a,getFCP:r,getLCP:i,getTTFB:l}=t;n(e),a(e),r(e),i(e),l(e)})};sn=wn,console.log("\ud83c\udfacANIM [index.js] Global EffectLogger set.");r.createRoot(document.getElementById("root")).render((0,Tt.jsx)(a.StrictMode,{children:(0,Tt.jsx)(kn,{})})),Tn(),function(e){if("serviceWorker"in navigator){if(new URL(".",window.location.href).origin!==window.location.origin)return;window.addEventListener("load",()=>{const t="".concat(".","/service-worker.js");On?(!function(e,t){fetch(e,{headers:{"Service-Worker":"script"}}).then(n=>{const a=n.headers.get("content-type");404===n.status||null!=a&&-1===a.indexOf("javascript")?navigator.serviceWorker.ready.then(e=>{e.unregister().then(()=>{window.location.reload()})}):xn(e,t)}).catch(()=>{console.log("No internet connection found. App is running in offline mode.")})}(t,e),navigator.serviceWorker.ready.then(()=>{console.log("This web app is being served cache-first by a service worker. To learn more, visit https://cra.link/PWA")})):xn(t,e)})}}()})();
//# sourceMappingURL=main.512d516f.js.map