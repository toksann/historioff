import React from 'react';

const RULES_TEXT = `--- ルール説明 ---

『h1$tor!0』へようこそ！
このゲームは、異なる民族/イデオロギーが互いの「意識」を競い合うカードゲームです。

### 勝利・敗北条件

以下のいずれかの条件を満たした場合、ゲームは終了します。

* 「勝利条件」:
    * 相手の「意識が0以下になったとき」。
    * 自分か相手の「デッキが0枚になり、そのときの意識が相手より高いとき」。

* 「敗北条件」:
    * 自分の「意識が0以下になったとき」。
    * 自分か相手の「デッキが0枚になり、そのときの意識が相手より低いとき」。
    
* ※デッキが0枚になったときの互いの意識が同じ場合、ターン中のプレイヤーが敗北します。

### ターンの進行

* 「先攻/後攻の決定」:
    * ゲーム開始時にランダムで先攻・後攻を決定します。先攻は「意識12」、後攻は「意識15」からゲームを開始します。

* 「ターンの流れ」:
    * 各プレイヤーは以下のフェーズを順に進めます。

1.  「カードドロー」: デッキからカードを1枚引きます。手札が「10枚」を超える場合、引いたカードは捨て札になります。
2.  「ターン開始時効果」: 発動する効果を持つカード（主にイデオロギーカード）がある場合、その効果を解決します。
3.  「カードプレイフェーズ」: 手札から好きな枚数のカードをプレイできます。カードをプレイするには、それぞれのカードに記載された「必要規模」を自分の「規模」が満たしている必要があります。
4.  「ターン終了時効果」: 場に出ている財カードや、現在有効なイデオロギーカードのターン終了時効果を解決します。
    * 財カードは「左から順」に効果を解決し、耐久値が0になった場合は捨て札になります。
5.  「ターン終了」: 相手のターンに移ります。

### カードの種類

* 「財カード」: 場に出して継続的に効果を発揮するカードです。場には最大「5枚」まで配置できます(カード効果により配置上限が変化する場合があります)。耐久値を持ち、ダメージを受けると耐久値が減少し、0になると捨て札になります。攻撃能力は必ずしも持っていません。
* 「事象カード」: プレイすると即座に効果を発揮し、その後捨て札になります。
* 「イデオロギーカード」: 人類のイデオロギーを表すカードです。場には「1枚」しか配置できません。新しいイデオロギーカードをプレイすると、現在場にあるイデオロギーカードは捨て札になります。既に配置されているイデオロギーと同じ名前のイデオロギーカードを配置することも可能で、その場合は意識が+1されます。

### キーワード能力

ゲーム中に登場する特定のキーワード能力について説明します。

* **反撃X（数値）**: このカードが相手の財カードからダメージを受けた時、そのダメージを与えた相手の財カードにXダメージを与えます。

### その他の仕様

* 「規模」は、0を下回ることはありません。

（ルールはゲームの更新に伴い、適宜追加・更新される場合があります。）`;

const RulesOverlay = ({ isOpen, onClose }) => {
  if (!isOpen) return null;

  const handleOverlayClick = (e) => {
    if (e.target === e.currentTarget) {
      onClose();
    }
  };

  return (
    <div className="overlay" onClick={handleOverlayClick}>
      <div className="overlay-modal rules-overlay">
        <div className="overlay-header">
          <h2>ルール説明</h2>
          <button className="close-button" onClick={onClose}>×</button>
        </div>
        
        <div className="overlay-content">
          <pre className="rules-text">{RULES_TEXT}</pre>
        </div>
      </div>
    </div>
  );
};

export default RulesOverlay;